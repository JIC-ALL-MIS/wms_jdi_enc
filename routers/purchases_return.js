function a0_0x6c5b(_0x1973eb,_0x5b73f5){var _0x37b7c7=a0_0x37b7();return a0_0x6c5b=function(_0x6c5b77,_0x4d5a54){_0x6c5b77=_0x6c5b77-0xf7;var _0x5b8a45=_0x37b7c7[_0x6c5b77];return _0x5b8a45;},a0_0x6c5b(_0x1973eb,_0x5b73f5);}var a0_0xaa0a2f=a0_0x6c5b;function a0_0x37b7(){var _0x535b5e=['type','Spanish','purchases_return','to_room','Hindi','return_purchase_edit','$product_details.type','$product_details.product_stock','$suppliers','findById','user','suppliers','Return\x20Goods','purchase\x20return\x20successfully','language','purchase_quantity','334698cYUhvY','$product_details.bay','pallet','1158eenUSS','356TUfisY','final','$total_amount','success','$received','json','Portuguese','exports','$product_details.primary_code','$note','3355184nNeZrh','errors','received','status','forEach','return_qty','back','$product_details.rack','floorlevel','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','$return_product.return_qty','$receivable','product_details.return_qtyproduct_details.return_qty','$return_product.product_name','post','$return_product.price','return_product','types','stocks','Chinese','$name','getMonth','$date','Arabic\x20(ae)','$_id','body','$product_details.secondary_code','Received\x20For\x20Purchase\x20Return','English\x20(US)','old_data','slice','get','master','$product_details.floorlevel','$product_details._id','params','../public/language/languages.json','Purchase\x20Return','invoice','name','German','bay','product_code','$supplier_docs.mobile','room','message','$supplier_docs.address','product_code_hide','Arabic','English','18714xuAAfQ','Enabled','108rPSQtu','$supplier_docs','express','aggregate','2353288VdEPxq','/view','date','findOne','product_name','/view/:id','foreach\x20newproduct','154284rdukSO','product_stock','$due_amount','901200TtxEMt','bin','note','$return_product','to_warehouse_name','level','map','to_Room_name','$product_details','save','/receive_payment/:id','isle','email','flash','../middleware/auth','getFullYear','French','../models/all_models','find','render','stock_quantity','$discount','old_warehouse_data','/invoice/:id','redirect','7510BpVHwh','Portuguese\x20(BR)','$invoice','/purchases_return/view','$return_product.total','$product_details.product_code','primary_code_hide','log','$supplier_docs.email'];a0_0x37b7=function(){return _0x535b5e;};return a0_0x37b7();}(function(_0x4e7dc0,_0x10383b){var _0x4d199f=a0_0x6c5b,_0x2750d1=_0x4e7dc0();while(!![]){try{var _0x9c9eff=parseInt(_0x4d199f(0x10d))/0x1+parseInt(_0x4d199f(0x142))/0x2+parseInt(_0x4d199f(0x100))/0x3*(-parseInt(_0x4d199f(0x146))/0x4)+parseInt(_0x4d199f(0x129))/0x5*(-parseInt(_0x4d199f(0x145))/0x6)+-parseInt(_0x4d199f(0x150))/0x7+parseInt(_0x4d199f(0x106))/0x8+parseInt(_0x4d199f(0x102))/0x9*(parseInt(_0x4d199f(0x110))/0xa);if(_0x9c9eff===_0x10383b)break;else _0x2750d1['push'](_0x2750d1['shift']());}catch(_0x2db536){_0x2750d1['push'](_0x2750d1['shift']());}}}(a0_0x37b7,0x5b076));const express=require(a0_0xaa0a2f(0x104)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0xaa0a2f(0x121)),auth=require(a0_0xaa0a2f(0x11e)),users=require(a0_0xaa0a2f(0x174));router[a0_0xaa0a2f(0x16f)](a0_0xaa0a2f(0x107),auth,async(_0x3c64bd,_0x2b5601)=>{var _0x3b31d9=a0_0xaa0a2f;try{const {username:_0xb1d4d5,email:_0x56f6e1,role:_0x24e6ed}=_0x3c64bd['user'],_0x54d896=_0x3c64bd[_0x3b31d9(0x13c)],_0x81872a=await profile[_0x3b31d9(0x109)]({'email':_0x54d896[_0x3b31d9(0x11c)]}),_0x49bdaf=await master_shop[_0x3b31d9(0x122)]();console[_0x3b31d9(0x130)]('master',_0x49bdaf);const _0x58b3ed=await purchases_return[_0x3b31d9(0x105)]([{'$lookup':{'from':_0x3b31d9(0x13d),'localField':_0x3b31d9(0x13d),'foreignField':_0x3b31d9(0x177),'as':'supplier_docs'}},{'$unwind':_0x3b31d9(0x113)},{'$unwind':_0x3b31d9(0x103)},{'$group':{'_id':_0x3b31d9(0x168),'invoice':{'$first':_0x3b31d9(0x12b)},'date':{'$first':_0x3b31d9(0x166)},'suppliers':{'$first':_0x3b31d9(0x13a)},'warehouse_name':{'$first':'$warehouse_name'},'product_name':{'$first':_0x3b31d9(0x15d)},'return_qty':{'$first':_0x3b31d9(0x15a)},'price':{'$first':_0x3b31d9(0x15f)},'total':{'$sum':_0x3b31d9(0x12d)},'note':{'$first':_0x3b31d9(0x14f)},'total_amount':{'$first':_0x3b31d9(0x148)},'discount':{'$first':_0x3b31d9(0x125)},'receivable':{'$first':_0x3b31d9(0x15b)},'received':{'$first':_0x3b31d9(0x14a)},'due_amount':{'$first':_0x3b31d9(0x10f)},'mobile':{'$first':_0x3b31d9(0xf9)},'email':{'$first':_0x3b31d9(0x131)},'address':{'$first':_0x3b31d9(0xfc)},'return_sum_qty':{'$sum':'$return_product.return_qty'}}}]);console[_0x3b31d9(0x130)](_0x58b3ed);if(_0x49bdaf[0x0]['language']==_0x3b31d9(0x16c)){var _0x5d5578=users[_0x3b31d9(0xff)];console[_0x3b31d9(0x130)](_0x5d5578);}else{if(_0x49bdaf[0x0][_0x3b31d9(0x140)]==_0x3b31d9(0x136))var _0x5d5578=users[_0x3b31d9(0x136)];else{if(_0x49bdaf[0x0][_0x3b31d9(0x140)]=='German')var _0x5d5578=users[_0x3b31d9(0x178)];else{if(_0x49bdaf[0x0][_0x3b31d9(0x140)]==_0x3b31d9(0x133))var _0x5d5578=users[_0x3b31d9(0x133)];else{if(_0x49bdaf[0x0][_0x3b31d9(0x140)]==_0x3b31d9(0x120))var _0x5d5578=users[_0x3b31d9(0x120)];else{if(_0x49bdaf[0x0][_0x3b31d9(0x140)]==_0x3b31d9(0x12a))var _0x5d5578=users['Portuguese'];else{if(_0x49bdaf[0x0]['language']==_0x3b31d9(0x163))var _0x5d5578=users[_0x3b31d9(0x163)];else{if(_0x49bdaf[0x0][_0x3b31d9(0x140)]==_0x3b31d9(0x167))var _0x5d5578=users['Arabic'];}}}}}}}_0x2b5601[_0x3b31d9(0x123)](_0x3b31d9(0x134),{'success':_0x3c64bd[_0x3b31d9(0x11d)](_0x3b31d9(0x149)),'errors':_0x3c64bd[_0x3b31d9(0x11d)]('errors'),'role':_0x54d896,'profile':_0x81872a,'master_shop':_0x49bdaf,'user':_0x58b3ed,'language':_0x5d5578});}catch(_0x4b1724){console[_0x3b31d9(0x130)](_0x4b1724);}}),router[a0_0xaa0a2f(0x16f)]('/view/:id',auth,async(_0x4d04b0,_0x86df34)=>{var _0x357a8d=a0_0xaa0a2f;try{const {username:_0x27ebf6,email:_0x2ecd58,role:_0x3c27eb}=_0x4d04b0[_0x357a8d(0x13c)],_0x4cf5ac=_0x4d04b0[_0x357a8d(0x13c)],_0x5288f0=await profile[_0x357a8d(0x109)]({'email':_0x4cf5ac[_0x357a8d(0x11c)]}),_0x3a482e=await product['find']({}),_0x527959=await master_shop['find']();console[_0x357a8d(0x130)](_0x357a8d(0x170),_0x527959),console['log'](_0x4d04b0[_0x357a8d(0x169)]);const _0xbff2de=_0x4d04b0[_0x357a8d(0x173)]['id'],_0x501bf8=await purchases_return[_0x357a8d(0x13b)](_0xbff2de);console['log'](_0x501bf8);const _0x91ce1c=await warehouse[_0x357a8d(0x105)]([{'$match':{'name':_0x501bf8['warehouse_name'],'room':_0x501bf8['room']}},{'$unwind':_0x357a8d(0x118)},{'$group':{'_id':_0x357a8d(0x172),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x357a8d(0x139)},'bay':{'$first':_0x357a8d(0x143)},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x357a8d(0x138)},'floorlevel':{'$first':_0x357a8d(0x171)},'primary_code':{'$first':_0x357a8d(0x14e)},'secondary_code':{'$first':_0x357a8d(0x16a)},'product_code':{'$first':_0x357a8d(0x12e)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x357a8d(0x157)}}}]);warehouse_data=await warehouse[_0x357a8d(0x105)]([{'$match':{'status':_0x357a8d(0x101),'name':_0x357a8d(0x13e),'warehouse_category':'Raw\x20Materials'}},{'$group':{'_id':_0x357a8d(0x164),'name':{'$first':_0x357a8d(0x164)}}},{'$sort':{'name':0x1}}]),console[_0x357a8d(0x130)]('stock_data',_0x91ce1c);if(_0x527959[0x0][_0x357a8d(0x140)]==_0x357a8d(0x16c)){var _0x3508a7=users[_0x357a8d(0xff)];console[_0x357a8d(0x130)](_0x3508a7);}else{if(_0x527959[0x0][_0x357a8d(0x140)]==_0x357a8d(0x136))var _0x3508a7=users[_0x357a8d(0x136)];else{if(_0x527959[0x0][_0x357a8d(0x140)]==_0x357a8d(0x178))var _0x3508a7=users['German'];else{if(_0x527959[0x0][_0x357a8d(0x140)]==_0x357a8d(0x133))var _0x3508a7=users['Spanish'];else{if(_0x527959[0x0][_0x357a8d(0x140)]==_0x357a8d(0x120))var _0x3508a7=users[_0x357a8d(0x120)];else{if(_0x527959[0x0]['language']==_0x357a8d(0x12a))var _0x3508a7=users[_0x357a8d(0x14c)];else{if(_0x527959[0x0][_0x357a8d(0x140)]=='Chinese')var _0x3508a7=users['Chinese'];else{if(_0x527959[0x0][_0x357a8d(0x140)]==_0x357a8d(0x167))var _0x3508a7=users['Arabic'];}}}}}}}_0x86df34[_0x357a8d(0x123)](_0x357a8d(0x137),{'success':_0x4d04b0[_0x357a8d(0x11d)](_0x357a8d(0x149)),'errors':_0x4d04b0[_0x357a8d(0x11d)]('errors'),'role':_0x4cf5ac,'master_shop':_0x527959,'profile':_0x5288f0,'user':_0x501bf8,'stock':_0x91ce1c,'product':_0x3a482e,'language':_0x3508a7,'warehouse':warehouse_data});}catch(_0x154f9b){console[_0x357a8d(0x130)](_0x154f9b);}}),router[a0_0xaa0a2f(0x15e)](a0_0xaa0a2f(0x10b),auth,async(_0x28ae4b,_0x4b6670)=>{var _0x4a7625=a0_0xaa0a2f;try{const _0x725f1b=_0x28ae4b[_0x4a7625(0x173)]['id'];console[_0x4a7625(0x130)](_0x725f1b);const _0x2f52d5=await purchases_return[_0x4a7625(0x109)]({'invoice':_0x28ae4b['body']['invoice']});console[_0x4a7625(0x130)](_0x4a7625(0x16d),_0x2f52d5);const _0x25ab7c=await warehouse['findOne']({'name':_0x2f52d5[_0x4a7625(0x114)],'room':_0x2f52d5[_0x4a7625(0x135)]});console[_0x4a7625(0x130)]('old_warehouse_data',_0x25ab7c);const {invoice:_0x2006d9,suppliers:_0x12645f,date:_0x3540b1,warehouse_name:_0x1bef44,product_name:_0x5c6ff1,purchase_quantity:_0x562171,stocks:_0x22cc98,return_qty:_0x29b167,note:_0x197ea8,Room_name:_0x559422,level:_0x25d88f,isle:_0x6461ba,pallet:_0x377ade,to_warehouse_name:_0x350808,to_Room_name:_0x41232e}=_0x28ae4b[_0x4a7625(0x169)];if(typeof _0x5c6ff1=='string')var _0x22b478=[_0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x10a)]],_0x4e7fd8=[_0x28ae4b['body']['purchase_quantity']],_0x98f876=[_0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x162)]],_0x2d156c=[_0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x155)]],_0x4d9675=[_0x28ae4b['body'][_0x4a7625(0x115)]],_0x5a2c3c=[_0x28ae4b['body'][_0x4a7625(0x11b)]],_0x228274=[_0x28ae4b['body'][_0x4a7625(0x144)]],_0x1a9ef4=[_0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x161)]],_0x15d641=[_0x28ae4b['body'][_0x4a7625(0xfd)]],_0x484c32=[_0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x12f)]],_0x51fcf2=[_0x28ae4b[_0x4a7625(0x169)]['secondary_code_hide']];else var _0x22b478=[..._0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x10a)]],_0x4e7fd8=[..._0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x141)]],_0x98f876=[..._0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x162)]],_0x2d156c=[..._0x28ae4b['body']['return_qty']],_0x4d9675=[..._0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x115)]],_0x5a2c3c=[..._0x28ae4b['body'][_0x4a7625(0x11b)]],_0x228274=[..._0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x144)]],_0x15d641=[..._0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0xfd)]],_0x484c32=[..._0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x12f)]],_0x51fcf2=[..._0x28ae4b[_0x4a7625(0x169)]['secondary_code_hide']],_0x1a9ef4=[..._0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x161)]];const _0x872a92=_0x22b478[_0x4a7625(0x116)](_0x2cfee4=>{return _0x2cfee4={'product_name':_0x2cfee4};});_0x4e7fd8['forEach']((_0x2287e9,_0x5207a)=>{var _0x4e1c0f=_0x4a7625;_0x872a92[_0x5207a][_0x4e1c0f(0x141)]=_0x2287e9;}),_0x98f876['forEach']((_0x461084,_0x55a003)=>{var _0x422454=_0x4a7625;_0x872a92[_0x55a003][_0x422454(0x124)]=_0x461084;}),_0x2d156c[_0x4a7625(0x154)]((_0x220e54,_0x121968)=>{_0x872a92[_0x121968]['return_qty']=_0x220e54;}),_0x4d9675[_0x4a7625(0x154)]((_0x5eaf80,_0x796f59)=>{var _0x36c9bb=_0x4a7625;_0x872a92[_0x796f59][_0x36c9bb(0xf7)]=_0x5eaf80;}),_0x5a2c3c[_0x4a7625(0x154)]((_0x37519c,_0x59bf09)=>{_0x872a92[_0x59bf09]['bin']=_0x37519c;}),_0x228274[_0x4a7625(0x154)]((_0x3e611a,_0x1a5fc7)=>{var _0x4be703=_0x4a7625;_0x872a92[_0x1a5fc7][_0x4be703(0x158)]=_0x3e611a;}),_0x15d641[_0x4a7625(0x154)]((_0x48c8b6,_0x451efa)=>{var _0x4457c9=_0x4a7625;_0x872a92[_0x451efa][_0x4457c9(0xf8)]=_0x48c8b6;}),_0x484c32[_0x4a7625(0x154)]((_0x3600e8,_0x4f2d1d)=>{_0x872a92[_0x4f2d1d]['primary_code']=_0x3600e8;}),_0x51fcf2[_0x4a7625(0x154)]((_0x3a6cfb,_0x348a77)=>{_0x872a92[_0x348a77]['secondary_code']=_0x3a6cfb;}),_0x1a9ef4[_0x4a7625(0x154)]((_0xb5d3d0,_0x3d2292)=>{var _0x2b1817=_0x4a7625;_0x872a92[_0x3d2292][_0x2b1817(0x132)]=_0xb5d3d0;});var _0x1d7f6e=0x0;_0x872a92[_0x4a7625(0x154)](_0x3c88f0=>{var _0xa47b85=_0x4a7625;console[_0xa47b85(0x130)](_0xa47b85(0x10c),_0x3c88f0),(parseInt(_0x3c88f0[_0xa47b85(0x141)])<parseInt(_0x3c88f0[_0xa47b85(0x155)])||parseInt(_0x3c88f0[_0xa47b85(0x124)])<parseInt(_0x3c88f0[_0xa47b85(0x155)])||parseInt(_0x3c88f0[_0xa47b85(0x155)])==0x0)&&_0x1d7f6e++;});if(_0x1d7f6e!=0x0)return _0x28ae4b[_0x4a7625(0x11d)]('errors',_0x4a7625(0x159)),_0x4b6670[_0x4a7625(0x128)](_0x4a7625(0x156));_0x2f52d5['return_product'][_0x4a7625(0x154)](_0x59340b=>{const _0x446f54=_0x25ab7c['product_details']['map'](_0x3159d8=>{var _0x5c2cea=a0_0x6c5b;_0x3159d8[_0x5c2cea(0x10a)]==_0x59340b[_0x5c2cea(0x10a)]&&_0x3159d8['floorlevel']==_0x59340b[_0x5c2cea(0x158)]&&_0x3159d8[_0x5c2cea(0x132)]==_0x59340b[_0x5c2cea(0x132)]&&_0x3159d8[_0x5c2cea(0x111)]==_0x59340b[_0x5c2cea(0x111)]&&_0x3159d8['bay']==_0x59340b[_0x5c2cea(0xf7)]&&(_0x3159d8[_0x5c2cea(0x10e)]=parseInt(_0x3159d8['product_stock'])+parseInt(_0x59340b[_0x5c2cea(0x155)]));});}),console[_0x4a7625(0x130)](_0x4a7625(0x126),_0x25ab7c),await _0x25ab7c[_0x4a7625(0x119)](),_0x2f52d5[_0x4a7625(0x176)]=_0x2006d9,_0x2f52d5[_0x4a7625(0x13d)]=_0x12645f,_0x2f52d5[_0x4a7625(0x108)]=_0x3540b1,_0x2f52d5['warehouse_name']=_0x1bef44,_0x2f52d5['return_product']=_0x872a92,_0x2f52d5[_0x4a7625(0x112)]=_0x197ea8,_0x2f52d5[_0x4a7625(0xfa)]=_0x559422,_0x2f52d5[_0x4a7625(0x114)]=_0x350808,_0x2f52d5[_0x4a7625(0x135)]=_0x41232e;const _0x40b59f=await _0x2f52d5[_0x4a7625(0x119)](),_0x186a04=await purchases_return['findOne']({'invoice':_0x28ae4b['body'][_0x4a7625(0x176)]}),_0x54c1f4=await warehouse[_0x4a7625(0x109)]({'name':_0x28ae4b['body'][_0x4a7625(0x114)],'room':_0x28ae4b[_0x4a7625(0x169)][_0x4a7625(0x117)]});_0x186a04[_0x4a7625(0x160)][_0x4a7625(0x154)](_0x1e2bd1=>{var _0x793692=_0x4a7625;_0x54c1f4['product_details'][_0x793692(0x116)](_0xf1ea78=>{var _0x5cf412=_0x793692;_0xf1ea78[_0x5cf412(0x10a)]==_0x1e2bd1[_0x5cf412(0x10a)]&&_0xf1ea78['pallet']==_0x1e2bd1[_0x5cf412(0x144)]&&(_0xf1ea78[_0x5cf412(0x10e)]=parseInt(_0xf1ea78['product_stock'])-parseInt(_0x1e2bd1['return_qty']),console[_0x5cf412(0x130)](_0x5cf412(0x15c),_0x1e2bd1[_0x5cf412(0x155)]));});}),console['log'](_0x4a7625(0x147),_0x54c1f4),await _0x54c1f4[_0x4a7625(0x119)]();const _0x156852=await s_payment_data['findOne']({'invoice':_0x28ae4b['body'][_0x4a7625(0x176)],'reason':_0x4a7625(0x175)});await _0x156852['save'](),_0x28ae4b['flash'](_0x4a7625(0x149),_0x4a7625(0x13f)),_0x4b6670['redirect'](_0x4a7625(0x12c));}catch(_0x3802e8){console[_0x4a7625(0x130)](_0x3802e8),_0x4b6670[_0x4a7625(0x153)](0xc8)[_0x4a7625(0x14b)]({'message':_0x3802e8[_0x4a7625(0xfb)]});}}),router['get'](a0_0xaa0a2f(0x127),auth,async(_0x6f67b5,_0x52c106)=>{var _0x392dad=a0_0xaa0a2f;try{const {username:_0x5b5f0f,email:_0x492bc9,role:_0x1b27a6}=_0x6f67b5['user'],_0x58fb61=_0x6f67b5[_0x392dad(0x13c)],_0x592dc7=await profile[_0x392dad(0x109)]({'email':_0x58fb61[_0x392dad(0x11c)]}),_0x4888e4=await master_shop[_0x392dad(0x122)]();console[_0x392dad(0x130)](_0x392dad(0x170),_0x4888e4);const _0x53d387=_0x6f67b5[_0x392dad(0x173)]['id'],_0x36da42=await purchases_return[_0x392dad(0x13b)](_0x53d387);console[_0x392dad(0x130)](_0x36da42);const _0x273b6e=await suppliers['findOne']({'name':_0x36da42[_0x392dad(0x13d)]});console[_0x392dad(0x130)](_0x273b6e);if(_0x4888e4[0x0][_0x392dad(0x140)]==_0x392dad(0x16c)){var _0x107b94=users['English'];console['log'](_0x107b94);}else{if(_0x4888e4[0x0][_0x392dad(0x140)]==_0x392dad(0x136))var _0x107b94=users[_0x392dad(0x136)];else{if(_0x4888e4[0x0][_0x392dad(0x140)]=='German')var _0x107b94=users[_0x392dad(0x178)];else{if(_0x4888e4[0x0][_0x392dad(0x140)]=='Spanish')var _0x107b94=users[_0x392dad(0x133)];else{if(_0x4888e4[0x0][_0x392dad(0x140)]=='French')var _0x107b94=users['French'];else{if(_0x4888e4[0x0][_0x392dad(0x140)]==_0x392dad(0x12a))var _0x107b94=users['Portuguese'];else{if(_0x4888e4[0x0][_0x392dad(0x140)]==_0x392dad(0x163))var _0x107b94=users[_0x392dad(0x163)];else{if(_0x4888e4[0x0][_0x392dad(0x140)]=='Arabic\x20(ae)')var _0x107b94=users[_0x392dad(0xfe)];}}}}}}}_0x52c106[_0x392dad(0x123)]('return_purchase_invoice',{'success':_0x6f67b5[_0x392dad(0x11d)]('success'),'errors':_0x6f67b5[_0x392dad(0x11d)](_0x392dad(0x151)),'role':_0x58fb61,'profile':_0x592dc7,'master_shop':_0x4888e4,'supplier':_0x273b6e,'purchase':_0x36da42,'language':_0x107b94});}catch(_0x2d0c18){console[_0x392dad(0x130)](_0x2d0c18);}}),router[a0_0xaa0a2f(0x15e)](a0_0xaa0a2f(0x11a),auth,async(_0x4a6849,_0x43bf20)=>{var _0x3c318f=a0_0xaa0a2f;try{const _0x2851be=_0x4a6849[_0x3c318f(0x173)]['id'],{invoice:_0x108a2d,suppliers:_0x5f10de,receivable_amount:_0x92a0aa,received_amount:_0x36150b}=_0x4a6849[_0x3c318f(0x169)],_0x5dc658=await purchases_return[_0x3c318f(0x13b)](_0x2851be);console[_0x3c318f(0x130)](_0x5dc658);var _0x3cafb8=_0x92a0aa-_0x36150b;console[_0x3c318f(0x130)](_0x36150b),_0x5dc658[_0x3c318f(0x152)]=parseFloat(_0x36150b)+parseFloat(_0x5dc658[_0x3c318f(0x152)]),_0x5dc658['due_amount']=_0x3cafb8,console['log'](_0x5dc658);const _0x4c348f=await _0x5dc658[_0x3c318f(0x119)](),_0x765f92=await s_payment_data['findOne']({'invoice':_0x4a6849[_0x3c318f(0x169)]['invoice'],'reason':_0x3c318f(0x175)});_0x765f92['amount']=_0x3cafb8,await _0x765f92[_0x3c318f(0x119)]();let _0x3ee268=new Date(),_0x2161e9=('0'+_0x3ee268['getDate']())[_0x3c318f(0x16e)](-0x2),_0x247cc5=('0'+(_0x3ee268[_0x3c318f(0x165)]()+0x1))['slice'](-0x2),_0x232f1d=_0x3ee268[_0x3c318f(0x11f)](),_0x4a3783=_0x232f1d+'-'+_0x247cc5+'-'+_0x2161e9;const _0x59f091=new suppliers_payment({'invoice':_0x108a2d,'date':_0x232f1d+'-'+_0x247cc5+'-'+_0x2161e9,'suppliers':_0x5f10de,'reason':_0x3c318f(0x16b),'amount':_0x36150b}),_0x42422a=await _0x59f091['save']();_0x4a6849[_0x3c318f(0x11d)](_0x3c318f(0x149),'payment\x20successfull'),_0x43bf20[_0x3c318f(0x128)](_0x3c318f(0x12c));}catch(_0x3f7191){console[_0x3c318f(0x130)](_0x3f7191);}}),module[a0_0xaa0a2f(0x14d)]=router;