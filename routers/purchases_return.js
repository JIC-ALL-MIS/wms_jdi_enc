var a0_0x18180e=a0_0x1edc;function a0_0x1edc(_0x5740e3,_0x2eeeb6){var _0x2b64d7=a0_0x2b64();return a0_0x1edc=function(_0x1edcb9,_0x53b478){_0x1edcb9=_0x1edcb9-0xcc;var _0x1aaf17=_0x2b64d7[_0x1edcb9];return _0x1aaf17;},a0_0x1edc(_0x5740e3,_0x2eeeb6);}function a0_0x2b64(){var _0x20c9da=['Raw\x20Materials','/purchases_return/view','return_purchase_edit','level','$return_product','body','Chinese','../models/all_models','Router','exports','$product_details.rack','invoice','Spanish','errors','success','type','return_purchase_invoice','$name','$product_details.product_name','$return_product.product_name','express','received','../public/language/languages.json','$supplier_docs','$date','forEach','getMonth','save','find','$warehouse_name','flash','date','$suppliers','render','user','1158AuhwsB','English','English\x20(US)','getFullYear','secondary_code_hide','4595KyPhKX','/invoice/:id','slice','French','amount','Portuguese','map','purchase\x20return\x20successfully','product_stock','return_product','getDate','post','Must\x20not\x20be\x20greater\x20than\x20Purchase/Stock\x20Qty','$invoice','primary_code','$product_details.type','Portuguese\x20(BR)','language','20712UyyBjT','$product_details','params','$receivable','isle','json','Enabled','back','final','$total_amount','$_id','Purchase\x20Return','email','Received\x20For\x20Purchase\x20Return','redirect','stocks','product_code','3mrHhVj','$product_details.product_stock','$return_product.total','$supplier_docs.address','floorlevel','../middleware/auth','note','/view','76rgLXIH','product_details.return_qtyproduct_details.return_qty','3603193vfFpPj','findById','/receive_payment/:id','status','7HjPXaa','product_code_hide','log','purchase_quantity','primary_code_hide','bin','$product_details.storage','due_amount','aggregate','/view/:id','warehouse_name','$return_product.price','old_data','get','12850500fbcFiM','old_warehouse_data','$supplier_docs.mobile','product_details','message','Arabic\x20(ae)','$note','pallet','master','3120080JlnXqv','suppliers','string','findOne','Hindi','bay','to_room','return_qty','$return_product.return_qty','270418pBLxje','German','10HufJxT','5746239FIFCRT','to_warehouse_name','$discount','$received','product_name','$product_details.secondary_code','secondary_code','supplier_docs','$due_amount','Arabic','stock_quantity','$product_details._id','name'];a0_0x2b64=function(){return _0x20c9da;};return a0_0x2b64();}(function(_0xc29cc5,_0x43e55a){var _0x44d98e=a0_0x1edc,_0x96449c=_0xc29cc5();while(!![]){try{var _0x626808=parseInt(_0x44d98e(0x106))/0x1*(parseInt(_0x44d98e(0x134))/0x2)+parseInt(_0x44d98e(0xf5))/0x3*(parseInt(_0x44d98e(0x10e))/0x4)+parseInt(_0x44d98e(0xe3))/0x5*(parseInt(_0x44d98e(0xde))/0x6)+parseInt(_0x44d98e(0x114))/0x7*(parseInt(_0x44d98e(0x12b))/0x8)+-parseInt(_0x44d98e(0x137))/0x9*(-parseInt(_0x44d98e(0x136))/0xa)+-parseInt(_0x44d98e(0x110))/0xb+-parseInt(_0x44d98e(0x122))/0xc;if(_0x626808===_0x43e55a)break;else _0x96449c['push'](_0x96449c['shift']());}catch(_0x1e4df8){_0x96449c['push'](_0x96449c['shift']());}}}(a0_0x2b64,0x54095));const express=require(a0_0x18180e(0xcf)),app=express(),router=express[a0_0x18180e(0x14c)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,suppliers_payment,s_payment_data}=require(a0_0x18180e(0x14b)),auth=require(a0_0x18180e(0x10b)),users=require(a0_0x18180e(0xd1));router[a0_0x18180e(0x121)](a0_0x18180e(0x10d),auth,async(_0x5a967f,_0x1b8a43)=>{var _0x38a46c=a0_0x18180e;try{const {username:_0x38ea9a,email:_0x386e4f,role:_0x410a3c}=_0x5a967f[_0x38a46c(0xdd)],_0x88d1b0=_0x5a967f['user'],_0x9d5088=await profile['findOne']({'email':_0x88d1b0['email']}),_0x173cbe=await master_shop[_0x38a46c(0xd7)]();console[_0x38a46c(0x116)](_0x38a46c(0x12a),_0x173cbe);const _0x40d5c8=await purchases_return[_0x38a46c(0x11c)]([{'$lookup':{'from':_0x38a46c(0x12c),'localField':'suppliers','foreignField':_0x38a46c(0x143),'as':_0x38a46c(0x13e)}},{'$unwind':_0x38a46c(0x148)},{'$unwind':_0x38a46c(0xd2)},{'$group':{'_id':_0x38a46c(0xff),'invoice':{'$first':_0x38a46c(0xf0)},'date':{'$first':_0x38a46c(0xd3)},'suppliers':{'$first':_0x38a46c(0xdb)},'warehouse_name':{'$first':_0x38a46c(0xd8)},'product_name':{'$first':_0x38a46c(0xce)},'return_qty':{'$first':'$return_product.return_qty'},'price':{'$first':_0x38a46c(0x11f)},'total':{'$sum':_0x38a46c(0x108)},'note':{'$first':_0x38a46c(0x128)},'total_amount':{'$first':_0x38a46c(0xfe)},'discount':{'$first':_0x38a46c(0x139)},'receivable':{'$first':_0x38a46c(0xf8)},'received':{'$first':_0x38a46c(0x13a)},'due_amount':{'$first':_0x38a46c(0x13f)},'mobile':{'$first':_0x38a46c(0x124)},'email':{'$first':'$supplier_docs.email'},'address':{'$first':_0x38a46c(0x109)},'return_sum_qty':{'$sum':_0x38a46c(0x133)}}}]);console['log'](_0x40d5c8);if(_0x173cbe[0x0][_0x38a46c(0xf4)]==_0x38a46c(0xe0)){var _0x593eed=users[_0x38a46c(0xdf)];console[_0x38a46c(0x116)](_0x593eed);}else{if(_0x173cbe[0x0]['language']==_0x38a46c(0x12f))var _0x593eed=users[_0x38a46c(0x12f)];else{if(_0x173cbe[0x0][_0x38a46c(0xf4)]==_0x38a46c(0x135))var _0x593eed=users[_0x38a46c(0x135)];else{if(_0x173cbe[0x0][_0x38a46c(0xf4)]==_0x38a46c(0x150))var _0x593eed=users[_0x38a46c(0x150)];else{if(_0x173cbe[0x0]['language']=='French')var _0x593eed=users[_0x38a46c(0xe6)];else{if(_0x173cbe[0x0][_0x38a46c(0xf4)]==_0x38a46c(0xf3))var _0x593eed=users[_0x38a46c(0xe8)];else{if(_0x173cbe[0x0][_0x38a46c(0xf4)]==_0x38a46c(0x14a))var _0x593eed=users[_0x38a46c(0x14a)];else{if(_0x173cbe[0x0][_0x38a46c(0xf4)]==_0x38a46c(0x127))var _0x593eed=users[_0x38a46c(0x140)];}}}}}}}_0x1b8a43['render']('purchases_return',{'success':_0x5a967f[_0x38a46c(0xd9)](_0x38a46c(0x152)),'errors':_0x5a967f['flash'](_0x38a46c(0x151)),'role':_0x88d1b0,'profile':_0x9d5088,'master_shop':_0x173cbe,'user':_0x40d5c8,'language':_0x593eed});}catch(_0x4b2b0a){console[_0x38a46c(0x116)](_0x4b2b0a);}}),router[a0_0x18180e(0x121)]('/view/:id',auth,async(_0x30b57d,_0x3a51fc)=>{var _0x45e6a6=a0_0x18180e;try{const {username:_0x382ea5,email:_0x5f547a,role:_0x374986}=_0x30b57d['user'],_0x2bec1f=_0x30b57d[_0x45e6a6(0xdd)],_0x50282c=await profile[_0x45e6a6(0x12e)]({'email':_0x2bec1f[_0x45e6a6(0x101)]}),_0x192f46=await product[_0x45e6a6(0xd7)]({}),_0x550ae1=await master_shop[_0x45e6a6(0xd7)]();console[_0x45e6a6(0x116)]('master',_0x550ae1),console['log'](_0x30b57d[_0x45e6a6(0x149)]);const _0x17b183=_0x30b57d['params']['id'],_0x519b1d=await purchases_return[_0x45e6a6(0x111)](_0x17b183);console[_0x45e6a6(0x116)](_0x519b1d);const _0x4598d9=await warehouse['aggregate']([{'$match':{'name':_0x519b1d[_0x45e6a6(0x11e)],'room':_0x519b1d['room']}},{'$unwind':_0x45e6a6(0xf6)},{'$group':{'_id':_0x45e6a6(0x142),'name':{'$first':_0x45e6a6(0xcd)},'product_stock':{'$first':_0x45e6a6(0x107)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':'$product_details.bin'},'type':{'$first':_0x45e6a6(0xf2)},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x45e6a6(0x13c)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x45e6a6(0x11a)},'rack':{'$first':_0x45e6a6(0x14e)}}}]);warehouse_data=await warehouse[_0x45e6a6(0x11c)]([{'$match':{'status':_0x45e6a6(0xfb),'name':'Return\x20Goods','warehouse_category':_0x45e6a6(0x144)}},{'$group':{'_id':_0x45e6a6(0xcc),'name':{'$first':_0x45e6a6(0xcc)}}},{'$sort':{'name':0x1}}]),console[_0x45e6a6(0x116)]('stock_data',_0x4598d9);if(_0x550ae1[0x0]['language']=='English\x20(US)'){var _0x26c17d=users[_0x45e6a6(0xdf)];console['log'](_0x26c17d);}else{if(_0x550ae1[0x0][_0x45e6a6(0xf4)]==_0x45e6a6(0x12f))var _0x26c17d=users[_0x45e6a6(0x12f)];else{if(_0x550ae1[0x0][_0x45e6a6(0xf4)]==_0x45e6a6(0x135))var _0x26c17d=users[_0x45e6a6(0x135)];else{if(_0x550ae1[0x0][_0x45e6a6(0xf4)]=='Spanish')var _0x26c17d=users[_0x45e6a6(0x150)];else{if(_0x550ae1[0x0][_0x45e6a6(0xf4)]=='French')var _0x26c17d=users['French'];else{if(_0x550ae1[0x0][_0x45e6a6(0xf4)]==_0x45e6a6(0xf3))var _0x26c17d=users[_0x45e6a6(0xe8)];else{if(_0x550ae1[0x0]['language']==_0x45e6a6(0x14a))var _0x26c17d=users['Chinese'];else{if(_0x550ae1[0x0]['language']==_0x45e6a6(0x127))var _0x26c17d=users[_0x45e6a6(0x140)];}}}}}}}_0x3a51fc[_0x45e6a6(0xdc)](_0x45e6a6(0x146),{'success':_0x30b57d[_0x45e6a6(0xd9)](_0x45e6a6(0x152)),'errors':_0x30b57d[_0x45e6a6(0xd9)](_0x45e6a6(0x151)),'role':_0x2bec1f,'master_shop':_0x550ae1,'profile':_0x50282c,'user':_0x519b1d,'stock':_0x4598d9,'product':_0x192f46,'language':_0x26c17d,'warehouse':warehouse_data});}catch(_0x28bea2){console[_0x45e6a6(0x116)](_0x28bea2);}}),router[a0_0x18180e(0xee)](a0_0x18180e(0x11d),auth,async(_0xc7cb5,_0xb4966d)=>{var _0x2b03f8=a0_0x18180e;try{const _0x581bc9=_0xc7cb5[_0x2b03f8(0xf7)]['id'];console[_0x2b03f8(0x116)](_0x581bc9);const _0x346212=await purchases_return[_0x2b03f8(0x12e)]({'invoice':_0xc7cb5['body'][_0x2b03f8(0x14f)]});console[_0x2b03f8(0x116)](_0x2b03f8(0x120),_0x346212);const _0x392191=await warehouse[_0x2b03f8(0x12e)]({'name':_0x346212['to_warehouse_name'],'room':_0x346212[_0x2b03f8(0x131)]});console[_0x2b03f8(0x116)]('old_warehouse_data',_0x392191);const {invoice:_0x27147e,suppliers:_0x341665,date:_0x2dbd7f,warehouse_name:_0x482d0f,product_name:_0x28483c,purchase_quantity:_0x3f7046,stocks:_0x99daa5,return_qty:_0x3fa647,note:_0x24b940,Room_name:_0x41d0a4,level:_0x5c607a,isle:_0x5a22ab,pallet:_0xf60486,to_warehouse_name:_0x136346,to_Room_name:_0x1b6a2f}=_0xc7cb5[_0x2b03f8(0x149)];if(typeof _0x28483c==_0x2b03f8(0x12d))var _0x188a11=[_0xc7cb5[_0x2b03f8(0x149)]['product_name']],_0xb42deb=[_0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x117)]],_0x35ee0c=[_0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x104)]],_0x2a77f5=[_0xc7cb5[_0x2b03f8(0x149)]['return_qty']],_0xd8b2e6=[_0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x147)]],_0x404ddd=[_0xc7cb5[_0x2b03f8(0x149)]['isle']],_0x2a0a7e=[_0xc7cb5[_0x2b03f8(0x149)]['pallet']],_0x5bc9ad=[_0xc7cb5[_0x2b03f8(0x149)]['types']],_0x18d927=[_0xc7cb5['body'][_0x2b03f8(0x115)]],_0x4b69ee=[_0xc7cb5['body']['primary_code_hide']],_0x4fcbd9=[_0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0xe2)]];else var _0x188a11=[..._0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x13b)]],_0xb42deb=[..._0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x117)]],_0x35ee0c=[..._0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x104)]],_0x2a77f5=[..._0xc7cb5['body'][_0x2b03f8(0x132)]],_0xd8b2e6=[..._0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x147)]],_0x404ddd=[..._0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0xf9)]],_0x2a0a7e=[..._0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x129)]],_0x18d927=[..._0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x115)]],_0x4b69ee=[..._0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x118)]],_0x4fcbd9=[..._0xc7cb5['body'][_0x2b03f8(0xe2)]],_0x5bc9ad=[..._0xc7cb5[_0x2b03f8(0x149)]['types']];const _0x2ed4e6=_0x188a11[_0x2b03f8(0xe9)](_0x18c747=>{return _0x18c747={'product_name':_0x18c747};});_0xb42deb[_0x2b03f8(0xd4)]((_0x4c4f35,_0x93dd2a)=>{_0x2ed4e6[_0x93dd2a]['purchase_quantity']=_0x4c4f35;}),_0x35ee0c[_0x2b03f8(0xd4)]((_0x251072,_0x2600b6)=>{var _0x352fde=_0x2b03f8;_0x2ed4e6[_0x2600b6][_0x352fde(0x141)]=_0x251072;}),_0x2a77f5[_0x2b03f8(0xd4)]((_0x340fad,_0x5b974a)=>{var _0x5cd009=_0x2b03f8;_0x2ed4e6[_0x5b974a][_0x5cd009(0x132)]=_0x340fad;}),_0xd8b2e6[_0x2b03f8(0xd4)]((_0x5cc53d,_0x37f530)=>{_0x2ed4e6[_0x37f530]['bay']=_0x5cc53d;}),_0x404ddd[_0x2b03f8(0xd4)]((_0x4613b2,_0x3f8b0d)=>{_0x2ed4e6[_0x3f8b0d]['bin']=_0x4613b2;}),_0x2a0a7e[_0x2b03f8(0xd4)]((_0x11123f,_0x44060c)=>{var _0x5e9d55=_0x2b03f8;_0x2ed4e6[_0x44060c][_0x5e9d55(0x10a)]=_0x11123f;}),_0x18d927['forEach']((_0x1db8ea,_0x290ec7)=>{var _0x4fbaf1=_0x2b03f8;_0x2ed4e6[_0x290ec7][_0x4fbaf1(0x105)]=_0x1db8ea;}),_0x4b69ee[_0x2b03f8(0xd4)]((_0x7255a0,_0x458e4b)=>{var _0x143fe4=_0x2b03f8;_0x2ed4e6[_0x458e4b][_0x143fe4(0xf1)]=_0x7255a0;}),_0x4fcbd9[_0x2b03f8(0xd4)]((_0x2ad53f,_0x4d352c)=>{var _0x5511a7=_0x2b03f8;_0x2ed4e6[_0x4d352c][_0x5511a7(0x13d)]=_0x2ad53f;}),_0x5bc9ad[_0x2b03f8(0xd4)]((_0x37a872,_0x89aacc)=>{var _0x87e7b6=_0x2b03f8;_0x2ed4e6[_0x89aacc][_0x87e7b6(0x153)]=_0x37a872;});var _0x496d74=0x0;_0x2ed4e6[_0x2b03f8(0xd4)](_0x5eff1b=>{var _0x7eb005=_0x2b03f8;console['log']('foreach\x20newproduct',_0x5eff1b),(parseInt(_0x5eff1b['purchase_quantity'])<parseInt(_0x5eff1b['return_qty'])||parseInt(_0x5eff1b[_0x7eb005(0x141)])<parseInt(_0x5eff1b[_0x7eb005(0x132)])||parseInt(_0x5eff1b[_0x7eb005(0x132)])==0x0)&&_0x496d74++;});if(_0x496d74!=0x0)return _0xc7cb5['flash'](_0x2b03f8(0x151),_0x2b03f8(0xef)),_0xb4966d[_0x2b03f8(0x103)](_0x2b03f8(0xfc));_0x346212[_0x2b03f8(0xec)][_0x2b03f8(0xd4)](_0x4f1c90=>{var _0x3594a3=_0x2b03f8;const _0x545041=_0x392191[_0x3594a3(0x125)][_0x3594a3(0xe9)](_0x5a4180=>{var _0x5d281a=_0x3594a3;_0x5a4180[_0x5d281a(0x13b)]==_0x4f1c90[_0x5d281a(0x13b)]&&_0x5a4180[_0x5d281a(0x10a)]==_0x4f1c90[_0x5d281a(0x10a)]&&_0x5a4180[_0x5d281a(0x153)]==_0x4f1c90[_0x5d281a(0x153)]&&_0x5a4180['bin']==_0x4f1c90[_0x5d281a(0x119)]&&_0x5a4180[_0x5d281a(0x130)]==_0x4f1c90['bay']&&(_0x5a4180[_0x5d281a(0xeb)]=parseInt(_0x5a4180['product_stock'])+parseInt(_0x4f1c90[_0x5d281a(0x132)]));});}),console[_0x2b03f8(0x116)](_0x2b03f8(0x123),_0x392191),await _0x392191[_0x2b03f8(0xd6)](),_0x346212[_0x2b03f8(0x14f)]=_0x27147e,_0x346212[_0x2b03f8(0x12c)]=_0x341665,_0x346212[_0x2b03f8(0xda)]=_0x2dbd7f,_0x346212[_0x2b03f8(0x11e)]=_0x482d0f,_0x346212[_0x2b03f8(0xec)]=_0x2ed4e6,_0x346212[_0x2b03f8(0x10c)]=_0x24b940,_0x346212['room']=_0x41d0a4,_0x346212[_0x2b03f8(0x138)]=_0x136346,_0x346212[_0x2b03f8(0x131)]=_0x1b6a2f;const _0x5dcea3=await _0x346212[_0x2b03f8(0xd6)](),_0x2ea294=await purchases_return['findOne']({'invoice':_0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x14f)]}),_0x18cc40=await warehouse['findOne']({'name':_0xc7cb5['body']['to_warehouse_name'],'room':_0xc7cb5[_0x2b03f8(0x149)]['to_Room_name']});_0x2ea294['return_product']['forEach'](_0x23afc4=>{var _0x1280cf=_0x2b03f8;_0x18cc40[_0x1280cf(0x125)]['map'](_0x20b1eb=>{var _0x30b9b3=_0x1280cf;_0x20b1eb[_0x30b9b3(0x13b)]==_0x23afc4[_0x30b9b3(0x13b)]&&_0x20b1eb[_0x30b9b3(0x129)]==_0x23afc4['pallet']&&(_0x20b1eb[_0x30b9b3(0xeb)]=parseInt(_0x20b1eb['product_stock'])-parseInt(_0x23afc4[_0x30b9b3(0x132)]),console[_0x30b9b3(0x116)](_0x30b9b3(0x10f),_0x23afc4[_0x30b9b3(0x132)]));});}),console['log'](_0x2b03f8(0xfd),_0x18cc40),await _0x18cc40['save']();const _0x42ea66=await s_payment_data['findOne']({'invoice':_0xc7cb5[_0x2b03f8(0x149)][_0x2b03f8(0x14f)],'reason':_0x2b03f8(0x100)});await _0x42ea66[_0x2b03f8(0xd6)](),_0xc7cb5[_0x2b03f8(0xd9)](_0x2b03f8(0x152),_0x2b03f8(0xea)),_0xb4966d[_0x2b03f8(0x103)](_0x2b03f8(0x145));}catch(_0x1541d8){console[_0x2b03f8(0x116)](_0x1541d8),_0xb4966d[_0x2b03f8(0x113)](0xc8)[_0x2b03f8(0xfa)]({'message':_0x1541d8[_0x2b03f8(0x126)]});}}),router[a0_0x18180e(0x121)](a0_0x18180e(0xe4),auth,async(_0x366ba9,_0x5a4a87)=>{var _0x1601f9=a0_0x18180e;try{const {username:_0x37b5ea,email:_0x63cebc,role:_0x39adad}=_0x366ba9[_0x1601f9(0xdd)],_0x19a3eb=_0x366ba9[_0x1601f9(0xdd)],_0x1ae5ea=await profile[_0x1601f9(0x12e)]({'email':_0x19a3eb[_0x1601f9(0x101)]}),_0x5e2dd4=await master_shop[_0x1601f9(0xd7)]();console[_0x1601f9(0x116)](_0x1601f9(0x12a),_0x5e2dd4);const _0x2f4681=_0x366ba9[_0x1601f9(0xf7)]['id'],_0x56c8c1=await purchases_return['findById'](_0x2f4681);console['log'](_0x56c8c1);const _0x4080c4=await suppliers['findOne']({'name':_0x56c8c1[_0x1601f9(0x12c)]});console['log'](_0x4080c4);if(_0x5e2dd4[0x0]['language']=='English\x20(US)'){var _0xf92184=users[_0x1601f9(0xdf)];console['log'](_0xf92184);}else{if(_0x5e2dd4[0x0][_0x1601f9(0xf4)]==_0x1601f9(0x12f))var _0xf92184=users[_0x1601f9(0x12f)];else{if(_0x5e2dd4[0x0][_0x1601f9(0xf4)]==_0x1601f9(0x135))var _0xf92184=users[_0x1601f9(0x135)];else{if(_0x5e2dd4[0x0][_0x1601f9(0xf4)]==_0x1601f9(0x150))var _0xf92184=users[_0x1601f9(0x150)];else{if(_0x5e2dd4[0x0][_0x1601f9(0xf4)]==_0x1601f9(0xe6))var _0xf92184=users[_0x1601f9(0xe6)];else{if(_0x5e2dd4[0x0][_0x1601f9(0xf4)]=='Portuguese\x20(BR)')var _0xf92184=users[_0x1601f9(0xe8)];else{if(_0x5e2dd4[0x0][_0x1601f9(0xf4)]==_0x1601f9(0x14a))var _0xf92184=users[_0x1601f9(0x14a)];else{if(_0x5e2dd4[0x0][_0x1601f9(0xf4)]==_0x1601f9(0x127))var _0xf92184=users['Arabic'];}}}}}}}_0x5a4a87[_0x1601f9(0xdc)](_0x1601f9(0x154),{'success':_0x366ba9[_0x1601f9(0xd9)](_0x1601f9(0x152)),'errors':_0x366ba9[_0x1601f9(0xd9)]('errors'),'role':_0x19a3eb,'profile':_0x1ae5ea,'master_shop':_0x5e2dd4,'supplier':_0x4080c4,'purchase':_0x56c8c1,'language':_0xf92184});}catch(_0x1abc9b){console[_0x1601f9(0x116)](_0x1abc9b);}}),router[a0_0x18180e(0xee)](a0_0x18180e(0x112),auth,async(_0x5c6f08,_0x3be378)=>{var _0x12b4ea=a0_0x18180e;try{const _0x47b8cc=_0x5c6f08[_0x12b4ea(0xf7)]['id'],{invoice:_0x52bde2,suppliers:_0x34d135,receivable_amount:_0x4d7fd0,received_amount:_0xa53bee}=_0x5c6f08[_0x12b4ea(0x149)],_0x4d3037=await purchases_return[_0x12b4ea(0x111)](_0x47b8cc);console[_0x12b4ea(0x116)](_0x4d3037);var _0x12fe3b=_0x4d7fd0-_0xa53bee;console[_0x12b4ea(0x116)](_0xa53bee),_0x4d3037[_0x12b4ea(0xd0)]=parseFloat(_0xa53bee)+parseFloat(_0x4d3037[_0x12b4ea(0xd0)]),_0x4d3037[_0x12b4ea(0x11b)]=_0x12fe3b,console[_0x12b4ea(0x116)](_0x4d3037);const _0x17a9bf=await _0x4d3037['save'](),_0xd2b6b0=await s_payment_data[_0x12b4ea(0x12e)]({'invoice':_0x5c6f08[_0x12b4ea(0x149)][_0x12b4ea(0x14f)],'reason':_0x12b4ea(0x100)});_0xd2b6b0[_0x12b4ea(0xe7)]=_0x12fe3b,await _0xd2b6b0[_0x12b4ea(0xd6)]();let _0x2900c1=new Date(),_0x462221=('0'+_0x2900c1[_0x12b4ea(0xed)]())[_0x12b4ea(0xe5)](-0x2),_0x35daa6=('0'+(_0x2900c1[_0x12b4ea(0xd5)]()+0x1))[_0x12b4ea(0xe5)](-0x2),_0x26fbd0=_0x2900c1[_0x12b4ea(0xe1)](),_0x22cdda=_0x26fbd0+'-'+_0x35daa6+'-'+_0x462221;const _0x388e14=new suppliers_payment({'invoice':_0x52bde2,'date':_0x26fbd0+'-'+_0x35daa6+'-'+_0x462221,'suppliers':_0x34d135,'reason':_0x12b4ea(0x102),'amount':_0xa53bee}),_0x396248=await _0x388e14[_0x12b4ea(0xd6)]();_0x5c6f08[_0x12b4ea(0xd9)](_0x12b4ea(0x152),'payment\x20successfull'),_0x3be378[_0x12b4ea(0x103)]('/purchases_return/view');}catch(_0x11bdba){console['log'](_0x11bdba);}}),module[a0_0x18180e(0x14d)]=router;