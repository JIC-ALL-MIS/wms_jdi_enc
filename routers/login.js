const a0_0x3d4c69=a0_0x2d56;(function(_0x31effd,_0x58ca09){const _0x55a088=a0_0x2d56,_0x47e11f=_0x31effd();while(!![]){try{const _0x8ca2bc=parseInt(_0x55a088(0x1c5))/0x1+parseInt(_0x55a088(0x1b1))/0x2+parseInt(_0x55a088(0x1dc))/0x3*(parseInt(_0x55a088(0x1cc))/0x4)+-parseInt(_0x55a088(0x1bc))/0x5*(parseInt(_0x55a088(0x1c7))/0x6)+parseInt(_0x55a088(0x1b9))/0x7+-parseInt(_0x55a088(0x1b0))/0x8+parseInt(_0x55a088(0x1b8))/0x9*(-parseInt(_0x55a088(0x1c4))/0xa);if(_0x8ca2bc===_0x58ca09)break;else _0x47e11f['push'](_0x47e11f['shift']());}catch(_0x16f9dd){_0x47e11f['push'](_0x47e11f['shift']());}}}(a0_0x11d1,0xb823f));function a0_0x2d56(_0x3927cf,_0xb4b161){const _0x11d190=a0_0x11d1();return a0_0x2d56=function(_0x2d5694,_0x472c95){_0x2d5694=_0x2d5694-0x1a8;let _0x49f59d=_0x11d190[_0x2d5694];return _0x49f59d;},a0_0x2d56(_0x3927cf,_0xb4b161);}const express=require(a0_0x3d4c69(0x1c1)),app=express(),router=express['Router'](),{sing_up,staff,profile,master_shop}=require(a0_0x3d4c69(0x1b2)),bcrypt=require(a0_0x3d4c69(0x1a9)),jwt=require('jsonwebtoken'),auth=require('../middleware/auth');router['get']('/',async(_0x4214cd,_0x21dcee)=>{const _0x29558e=a0_0x3d4c69;try{const _0x1a6758=await master_shop[_0x29558e(0x1ab)]();_0x21dcee[_0x29558e(0x1cb)]('login',{'success':_0x4214cd[_0x29558e(0x1d5)]('success'),'errors':_0x4214cd[_0x29558e(0x1d5)](_0x29558e(0x1ce)),'master_shop':_0x1a6758});}catch(_0x5ece92){console[_0x29558e(0x1bb)](_0x5ece92);}}),router['get'](a0_0x3d4c69(0x1bd),async(_0x295c06,_0x1fead1)=>{const _0x194ad6=a0_0x3d4c69;try{const _0xa82894=await master_shop[_0x194ad6(0x1ab)]();_0x1fead1[_0x194ad6(0x1cb)](_0x194ad6(0x1b5),{'success':_0x295c06[_0x194ad6(0x1d5)](_0x194ad6(0x1ac)),'errors':_0x295c06[_0x194ad6(0x1d5)](_0x194ad6(0x1ce)),'master_shop':_0xa82894});}catch(_0x33ad69){console['log'](_0x33ad69);}}),router[a0_0x3d4c69(0x1d7)]('/login',async(_0x37c9bf,_0x1b3c3f)=>{const _0x4eecd=a0_0x3d4c69;try{const _0x4a5f36=await master_shop[_0x4eecd(0x1ab)]();console['log'](_0x4eecd(0x1db),_0x4a5f36),_0x1b3c3f['render'](_0x4eecd(0x1c9),{'success':_0x37c9bf['flash']('success'),'errors':_0x37c9bf[_0x4eecd(0x1d5)](_0x4eecd(0x1ce)),'master_shop':_0x4a5f36});}catch(_0x46cdc4){console[_0x4eecd(0x1bb)](_0x46cdc4);}}),router['post'](a0_0x3d4c69(0x1d4),async(_0x375411,_0x1b0587)=>{const _0x30027e=a0_0x3d4c69;try{const _0x44d163=_0x375411[_0x30027e(0x1da)][_0x30027e(0x1cf)],_0x429d1d=await sing_up[_0x30027e(0x1ae)]({'email':_0x44d163});if(!_0x429d1d)return _0x375411['flash'](_0x30027e(0x1ce),_0x30027e(0x1c2)),_0x1b0587['redirect']('/login');var _0x592a0f=_0x30027e(0x1cd);if(_0x429d1d['role']==_0x30027e(0x1d1)){const _0x54c5a6=await staff[_0x30027e(0x1ae)]({'name':_0x429d1d[_0x30027e(0x1b7)]});if(_0x54c5a6[_0x30027e(0x1aa)]==_0x30027e(0x1c6))return _0x375411['flash'](_0x30027e(0x1ce),_0x30027e(0x1d9)),_0x1b0587[_0x30027e(0x1a8)](_0x30027e(0x1d4));_0x592a0f=_0x54c5a6['warehouse_category'];}const _0x20d3a0=_0x375411['body']['password'],_0x54ac7e=await bcrypt[_0x30027e(0x1ba)](_0x20d3a0,_0x429d1d[_0x30027e(0x1c3)]);if(_0x54ac7e==![])return _0x375411[_0x30027e(0x1d5)](_0x30027e(0x1ce),_0x30027e(0x1d3)),_0x1b0587[_0x30027e(0x1a8)]('/login');const _0x1eabb3=jwt[_0x30027e(0x1df)]({'username':_0x429d1d[_0x30027e(0x1af)],'email':_0x429d1d[_0x30027e(0x1cf)],'role':_0x429d1d[_0x30027e(0x1d0)],'warehouse_category':_0x592a0f},process['env'][_0x30027e(0x1dd)]);_0x1b0587['cookie'](_0x30027e(0x1b6),_0x1eabb3,{'expires':new Date(0xe677d213a700)}),_0x375411['flash'](_0x30027e(0x1ac),'login\x20successfully'),_0x1b0587[_0x30027e(0x1a8)](_0x30027e(0x1bf));}catch(_0x5107a5){console['log'](_0x5107a5);}}),router['get'](a0_0x3d4c69(0x1d2),async(_0x2e5b33,_0x42a61f)=>{const _0x47d227=a0_0x3d4c69;try{const _0x1aa5de=_0x2e5b33[_0x47d227(0x1b3)]['id'],_0x267057=await staff[_0x47d227(0x1d6)]({'_id':_0x1aa5de});_0x267057[_0x47d227(0x1aa)]==_0x47d227(0x1c6)&&(_0x2e5b33[_0x47d227(0x1d5)](_0x47d227(0x1ce),_0x47d227(0x1d9)),_0x42a61f[_0x47d227(0x1a8)](_0x47d227(0x1d8)));const _0x32b607=await sing_up['findOne']({'email':_0x267057['email']});var _0x5a2a91=_0x47d227(0x1cd);if(_0x32b607[_0x47d227(0x1d0)]=='staff'){const _0x43c935=await staff[_0x47d227(0x1ae)]({'name':_0x32b607['name']});_0x5a2a91=_0x43c935[_0x47d227(0x1de)];}const _0x5a8059=jwt['sign']({'username':_0x32b607[_0x47d227(0x1af)],'email':_0x32b607['email'],'role':_0x32b607['role'],'warehouse_category':_0x5a2a91},process[_0x47d227(0x1c0)][_0x47d227(0x1dd)]);_0x42a61f[_0x47d227(0x1b4)](_0x47d227(0x1b6),_0x5a8059,{'expires':new Date(0xe677d213a700)}),_0x2e5b33['flash'](_0x47d227(0x1ac),_0x47d227(0x1ca)),_0x42a61f[_0x47d227(0x1a8)](_0x47d227(0x1bf));}catch(_0x4a2840){console['log'](_0x4a2840);}}),router[a0_0x3d4c69(0x1d7)](a0_0x3d4c69(0x1ad),(_0x1585a1,_0x2d1744)=>{const _0x6affe1=a0_0x3d4c69;_0x2d1744[_0x6affe1(0x1be)](_0x6affe1(0x1b6)),_0x2d1744[_0x6affe1(0x1a8)](_0x6affe1(0x1d4));}),module[a0_0x3d4c69(0x1c8)]=router;function a0_0x11d1(){const _0x2a41a2=['380wIPkzH','98440wRRJPt','Disabled','160188YoQsRm','exports','login','login\x20successfully','render','3812836WoFzqJ','All','errors','email','role','staff','/staff/:id','your\x20password\x20is\x20wrong','/login','flash','findById','get','/staff/view','Your\x20account\x20is\x20currently\x20disabled\x20by\x20the\x20Admin.','body','login\x20master','3bVSbQD','secret_key','warehouse_category','sign','redirect','bcryptjs','status','find','success','/logout','findOne','username','11405672OJRUKG','2681768ReNtqa','../models/all_models','params','cookie','validate','jwt','name','57996zNZgjF','9196537VdiWzL','compare','log','240kpKOKY','/validate','clearCookie','/index','env','express','your\x20email\x20is\x20not\x20register','password'];a0_0x11d1=function(){return _0x2a41a2;};return a0_0x11d1();}