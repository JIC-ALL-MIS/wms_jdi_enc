const a0_0x948803=a0_0x59ac;function a0_0x59ac(_0x1112b2,_0x5f10fd){const _0x213150=a0_0x2131();return a0_0x59ac=function(_0x59ac68,_0x20f084){_0x59ac68=_0x59ac68-0x1ae;let _0xfe4819=_0x213150[_0x59ac68];return _0xfe4819;},a0_0x59ac(_0x1112b2,_0x5f10fd);}function a0_0x2131(){const _0x1b5f23=['success','893172OrqMqK','get','image','<div>','182ephEha','length','</h5>','post','/code_password/','27769uUKXnC','../models/all_models','<strong>\x20Regards\x20</strong>','Email\x20sent\x20successfully','random','email','/forgotPassword/view','24gbOrWL','<html><head><title></title>','redirect','/upload/','json','site_title','/../public','False','808etnLzA','Password\x20Successfuly\x20Reset\x20-\x20','</head><body>','sendMail','<p>Hello\x20','3761230YWuuwZ','ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789','find','1154583dYFVlY','body','Error\x20Occurs','save','email_reset','1810OQZogn','logo','Logo.png','createTransport','hash','True','flash','</div>','<hr\x20class=\x22my-3\x22>','/forgotPassword/code/','render','/code/','<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>','floor','9066JAfpdD','53EhFGEr','<!DOCTYPE\x20html>','566pOCPnK','/login/','</body></html>','error','/view','nodemailer','email_code','log','port','11Jfwcxw','host',',\x20<br>Your\x20password\x20has\x20been\x20successfully\x20reset.\x20You\x20can\x20now\x20log\x20in\x20with\x20your\x20new\x20password.</p>','password','bcryptjs','Email\x20Not\x20Found\x20please\x20check\x20your\x20email','errors','<h5>','73948TIAZfA','<img\x20src=\x22cid:logo\x22\x20class=\x22rounded\x22\x20width=\x2266.5px\x22\x20height=\x2266.5px\x22></img>','findOne','Password\x20Reset\x20-\x20'];a0_0x2131=function(){return _0x1b5f23;};return a0_0x2131();}(function(_0x5c0837,_0x34c232){const _0x2a0800=a0_0x59ac,_0x1fd453=_0x5c0837();while(!![]){try{const _0x2411ef=-parseInt(_0x2a0800(0x1b4))/0x1*(-parseInt(_0x2a0800(0x1b6))/0x2)+parseInt(_0x2a0800(0x1dc))/0x3*(parseInt(_0x2a0800(0x1c7))/0x4)+-parseInt(_0x2a0800(0x1f1))/0x5*(-parseInt(_0x2a0800(0x1b3))/0x6)+parseInt(_0x2a0800(0x1d5))/0x7*(parseInt(_0x2a0800(0x1e4))/0x8)+-parseInt(_0x2a0800(0x1ec))/0x9+-parseInt(_0x2a0800(0x1e9))/0xa*(-parseInt(_0x2a0800(0x1bf))/0xb)+parseInt(_0x2a0800(0x1cc))/0xc*(-parseInt(_0x2a0800(0x1d0))/0xd);if(_0x2411ef===_0x34c232)break;else _0x1fd453['push'](_0x1fd453['shift']());}catch(_0xf03056){_0x1fd453['push'](_0x1fd453['shift']());}}}(a0_0x2131,0x4d3ba));const express=require('express'),app=express(),router=express['Router'](),bcrypt=require(a0_0x948803(0x1c3)),{sing_up,staff,profile,master_shop,email_settings}=require(a0_0x948803(0x1d6)),auth=require('../middleware/auth'),nodemailer=require(a0_0x948803(0x1bb));router[a0_0x948803(0x1cd)]('/view',async(_0x21a430,_0x4eee12)=>{const _0x40ef00=a0_0x948803,_0x169ad4=await master_shop['find']();_0x4eee12[_0x40ef00(0x1af)](_0x40ef00(0x1f0),{'success':_0x21a430['flash'](_0x40ef00(0x1cb)),'errors':_0x21a430[_0x40ef00(0x1f7)](_0x40ef00(0x1c5)),'master_shop':_0x169ad4});});function generateRandomAlphanumericString(_0x9fd002=0x6){const _0x5521df=a0_0x948803,_0x2e1812=_0x5521df(0x1ea);let _0x481ca5='';for(let _0x3622a1=0x0;_0x3622a1<_0x9fd002;_0x3622a1++){const _0x2894d6=Math[_0x5521df(0x1b2)](Math[_0x5521df(0x1d9)]()*_0x2e1812[_0x5521df(0x1d1)]);_0x481ca5+=_0x2e1812[_0x2894d6];}return _0x481ca5;}router['post'](a0_0x948803(0x1ba),async(_0x5de67a,_0x30ed5f)=>{const _0xa7c45b=a0_0x948803,{email:_0x267505}=_0x5de67a[_0xa7c45b(0x1ed)],_0x8897f4=await sing_up[_0xa7c45b(0x1c9)]({'email':_0x267505});var _0x5efeab=generateRandomAlphanumericString();const _0x200d68=await bcrypt[_0xa7c45b(0x1f5)](_0x5efeab,0xa);if(_0x8897f4){_0x8897f4['code']=_0x5efeab,_0x8897f4['isUsed']=_0xa7c45b(0x1e3);const _0x34a5f8=_0x8897f4[_0xa7c45b(0x1ef)](),_0x424aa3=await master_shop[_0xa7c45b(0x1eb)](),_0xae06d=await email_settings[_0xa7c45b(0x1c9)]();let _0x378794=nodemailer[_0xa7c45b(0x1f4)]({'host':_0xae06d[_0xa7c45b(0x1c0)],'port':Number(_0xae06d[_0xa7c45b(0x1be)]),'secure':![],'auth':{'user':_0xae06d[_0xa7c45b(0x1da)],'pass':_0xae06d[_0xa7c45b(0x1c2)]}}),_0x3d8e6d={'from':_0xae06d['email'],'to':_0x8897f4['email'],'subject':_0xa7c45b(0x1ca)+_0x424aa3[0x0][_0xa7c45b(0x1e1)],'attachments':[{'filename':'Logo.png','path':__dirname+_0xa7c45b(0x1e2)+'/upload/'+_0x424aa3[0x0]['image'],'cid':'logo'}],'html':'<!DOCTYPE\x20html>'+'<html><head><title></title>'+_0xa7c45b(0x1e6)+'<div>'+_0xa7c45b(0x1b1)+_0xa7c45b(0x1cf)+_0xa7c45b(0x1c8)+_0xa7c45b(0x1f8)+_0xa7c45b(0x1f8)+_0xa7c45b(0x1cf)+'<p>Hello,\x20<br>\x20We\x20have\x20sent\x20you\x20this\x20email\x20in\x20response\x20to\x20your\x20request\x20to\x20reset\x20please\x20copy\x20this\x20code\x20<h1><b>'+_0x5efeab+'</b></h1></p>'+'</div>'+_0xa7c45b(0x1f9)+_0xa7c45b(0x1cf)+_0xa7c45b(0x1d7)+_0xa7c45b(0x1c6)+_0x424aa3[0x0]['site_title']+_0xa7c45b(0x1d2)+_0xa7c45b(0x1f8)+_0xa7c45b(0x1f8)+_0xa7c45b(0x1b8)};_0x378794[_0xa7c45b(0x1e7)](_0x3d8e6d,function(_0x5ad71e,_0x38d11f){const _0x18cad5=_0xa7c45b;_0x5ad71e?(console[_0x18cad5(0x1bd)](_0x5ad71e),console[_0x18cad5(0x1bd)](_0x18cad5(0x1ee))):console[_0x18cad5(0x1bd)](_0x18cad5(0x1d8));}),_0x30ed5f[_0xa7c45b(0x1de)](_0xa7c45b(0x1ae));}else _0x5de67a[_0xa7c45b(0x1f7)]('error',_0xa7c45b(0x1c4)),_0x30ed5f['redirect'](_0xa7c45b(0x1db));}),router['get']('/code/',async(_0x14c461,_0x56bcf8)=>{const _0x400384=a0_0x948803,_0x3891c4=await master_shop[_0x400384(0x1eb)]();_0x56bcf8['render'](_0x400384(0x1bc),{'success':_0x14c461[_0x400384(0x1f7)](_0x400384(0x1cb)),'errors':_0x14c461[_0x400384(0x1f7)](_0x400384(0x1c5)),'master_shop':_0x3891c4});}),router['post'](a0_0x948803(0x1b0),async(_0x3ecedf,_0x1f016f)=>{const _0x2ab952=a0_0x948803,{code:_0x1c27f1}=_0x3ecedf[_0x2ab952(0x1ed)],_0x4f7bae=await sing_up[_0x2ab952(0x1eb)]({'code':_0x1c27f1});console[_0x2ab952(0x1bd)](_0x4f7bae[_0x2ab952(0x1d1)]),_0x1f016f[_0x2ab952(0x1e0)](_0x4f7bae);}),router[a0_0x948803(0x1d3)](a0_0x948803(0x1d4),async(_0x23c668,_0x45f0dc)=>{const _0x248c2f=a0_0x948803,{codex:_0x3b5016,password:_0x3a5a40,cpassword:_0x50249e,email:_0x4afe22}=_0x23c668[_0x248c2f(0x1ed)],_0x19947d=await sing_up[_0x248c2f(0x1c9)]({'code':_0x3b5016,'email':_0x4afe22,'isUsed':'False'}),_0x5bb9db=await bcrypt['hash'](_0x3a5a40,0xa);if(_0x19947d){_0x19947d['password']=_0x5bb9db,_0x19947d['isUsed']=_0x248c2f(0x1f6);const _0x45b1e0=_0x19947d[_0x248c2f(0x1ef)](),_0x3cadfa=await master_shop[_0x248c2f(0x1eb)](),_0x5937a7=await email_settings[_0x248c2f(0x1c9)]();let _0x21ffe2=nodemailer['createTransport']({'host':_0x5937a7['host'],'port':Number(_0x5937a7[_0x248c2f(0x1be)]),'secure':![],'auth':{'user':_0x5937a7[_0x248c2f(0x1da)],'pass':_0x5937a7[_0x248c2f(0x1c2)]}}),_0x52fe12={'from':_0x5937a7[_0x248c2f(0x1da)],'to':_0x19947d['email'],'subject':_0x248c2f(0x1e5)+_0x3cadfa[0x0]['site_title'],'attachments':[{'filename':_0x248c2f(0x1f3),'path':__dirname+_0x248c2f(0x1e2)+_0x248c2f(0x1df)+_0x3cadfa[0x0][_0x248c2f(0x1ce)],'cid':_0x248c2f(0x1f2)}],'html':_0x248c2f(0x1b5)+_0x248c2f(0x1dd)+_0x248c2f(0x1e6)+_0x248c2f(0x1cf)+'<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x22>'+'<div>'+_0x248c2f(0x1c8)+'</div>'+_0x248c2f(0x1f8)+_0x248c2f(0x1cf)+_0x248c2f(0x1e8)+_0x19947d['name']+_0x248c2f(0x1c1)+_0x248c2f(0x1f8)+_0x248c2f(0x1f9)+_0x248c2f(0x1cf)+_0x248c2f(0x1d7)+_0x248c2f(0x1c6)+_0x3cadfa[0x0]['site_title']+_0x248c2f(0x1d2)+_0x248c2f(0x1f8)+_0x248c2f(0x1f8)+'</body></html>'};_0x21ffe2[_0x248c2f(0x1e7)](_0x52fe12,function(_0x58ef35,_0x51770b){const _0x1fcad8=_0x248c2f;_0x58ef35?(console[_0x1fcad8(0x1bd)](_0x58ef35),console[_0x1fcad8(0x1bd)]('Error\x20Occurs')):console[_0x1fcad8(0x1bd)](_0x1fcad8(0x1d8));}),_0x45f0dc[_0x248c2f(0x1de)](_0x248c2f(0x1b7));}else _0x23c668['flash'](_0x248c2f(0x1b9),_0x248c2f(0x1c4)),_0x45f0dc[_0x248c2f(0x1de)]('/forgotPassword/code');}),module['exports']=router;