var a0_0x36bb1e=a0_0x1185;(function(_0x86f534,_0x4b8ebe){var _0x504974=a0_0x1185,_0x2554fa=_0x86f534();while(!![]){try{var _0x192173=parseInt(_0x504974(0x14b))/0x1*(parseInt(_0x504974(0x181))/0x2)+parseInt(_0x504974(0x132))/0x3+parseInt(_0x504974(0x187))/0x4*(-parseInt(_0x504974(0x15c))/0x5)+parseInt(_0x504974(0x19b))/0x6+-parseInt(_0x504974(0x1c6))/0x7+-parseInt(_0x504974(0x1d4))/0x8*(-parseInt(_0x504974(0x168))/0x9)+parseInt(_0x504974(0x186))/0xa*(-parseInt(_0x504974(0x16c))/0xb);if(_0x192173===_0x4b8ebe)break;else _0x2554fa['push'](_0x2554fa['shift']());}catch(_0x1406c4){_0x2554fa['push'](_0x2554fa['shift']());}}}(a0_0x5b05,0xd8894));const express=require(a0_0x36bb1e(0x17b)),app=express(),router=express[a0_0x36bb1e(0x136)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,purchases_return,sales,sales_return,suppliers_payment,customer_payment,transfers}=require(a0_0x36bb1e(0x154)),auth=require('../middleware/auth'),users=require(a0_0x36bb1e(0x1d7));router[a0_0x36bb1e(0x175)](a0_0x36bb1e(0x1ab),auth,async(_0x4ae18e,_0x4876db)=>{var _0x4f9b5c=a0_0x36bb1e;try{const {username:_0x3f6031,email:_0x3562ea,role:_0xae56a4}=_0x4ae18e[_0x4f9b5c(0x1b9)],_0x10772d=_0x4ae18e[_0x4f9b5c(0x1b9)],_0x59bbb7=await profile[_0x4f9b5c(0x125)]({'email':_0x10772d['email']}),_0x280d16=await master_shop['find']();console[_0x4f9b5c(0x150)](_0x4f9b5c(0x1b6),_0x280d16);let _0x5662eb;if(_0x10772d[_0x4f9b5c(0x164)]==_0x4f9b5c(0x1bd)){const _0x2a96cd=await staff[_0x4f9b5c(0x125)]({'email':_0x10772d['email']});_0x5662eb=await transfers[_0x4f9b5c(0x1ae)]({'from_warehouse':_0x2a96cd['warehouse']});}else _0x5662eb=await transfers[_0x4f9b5c(0x157)]([{'$unwind':_0x4f9b5c(0x135)},{'$group':{'_id':'$_id','invoice':{'$first':'$invoice'},'date':{'$first':_0x4f9b5c(0x17d)},'from_warehouse':{'$first':_0x4f9b5c(0x177)},'to_warehouse':{'$first':_0x4f9b5c(0x184)},'from_room_name':{'$addToSet':_0x4f9b5c(0x148)},'to_room_name':{'$addToSet':_0x4f9b5c(0x1a6)},'finalize':{'$first':_0x4f9b5c(0x138)}}},{'$project':{'_id':0x1,'invoice':0x1,'date':0x1,'from_warehouse':0x1,'to_warehouse':0x1,'from_room_name':0x1,'to_room_name':0x1,'finalize':0x1}}]);if(_0x280d16[0x0][_0x4f9b5c(0x171)]==_0x4f9b5c(0x156)){var _0x3ce7ea=users[_0x4f9b5c(0x16f)];console['log'](_0x3ce7ea);}else{if(_0x280d16[0x0][_0x4f9b5c(0x171)]==_0x4f9b5c(0x1a9))var _0x3ce7ea=users[_0x4f9b5c(0x1a9)];else{if(_0x280d16[0x0]['language']=='German')var _0x3ce7ea=users['German'];else{if(_0x280d16[0x0][_0x4f9b5c(0x171)]==_0x4f9b5c(0x1e4))var _0x3ce7ea=users[_0x4f9b5c(0x1e4)];else{if(_0x280d16[0x0][_0x4f9b5c(0x171)]==_0x4f9b5c(0x192))var _0x3ce7ea=users[_0x4f9b5c(0x192)];else{if(_0x280d16[0x0][_0x4f9b5c(0x171)]==_0x4f9b5c(0x14c))var _0x3ce7ea=users['Portuguese'];else{if(_0x280d16[0x0][_0x4f9b5c(0x171)]==_0x4f9b5c(0x1c8))var _0x3ce7ea=users[_0x4f9b5c(0x1c8)];else{if(_0x280d16[0x0][_0x4f9b5c(0x171)]==_0x4f9b5c(0x179))var _0x3ce7ea=users['Arabic'];}}}}}}}_0x4876db['render'](_0x4f9b5c(0x1d5),{'success':_0x4ae18e[_0x4f9b5c(0x142)](_0x4f9b5c(0x12d)),'errors':_0x4ae18e[_0x4f9b5c(0x142)]('errors'),'role':_0x10772d,'profile':_0x59bbb7,'master_shop':_0x280d16,'transfer':_0x5662eb,'language':_0x3ce7ea});}catch(_0x5eda48){console[_0x4f9b5c(0x150)](_0x5eda48);}}),router[a0_0x36bb1e(0x175)](a0_0x36bb1e(0x141),auth,async(_0x2665ad,_0x55375d)=>{var _0x4d8db6=a0_0x36bb1e;try{const {username:_0x383a9c,email:_0x577188,role:_0x51c09f}=_0x2665ad[_0x4d8db6(0x1b9)],_0x296904=_0x2665ad[_0x4d8db6(0x1b9)],_0x66fc78=await profile['findOne']({'email':_0x296904[_0x4d8db6(0x1dc)]}),_0x390be8=await master_shop[_0x4d8db6(0x1ae)]();console[_0x4d8db6(0x150)](_0x4d8db6(0x1b6),_0x390be8);let _0x2b7d82;if(_0x296904[_0x4d8db6(0x164)]==_0x4d8db6(0x1bd)){const _0x16f9b6=await staff[_0x4d8db6(0x125)]({'email':_0x296904[_0x4d8db6(0x1dc)]});_0x2b7d82=await warehouse[_0x4d8db6(0x157)]([{'$match':{'status':'Enabled','name':_0x16f9b6[_0x4d8db6(0x15f)],'warehouse_category':_0x4d8db6(0x199)}},{'$group':{'_id':_0x4d8db6(0x1d2),'name':{'$first':_0x4d8db6(0x1d2)}}}]);}else _0x2b7d82=await warehouse['aggregate']([{'$match':{'status':_0x4d8db6(0x1e3),'warehouse_category':_0x4d8db6(0x199)}},{'$group':{'_id':_0x4d8db6(0x1d2),'name':{'$first':_0x4d8db6(0x1d2)}}}]);var _0x511e0e=[_0x4d8db6(0x143),'Enclosed',_0x4d8db6(0x1b0)];const _0x2a21bc=await transfers[_0x4d8db6(0x1ae)]({}),_0x2ead94=_0x2a21bc[_0x4d8db6(0x197)]+0x1,_0x3ca1d0=_0x4d8db6(0x1af)+_0x2ead94[_0x4d8db6(0x1b5)]()[_0x4d8db6(0x134)](0x5,'0');if(_0x390be8[0x0][_0x4d8db6(0x171)]=='English\x20(US)'){var _0x30a7d8=users[_0x4d8db6(0x16f)];console[_0x4d8db6(0x150)](_0x30a7d8);}else{if(_0x390be8[0x0][_0x4d8db6(0x171)]==_0x4d8db6(0x1a9))var _0x30a7d8=users[_0x4d8db6(0x1a9)];else{if(_0x390be8[0x0][_0x4d8db6(0x171)]==_0x4d8db6(0x198))var _0x30a7d8=users[_0x4d8db6(0x198)];else{if(_0x390be8[0x0]['language']=='Spanish')var _0x30a7d8=users[_0x4d8db6(0x1e4)];else{if(_0x390be8[0x0][_0x4d8db6(0x171)]==_0x4d8db6(0x192))var _0x30a7d8=users[_0x4d8db6(0x192)];else{if(_0x390be8[0x0][_0x4d8db6(0x171)]==_0x4d8db6(0x14c))var _0x30a7d8=users[_0x4d8db6(0x160)];else{if(_0x390be8[0x0]['language']==_0x4d8db6(0x1c8))var _0x30a7d8=users[_0x4d8db6(0x1c8)];else{if(_0x390be8[0x0][_0x4d8db6(0x171)]=='Arabic\x20(ae)')var _0x30a7d8=users['Arabic'];}}}}}}}_0x55375d['render']('add_transfer',{'success':_0x2665ad[_0x4d8db6(0x142)](_0x4d8db6(0x12d)),'errors':_0x2665ad[_0x4d8db6(0x142)]('errors'),'role':_0x296904,'profile':_0x66fc78,'master_shop':_0x390be8,'warehouse':_0x2b7d82,'language':_0x30a7d8,'rooms_data':_0x511e0e,'invoice':_0x3ca1d0});}catch(_0x1f3975){console[_0x4d8db6(0x150)](_0x1f3975);}}),router[a0_0x36bb1e(0x1c3)]('/view/add_transfer',auth,async(_0x52a3a8,_0x5d2cfc)=>{var _0x17fec9=a0_0x36bb1e;try{console[_0x17fec9(0x150)](_0x52a3a8[_0x17fec9(0x18b)]);const {date:_0x4977bf,from_warehouse:_0x3ffc92,FromRoom_name:_0x2085f1,to_warehouse:_0x19d15b,ToRoom_name:_0x24d7f0,prod_name:_0x21d4c8,from_prod_qty:_0x272f6a,from_prod_level:_0x4db96a,from_prod_isle:_0x25e8db,from_prod_pallet:_0x3f7cf4,to_prod_qty:_0xebcad1,to_prod_level:_0x3f043a,to_prod_isle:_0x3c5395,to_prod_pallet:_0xa1a162,primary_code:_0x53a3b6,secondary_code:_0x333774,product_code3:_0x44488b,note:_0x5710ba,MaxStocks_data2:_0x1234af,invoice:_0x227764,expiry_date:_0x3b168d}=_0x52a3a8[_0x17fec9(0x18b)];if(typeof _0x21d4c8==_0x17fec9(0x12f))var _0x27cd62=[_0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1b4)]],_0x564649=[_0x52a3a8[_0x17fec9(0x18b)]['from_prod_qty']],_0xa60e14=[_0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1df)]],_0x5dc263=[_0x52a3a8[_0x17fec9(0x18b)]['New_Qty_Converted']],_0x66722b=[_0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1da)]],_0x321f56=[_0x52a3a8['body']['primary_code']],_0x41776d=[_0x52a3a8['body'][_0x17fec9(0x1c2)]],_0x105532=[_0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x166)]],_0xce90c6=[_0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1d3)]],_0x4690ab=[_0x52a3a8['body'][_0x17fec9(0x1e6)]],_0x2ea8d9=[_0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1be)]],_0x25add2=[_0x52a3a8[_0x17fec9(0x18b)]['batch_code']],_0x375817=[_0x52a3a8[_0x17fec9(0x18b)]['expiry_date']],_0x4d4ddd=[_0x52a3a8['body'][_0x17fec9(0x163)]],_0x40d35f=[_0x52a3a8['body'][_0x17fec9(0x19c)]],_0x4be487=[_0x52a3a8[_0x17fec9(0x18b)]['prod_cat']],_0x550d9a=[_0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x170)]],_0x51df02=[_0x52a3a8['body'][_0x17fec9(0x1b7)]];else var _0x27cd62=[..._0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1b4)]],_0x564649=[..._0x52a3a8[_0x17fec9(0x18b)]['from_prod_qty']],_0xa60e14=[..._0x52a3a8['body']['from_prod_level']],_0x5dc263=[..._0x52a3a8[_0x17fec9(0x18b)]['New_Qty_Converted']],_0x66722b=[..._0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1da)]],_0x321f56=[..._0x52a3a8[_0x17fec9(0x18b)]['primary_code']],_0x41776d=[..._0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1c2)]],_0x105532=[..._0x52a3a8[_0x17fec9(0x18b)]['product_code3']],_0xce90c6=[..._0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1d3)]],_0x4690ab=[..._0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1e6)]],_0x2ea8d9=[..._0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1be)]],_0x25add2=[..._0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x153)]],_0x375817=[..._0x52a3a8[_0x17fec9(0x18b)][_0x17fec9(0x1d8)]],_0x4d4ddd=[..._0x52a3a8['body']['max_per_unit']],_0x40d35f=[..._0x52a3a8['body']['production_date']],_0x4be487=[..._0x52a3a8['body']['prod_cat']],_0x550d9a=[..._0x52a3a8[_0x17fec9(0x18b)]['RoomAssigned']],_0x51df02=[..._0x52a3a8[_0x17fec9(0x18b)]['ToRoomAssigned']];const _0x13b3ab=_0x27cd62[_0x17fec9(0x173)](_0x2d3729=>{return _0x2d3729={'product_name':_0x2d3729};});_0x564649[_0x17fec9(0x1b8)]((_0x1663ef,_0x1751b0)=>{var _0x330d59=_0x17fec9;_0x13b3ab[_0x1751b0][_0x330d59(0x18a)]=_0x1663ef;}),_0xa60e14[_0x17fec9(0x1b8)]((_0xa2b2b1,_0x71174b)=>{var _0x47e3ae=_0x17fec9;_0x550d9a[_0x47e3ae(0x1b8)]((_0x1f9143,_0x3294b0)=>{var _0x45eda4=_0x47e3ae;if(_0x1f9143==_0x45eda4(0x17c)&&_0x71174b==_0x3294b0){var _0x192735=_0xa2b2b1[_0x45eda4(0x191)](0x3);_0x13b3ab[_0x71174b]['from_storage']=_0xa2b2b1[0x0],_0x13b3ab[_0x71174b]['from_rack']=_0xa2b2b1[0x1],_0x13b3ab[_0x71174b][_0x45eda4(0x1bf)]=0x0,_0x13b3ab[_0x71174b][_0x45eda4(0x12c)]=0x0,_0x13b3ab[_0x71174b][_0x45eda4(0x1a1)]=_0x45eda4(0x193),_0x13b3ab[_0x71174b]['from_floorlevel']=_0x192735;}else{if(_0x1f9143==_0x45eda4(0x1d0)&&_0x71174b==_0x3294b0){var _0x192735=_0xa2b2b1['slice'](0x3);_0x13b3ab[_0x71174b][_0x45eda4(0x189)]=_0xa2b2b1[0x0],_0x13b3ab[_0x71174b][_0x45eda4(0x167)]=_0xa2b2b1[0x1],_0x13b3ab[_0x71174b][_0x45eda4(0x1bf)]=0x0,_0x13b3ab[_0x71174b]['from_bin']=0x0,_0x13b3ab[_0x71174b]['from_types']=_0x45eda4(0x193),_0x13b3ab[_0x71174b][_0x45eda4(0x17f)]=_0xa2b2b1[0x5];}else{if(_0x71174b==_0x3294b0){var _0x33b2bd;if(_0xa2b2b1[0x4]=='L')_0x33b2bd=_0x45eda4(0x1e2);else _0xa2b2b1[0x4]=='F'&&(_0x33b2bd=_0x45eda4(0x193));_0x13b3ab[_0x71174b]['from_storage']=_0xa2b2b1[0x0],_0x13b3ab[_0x71174b][_0x45eda4(0x167)]=_0xa2b2b1[0x1],_0x13b3ab[_0x71174b][_0x45eda4(0x1bf)]=_0xa2b2b1[0x2],_0x13b3ab[_0x71174b][_0x45eda4(0x12c)]=_0xa2b2b1[0x3],_0x13b3ab[_0x71174b][_0x45eda4(0x1a1)]=_0x33b2bd,_0x13b3ab[_0x71174b][_0x45eda4(0x17f)]=_0xa2b2b1[0x5];}}}});}),_0x5dc263[_0x17fec9(0x1b8)]((_0x422881,_0x1da5f9)=>{var _0x82e7ac=_0x17fec9;_0x13b3ab[_0x1da5f9][_0x82e7ac(0x16a)]=_0x422881;}),_0x66722b[_0x17fec9(0x1b8)]((_0x2f8ff1,_0x513a3d)=>{var _0x2bd870=_0x17fec9;_0x51df02[_0x2bd870(0x1b8)]((_0x34fe00,_0x5f486f)=>{var _0xaa134f=_0x2bd870;if(_0x34fe00==_0xaa134f(0x17c)&&_0x513a3d==_0x5f486f){var _0xac2ff7=_0x2f8ff1['slice'](0x3);_0x13b3ab[_0x513a3d][_0xaa134f(0x13b)]=_0x2f8ff1[0x0],_0x13b3ab[_0x513a3d][_0xaa134f(0x145)]=_0x2f8ff1[0x1],_0x13b3ab[_0x513a3d][_0xaa134f(0x1c7)]=0x0,_0x13b3ab[_0x513a3d][_0xaa134f(0x1e1)]=0x0,_0x13b3ab[_0x513a3d]['to_types']=_0xaa134f(0x193),_0x13b3ab[_0x513a3d]['to_floorlevel']=_0xac2ff7;}else{if(_0x34fe00==_0xaa134f(0x1d0)&&_0x513a3d==_0x5f486f){var _0xac2ff7=_0x2f8ff1['slice'](0x3);_0x13b3ab[_0x513a3d][_0xaa134f(0x13b)]=_0x2f8ff1[0x0],_0x13b3ab[_0x513a3d][_0xaa134f(0x145)]=_0x2f8ff1[0x1],_0x13b3ab[_0x513a3d][_0xaa134f(0x1c7)]=0x0,_0x13b3ab[_0x513a3d][_0xaa134f(0x1e1)]=0x0,_0x13b3ab[_0x513a3d][_0xaa134f(0x1c0)]=_0xaa134f(0x193),_0x13b3ab[_0x513a3d][_0xaa134f(0x14a)]=_0x2f8ff1[0x5];}else{if(_0x513a3d==_0x5f486f){var _0x17d859;if(_0x2f8ff1[0x4]=='L')_0x17d859=_0xaa134f(0x1e2);else _0x2f8ff1[0x4]=='F'&&(_0x17d859=_0xaa134f(0x193));_0x13b3ab[_0x513a3d][_0xaa134f(0x13b)]=_0x2f8ff1[0x0],_0x13b3ab[_0x513a3d][_0xaa134f(0x145)]=_0x2f8ff1[0x1],_0x13b3ab[_0x513a3d]['to_bay']=_0x2f8ff1[0x2],_0x13b3ab[_0x513a3d][_0xaa134f(0x1e1)]=_0x2f8ff1[0x3],_0x13b3ab[_0x513a3d][_0xaa134f(0x1c0)]=_0x17d859,_0x13b3ab[_0x513a3d]['to_floorlevel']=_0x2f8ff1[0x5];}}}});}),_0x321f56[_0x17fec9(0x1b8)]((_0x4d2fd2,_0x4f4e4f)=>{var _0x8fe953=_0x17fec9;_0x13b3ab[_0x4f4e4f][_0x8fe953(0x1cf)]=_0x4d2fd2;}),_0x41776d[_0x17fec9(0x1b8)]((_0x706915,_0x5af8d4)=>{var _0x56affa=_0x17fec9;_0x13b3ab[_0x5af8d4][_0x56affa(0x1c2)]=_0x706915;}),_0x105532[_0x17fec9(0x1b8)]((_0x4d34a2,_0x3981e3)=>{var _0x163e32=_0x17fec9;_0x13b3ab[_0x3981e3][_0x163e32(0x1ac)]=_0x4d34a2;}),_0xce90c6[_0x17fec9(0x1b8)]((_0xc9904,_0x5ae0f1)=>{var _0x18f76e=_0x17fec9;_0x13b3ab[_0x5ae0f1][_0x18f76e(0x1ad)]=_0xc9904;}),_0x4690ab[_0x17fec9(0x1b8)]((_0x6d6748,_0x48c88e)=>{var _0x27e05d=_0x17fec9;_0x13b3ab[_0x48c88e][_0x27e05d(0x1a4)]=_0x6d6748;}),_0x2ea8d9['forEach']((_0x64c94e,_0x43a81d)=>{_0x13b3ab[_0x43a81d]['secondary_unit']=_0x64c94e;}),_0x25add2[_0x17fec9(0x1b8)]((_0x411d4e,_0x2d4ff3)=>{var _0x4124c8=_0x17fec9;_0x13b3ab[_0x2d4ff3][_0x4124c8(0x153)]=_0x411d4e;}),_0x375817[_0x17fec9(0x1b8)]((_0xa3b6e3,_0x37725c)=>{var _0x390f12=_0x17fec9;_0x13b3ab[_0x37725c][_0x390f12(0x1d8)]=_0xa3b6e3;}),_0x4d4ddd['forEach']((_0x119ad4,_0x401512)=>{var _0x5724b5=_0x17fec9;_0x13b3ab[_0x401512][_0x5724b5(0x130)]=_0x119ad4;}),_0x40d35f[_0x17fec9(0x1b8)]((_0x565235,_0x44eb86)=>{var _0x19f22a=_0x17fec9;_0x13b3ab[_0x44eb86][_0x19f22a(0x19c)]=_0x565235;}),_0x4be487[_0x17fec9(0x1b8)]((_0x2f9807,_0x24242d)=>{var _0xed0bcd=_0x17fec9;_0x13b3ab[_0x24242d][_0xed0bcd(0x172)]=_0x2f9807;}),_0x550d9a[_0x17fec9(0x1b8)]((_0x3fc06f,_0x379d72)=>{var _0x3afbbd=_0x17fec9;_0x13b3ab[_0x379d72][_0x3afbbd(0x13f)]=_0x3fc06f;}),_0x51df02[_0x17fec9(0x1b8)]((_0x1145e2,_0x1817ba)=>{var _0x2dbe3c=_0x17fec9;_0x13b3ab[_0x1817ba][_0x2dbe3c(0x19d)]=_0x1145e2;});const _0xa6d428=_0x13b3ab[_0x17fec9(0x1c5)](_0x1f6dc3=>_0x1f6dc3['to_quantity']!=='0'&&_0x1f6dc3[_0x17fec9(0x16a)]!==''||_0x1f6dc3[_0x17fec9(0x14a)]!=='0'&&_0x1f6dc3['to_floorlevel']!==''),_0x535872=new transfers({'date':_0x4977bf,'from_warehouse':_0x3ffc92,'to_warehouse':_0x19d15b,'product':_0xa6d428,'note':_0x5710ba,'invoice':_0x227764}),_0xe8c636=await _0x535872['save']();_0x52a3a8[_0x17fec9(0x142)](_0x17fec9(0x12d),_0x17fec9(0x147)),_0x5d2cfc[_0x17fec9(0x169)](_0x17fec9(0x1a0)+_0xe8c636[_0x17fec9(0x182)]);}catch(_0x155cb8){console[_0x17fec9(0x150)](_0x155cb8),_0x5d2cfc['status'](0xc8)[_0x17fec9(0x1ce)]({'errorMessage':_0x155cb8[_0x17fec9(0x1bb)]});}}),router[a0_0x36bb1e(0x175)]('/preview/:id',auth,async(_0x3b210b,_0x17b9ce)=>{var _0x30ec93=a0_0x36bb1e;try{const {username:_0x24e366,email:_0x2b4ce4,role:_0x450e33}=_0x3b210b['user'],_0x3c4a45=_0x3b210b[_0x30ec93(0x1b9)],_0x37d161=await profile['findOne']({'email':_0x3c4a45['email']}),_0x455bfc=await master_shop[_0x30ec93(0x1ae)]();console[_0x30ec93(0x150)](_0x30ec93(0x1b6),_0x455bfc);const _0x193e9f=await transfers[_0x30ec93(0x1a7)](_0x3b210b[_0x30ec93(0x1b3)]['id']);let _0x20ae87=new Date(_0x193e9f[_0x30ec93(0x1d8)]),_0x1ec5c3=('0'+_0x20ae87['getDate']())['slice'](-0x2),_0x742b8e=('0'+(_0x20ae87[_0x30ec93(0x1d9)]()+0x1))[_0x30ec93(0x191)](-0x2),_0x9aa6ef=_0x20ae87[_0x30ec93(0x1aa)](),_0x29b774=_0x9aa6ef+'-'+_0x742b8e+'-'+_0x1ec5c3,_0x3cf0d8;if(_0x3c4a45[_0x30ec93(0x164)]=='staff'){const _0x47f3e5=await staff[_0x30ec93(0x125)]({'email':_0x3c4a45[_0x30ec93(0x1dc)]});_0x3cf0d8=await warehouse[_0x30ec93(0x1ae)]({'status':_0x30ec93(0x1e3),'name':_0x47f3e5[_0x30ec93(0x15f)],'warehouse_category':'Raw\x20Materials'});}else _0x3cf0d8=await warehouse['find']({'status':'Enabled','warehouse_category':_0x30ec93(0x199)});const _0x1de324=await warehouse[_0x30ec93(0x157)]([{'$match':{'name':_0x193e9f[_0x30ec93(0x129)]}},{'$unwind':_0x30ec93(0x1ca)},{'$group':{'_id':_0x30ec93(0x196),'name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x30ec93(0x1cc)},'bay':{'$first':'$product_details.bay'},'bin':{'$first':_0x30ec93(0x161)},'type':{'$first':_0x30ec93(0x12b)},'floorlevel':{'$first':_0x30ec93(0x1de)},'primary_code':{'$first':_0x30ec93(0x1a8)},'secondary_code':{'$first':_0x30ec93(0x1d6)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':'$product_details.storage'},'rack':{'$first':_0x30ec93(0x159)},'expiry_date':{'$first':_0x30ec93(0x14d)},'production_date':{'$first':_0x30ec93(0x15b)},'room':{'$first':'$room'}}}]);if(_0x455bfc[0x0][_0x30ec93(0x171)]==_0x30ec93(0x156)){var _0x45bb9e=users[_0x30ec93(0x16f)];console[_0x30ec93(0x150)](_0x45bb9e);}else{if(_0x455bfc[0x0][_0x30ec93(0x171)]==_0x30ec93(0x1a9))var _0x45bb9e=users[_0x30ec93(0x1a9)];else{if(_0x455bfc[0x0]['language']==_0x30ec93(0x198))var _0x45bb9e=users['German'];else{if(_0x455bfc[0x0][_0x30ec93(0x171)]=='Spanish')var _0x45bb9e=users[_0x30ec93(0x1e4)];else{if(_0x455bfc[0x0][_0x30ec93(0x171)]==_0x30ec93(0x192))var _0x45bb9e=users[_0x30ec93(0x192)];else{if(_0x455bfc[0x0][_0x30ec93(0x171)]==_0x30ec93(0x14c))var _0x45bb9e=users['Portuguese'];else{if(_0x455bfc[0x0]['language']=='Chinese')var _0x45bb9e=users[_0x30ec93(0x1c8)];else{if(_0x455bfc[0x0][_0x30ec93(0x171)]==_0x30ec93(0x179))var _0x45bb9e=users['Arabic'];}}}}}}}_0x17b9ce[_0x30ec93(0x1c9)](_0x30ec93(0x183),{'success':_0x3b210b[_0x30ec93(0x142)](_0x30ec93(0x12d)),'errors':_0x3b210b[_0x30ec93(0x142)]('errors'),'role':_0x3c4a45,'profile':_0x37d161,'master_shop':_0x455bfc,'warehouse':_0x3cf0d8,'transfer':_0x193e9f,'stock':_0x1de324,'language':_0x45bb9e});}catch(_0x568dfe){console[_0x30ec93(0x150)](_0x568dfe);}}),router[a0_0x36bb1e(0x1c3)](a0_0x36bb1e(0x18d),auth,async(_0x3a22d7,_0x2707d8)=>{var _0x4b92fc=a0_0x36bb1e;try{const _0x2c0670=_0x3a22d7[_0x4b92fc(0x1b3)]['id'],{from_warehouse:_0x5b4539,FromRoom_name:_0xfbdd37,to_warehouse:_0x58d6fe,ToRoom_name:_0x4a6b85}=_0x3a22d7['body'],_0xf4849f=await transfers[_0x4b92fc(0x1a7)]({'_id':_0x2c0670}),_0x108080=_0xf4849f['product'][_0x4b92fc(0x173)](async _0x1d6e25=>{var _0x4e3044=_0x4b92fc;if(_0x1d6e25['to_quantity']>0x0){var _0x4c545b=await warehouse[_0x4e3044(0x125)]({'name':_0xf4849f[_0x4e3044(0x129)],'room':_0x1d6e25[_0x4e3044(0x13f)],'warehouse_category':_0x4e3044(0x199)});const _0x236eb2=_0x4c545b['product_details'][_0x4e3044(0x173)](_0x3b38f1=>{var _0xaeb74b=_0x4e3044;_0x3b38f1[_0xaeb74b(0x178)]==_0x1d6e25[_0xaeb74b(0x178)]&&_0x3b38f1[_0xaeb74b(0x1ba)]==_0x1d6e25[_0xaeb74b(0x17f)]&&_0x3b38f1[_0xaeb74b(0x18c)]==_0x1d6e25[_0xaeb74b(0x1a1)]&&_0x3b38f1['bin']==_0x1d6e25[_0xaeb74b(0x12c)]&&_0x3b38f1[_0xaeb74b(0x12a)]==_0x1d6e25[_0xaeb74b(0x1bf)]&&_0x3b38f1[_0xaeb74b(0x145)]==_0x1d6e25[_0xaeb74b(0x167)]&&_0x3b38f1[_0xaeb74b(0x13b)]==_0x1d6e25[_0xaeb74b(0x189)]&&_0x3b38f1[_0xaeb74b(0x1d8)]==_0x1d6e25[_0xaeb74b(0x1d8)]&&_0x3b38f1['batch_code']==_0x1d6e25[_0xaeb74b(0x153)]&&_0x3b38f1[_0xaeb74b(0x19c)]==_0x1d6e25[_0xaeb74b(0x19c)]&&(_0x3b38f1[_0xaeb74b(0x152)]=_0x3b38f1[_0xaeb74b(0x152)]-_0x1d6e25['to_quantity']);});}return _0x4c545b;});Promise['all'](_0x108080)['then'](async _0x39927c=>{var _0x565766=_0x4b92fc;try{for(const _0x112fbb of _0x39927c){await _0x112fbb[_0x565766(0x19e)]();}try{const _0x288fd3=_0xf4849f[_0x565766(0x1a5)]['map'](async _0x76144e=>{var _0x37086d=_0x565766;if(_0x76144e[_0x37086d(0x16a)]>0x0){var _0x20fa2a=await warehouse[_0x37086d(0x125)]({'name':_0xf4849f['to_warehouse'],'room':_0x76144e[_0x37086d(0x19d)],'warehouse_category':_0x37086d(0x199)}),_0x546e60=0x0;const _0x2a67cd=_0x20fa2a[_0x37086d(0x17e)][_0x37086d(0x173)](_0xd40926=>{var _0x500593=_0x37086d;_0xd40926[_0x500593(0x178)]==_0x76144e[_0x500593(0x178)]&&_0xd40926[_0x500593(0x1ba)]==_0x76144e['to_floorlevel']&&_0xd40926[_0x500593(0x18c)]==_0x76144e[_0x500593(0x1c0)]&&_0xd40926[_0x500593(0x19f)]==_0x76144e['to_bin']&&_0xd40926[_0x500593(0x12a)]==_0x76144e['to_bay']&&_0xd40926[_0x500593(0x145)]==_0x76144e['rack']&&_0xd40926[_0x500593(0x13b)]==_0x76144e['storage']&&_0xd40926[_0x500593(0x1d8)]==_0x76144e[_0x500593(0x1d8)]&&_0xd40926[_0x500593(0x153)]==_0x76144e['batch_code']&&_0xd40926[_0x500593(0x19c)]==_0x76144e[_0x500593(0x19c)]&&(_0xd40926[_0x500593(0x152)]=_0xd40926[_0x500593(0x152)]+_0x76144e['to_quantity'],_0x546e60++);});_0x546e60=='0'&&(_0x20fa2a[_0x37086d(0x17e)]=_0x20fa2a[_0x37086d(0x17e)]['concat']({'product_name':_0x76144e[_0x37086d(0x178)],'product_stock':_0x76144e[_0x37086d(0x16a)],'bay':_0x76144e['to_bay'],'bin':_0x76144e[_0x37086d(0x1e1)],'type':_0x76144e[_0x37086d(0x1c0)],'floorlevel':_0x76144e[_0x37086d(0x14a)],'storage':_0x76144e[_0x37086d(0x13b)],'rack':_0x76144e[_0x37086d(0x145)],'product_code':_0x76144e[_0x37086d(0x1ac)],'primary_code':_0x76144e['primary_code'],'secondary_code':_0x76144e[_0x37086d(0x1c2)],'maxProducts':_0x76144e['maxProducts'],'storage':_0x76144e['storage'],'rack':_0x76144e['rack'],'expiry_date':_0x76144e[_0x37086d(0x1d8)],'maxPerUnit':_0x76144e[_0x37086d(0x130)],'batch_code':_0x76144e[_0x37086d(0x153)],'production_date':_0x76144e[_0x37086d(0x19c)]}));}return _0x20fa2a;});Promise[_0x565766(0x137)](_0x288fd3)[_0x565766(0x16b)](async _0x2e2958=>{var _0x5b01a2=_0x565766;try{for(const _0x199418 of _0x2e2958){await warehouse[_0x5b01a2(0x140)]({'_id':_0x199418[_0x5b01a2(0x182)]},{'$addToSet':{'product_details':{'$each':_0x199418['product_details']}}});}_0xf4849f[_0x5b01a2(0x1b2)]='True';const _0x3fa7ef=await _0xf4849f[_0x5b01a2(0x19e)]();_0x3a22d7[_0x5b01a2(0x142)](_0x5b01a2(0x12d),_0x5b01a2(0x1e5)),_0x2707d8['redirect'](_0x5b01a2(0x18e)+_0x3fa7ef[_0x5b01a2(0x182)]);}catch(_0x3ad263){console[_0x5b01a2(0x165)](_0x3ad263),_0x2707d8[_0x5b01a2(0x176)](0x1f4)['json']({'Perror':'An\x20error\x20occurred\x20while\x20saving\x20data.','message':_0x3ad263[_0x5b01a2(0x1bb)]});}})[_0x565766(0x195)](_0x2711eb=>{var _0x37ebcc=_0x565766;console[_0x37ebcc(0x165)](_0x2711eb),_0x2707d8[_0x37ebcc(0x176)](0x1f4)[_0x37ebcc(0x1ce)]({'Perror':_0x37ebcc(0x1cb)});});}catch(_0x167571){_0x2707d8[_0x565766(0x1ce)](_0x167571);}}catch(_0x16b2ca){console[_0x565766(0x165)](_0x16b2ca),_0x2707d8[_0x565766(0x176)](0x1f4)['json']({'Merror':'An\x20error\x20occurred\x20while\x20saving\x20data.','Message':_0x16b2ca[_0x565766(0x1bb)]});}})[_0x4b92fc(0x195)](_0xc8cfa2=>{var _0x2e325f=_0x4b92fc;console['error'](_0xc8cfa2),_0x2707d8[_0x2e325f(0x176)](0x1f4)[_0x2e325f(0x1ce)]({'Merror':'An\x20error\x20occurred.'});});}catch(_0x21c20a){console[_0x4b92fc(0x150)](_0x21c20a);}});function BayBinSelected(_0x401a77,_0x9ef4d8){var _0x707f32=a0_0x36bb1e,_0x1050fd=[],_0x57469d=[],_0x3a3bf7=[],_0x40d124=[],_0x2eb0f5=[],_0x22ab4f=[];let _0x56f4a5=[];if(_0x401a77=='DRY\x20STORAGE')switch(_0x9ef4d8){case _0x707f32(0x1a2):_0x1050fd=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8],_0x57469d=[0x1,0x2],_0x40d124=[0x1,0x2,0x3,0x4,0x5],_0x3a3bf7=[_0x707f32(0x1e2),_0x707f32(0x193)],_0x2eb0f5=['D'],_0x22ab4f=['A'];break;case _0x707f32(0x139):_0x1050fd=[0x6,0x5,0x4,0x3,0x2,0x1],_0x57469d=[0x1,0x2],_0x40d124=[0x1,0x2,0x3,0x4,0x5],_0x3a3bf7=[_0x707f32(0x1e2),_0x707f32(0x193)],_0x2eb0f5=['D'],_0x22ab4f=['B'];break;case _0x707f32(0x1d0):_0x1050fd=[0x0],_0x57469d=[0x0],_0x40d124=[0x1,0x2,0x3,0x4,0x5],_0x3a3bf7=[_0x707f32(0x193)],_0x2eb0f5=['D'],_0x22ab4f=['S'];break;case _0x707f32(0x17c):_0x1050fd=[0x0],_0x57469d=[0x0],_0x40d124=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf,0x10],_0x3a3bf7=[_0x707f32(0x193)],_0x2eb0f5=['D'],_0x22ab4f=['R'];break;}else{if(_0x401a77=='COLD\x20STORAGE')switch(_0x9ef4d8){case'Rack\x20A':_0x1050fd=[0x1,0x2,0x3,0x4,0x5,0x6,0x7],_0x57469d=['B','F'],_0x40d124=[0x1,0x2,0x3,0x4,0x5],_0x3a3bf7=[_0x707f32(0x1e2),_0x707f32(0x193)],_0x2eb0f5=['C'],_0x22ab4f=['A'];break;case _0x707f32(0x139):_0x1050fd=[0x5,0x4,0x3,0x2,0x1],_0x57469d=['F','B','S'],_0x40d124=[0x1,0x2,0x3,0x4,0x5],_0x3a3bf7=[_0x707f32(0x1e2),_0x707f32(0x193)],_0x2eb0f5=['C'],_0x22ab4f=['B'];break;case _0x707f32(0x12e):_0x1050fd=[0x1,0x2,0x3,0x4,0x5],_0x57469d=['B','F','S'],_0x40d124=[0x5,0x4,0x3,0x2,0x1],_0x3a3bf7=['Level',_0x707f32(0x193)],_0x2eb0f5=['C'],_0x22ab4f=['C'];break;case _0x707f32(0x13e):_0x1050fd=[0x5,0x4,0x3,0x2,0x1],_0x57469d=['F','B','S'],_0x40d124=[0x1,0x2,0x3,0x4,0x5],_0x3a3bf7=[_0x707f32(0x1e2),_0x707f32(0x193)],_0x2eb0f5=['C'],_0x22ab4f=['D'];break;case'Rack\x20E':_0x1050fd=[0x4,0x3,0x2,0x1],_0x57469d=[0x1,0x2],_0x40d124=[0x1,0x2,0x3,0x4,0x5],_0x3a3bf7=[_0x707f32(0x1e2),_0x707f32(0x193)],_0x2eb0f5=['C'],_0x22ab4f=['E'];break;case _0x707f32(0x14e):_0x1050fd=[0x1,0x2,0x3],_0x57469d=[0x1,0x2],_0x40d124=[0x1,0x2,0x3,0x4,0x5],_0x3a3bf7=[_0x707f32(0x1e2)],_0x2eb0f5=['C'],_0x22ab4f=['F'];break;}}return{'levels':_0x1050fd,'Isle':_0x57469d,'rack':_0x40d124,'type':_0x3a3bf7,'storage':_0x2eb0f5,'rak':_0x22ab4f};}function a0_0x5b05(){var _0x122237=['9179674PevbGs','to_bay','Chinese','render','$product_details','An\x20error\x20occurred.','$product_details.product_stock','exports','json','primary_code','Shelves','date','$name','MaxStocks_data2','37928TKXkMX','transfer','$product_details.secondary_code','../public/language/languages.json','expiry_date','getMonth','to_prod_level','$product_details.bay','email','from_prod_qty','$product_details.floorlevel','from_prod_level','$product_details.maxProducts','to_bin','Level','Enabled','Spanish','Transfer\x20Finalize\x20Successfully','primary_unit','findOne','Arabic','/barcode_scanner3','/view/:id','from_warehouse','bay','$product_details.type','from_bin','success','Rack\x20C','string','maxperunit','$product_details.product_code','4624497RzXIRT','/barcode_scanner','padStart','$product','Router','all','$finalize','Rack\x20B','push','storage','to_prod_pallet','$product_details.product_name','Rack\x20D','from_room_name','updateOne','/view/add_transfer','flash','Ambient','invoice','rack','note','Product\x20Transfer\x20successfully','$product.from_room_name','$product_details.pallet','to_floorlevel','1054157AYCmJL','Portuguese\x20(BR)','$product_details.expiry_date','Rack\x20F','back','log','split','product_stock','batch_code','../models/all_models','/transfer/view','English\x20(US)','aggregate','to_warehouse','$product_details.rack','$product_details.storage','$product_details.production_date','87585zprDzl','to_prod_isle','$product_details.batch_code','warehouse','Portuguese','$product_details.bin','$room','max_per_unit','role','error','product_code3','from_rack','27KtSQRa','redirect','to_quantity','then','11GXYoBq','rak','from_prod_pallet','English','RoomAssigned','language','prod_cat','map','$product_details.isle','get','status','$from_warehouse','product_name','Arabic\x20(ae)','to_room','express','Receiving\x20Area','$date','product_details','from_floorlevel','edit_transfer','2vGMdjK','_id','edit_transfer_view','$to_warehouse','from_room','12137020DciOjn','92jjSuZH','Transfer\x20Edit\x20Successfully','from_storage','from_quantity','body','type','/preview/:id','/picking_list/PDF_transfer_rm/','$product_details.unit','errors','slice','French','Floor','$product_details.maxPerUnit','catch','$product_details._id','length','German','Raw\x20Materials','$product_details.level','7230168pWDeSh','production_date','to_room_name','save','bin','/transfer/preview/','from_types','Rack\x20A','to_prod_qty','unit','product','$product.to_room_name','findById','$product_details.primary_code','Hindi','getFullYear','/view','product_code','maxProducts','find','TRF-','Return\x20Rooms','from_rak','finalize','params','prod_name','toString','master','ToRoomAssigned','forEach','user','floorlevel','message','$product_details.secondary_unit','staff','secondary_unit','from_bay','to_types','/CheckingWarehouse','secondary_code','post','from_prod_isle','filter'];a0_0x5b05=function(){return _0x122237;};return a0_0x5b05();}function a0_0x1185(_0x55971f,_0x1f9101){var _0x5b05e8=a0_0x5b05();return a0_0x1185=function(_0x1185c4,_0xc83850){_0x1185c4=_0x1185c4-0x125;var _0x121a68=_0x5b05e8[_0x1185c4];return _0x121a68;},a0_0x1185(_0x55971f,_0x1f9101);}router[a0_0x36bb1e(0x175)]('/view/:id',auth,async(_0x27b2eb,_0x4ad3e8)=>{var _0x112285=a0_0x36bb1e;try{const {username:_0x2dd411,email:_0x5d2c01,role:_0xfbb412}=_0x27b2eb[_0x112285(0x1b9)],_0x26ef9e=_0x27b2eb[_0x112285(0x1b9)],_0x440da1=await profile['findOne']({'email':_0x26ef9e[_0x112285(0x1dc)]}),_0x34c863=await master_shop[_0x112285(0x1ae)]();console[_0x112285(0x150)](_0x112285(0x1b6),_0x34c863);const _0x5d831c=await transfers[_0x112285(0x1a7)](_0x27b2eb[_0x112285(0x1b3)]['id']);let _0x115cc9;if(_0x26ef9e[_0x112285(0x164)]==_0x112285(0x1bd)){const _0x4d9954=await staff['findOne']({'email':_0x26ef9e[_0x112285(0x1dc)]});_0x115cc9=await warehouse['find']({'status':_0x112285(0x1e3),'name':_0x4d9954[_0x112285(0x15f)],'warehouse_category':_0x112285(0x199)});}else _0x115cc9=await warehouse['find']({'status':_0x112285(0x1e3),'warehouse_category':_0x112285(0x199)});const _0xe5fd4=await warehouse['aggregate']([{'$match':{'name':_0x5d831c[_0x112285(0x129)],'room':_0x5d831c['from_room']}},{'$unwind':'$product_details'},{'$group':{'_id':_0x112285(0x196),'name':{'$first':_0x112285(0x13d)},'product_stock':{'$first':_0x112285(0x1cc)},'bay':{'$first':_0x112285(0x1db)},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x112285(0x1de)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x112285(0x1d6)},'product_code':{'$first':_0x112285(0x131)},'storage':{'$first':_0x112285(0x15a)},'rack':{'$first':_0x112285(0x159)}}}]),_0x10b5aa=await product[_0x112285(0x1ae)]({}),_0x38aa73=BayBinSelected(_0x5d831c[_0x112285(0x158)],_0x5d831c[_0x112285(0x17a)]);if(_0x34c863[0x0][_0x112285(0x171)]==_0x112285(0x156)){var _0x4f9ab0=users[_0x112285(0x16f)];console[_0x112285(0x150)](_0x4f9ab0);}else{if(_0x34c863[0x0][_0x112285(0x171)]=='Hindi')var _0x4f9ab0=users['Hindi'];else{if(_0x34c863[0x0]['language']==_0x112285(0x198))var _0x4f9ab0=users[_0x112285(0x198)];else{if(_0x34c863[0x0][_0x112285(0x171)]==_0x112285(0x1e4))var _0x4f9ab0=users[_0x112285(0x1e4)];else{if(_0x34c863[0x0][_0x112285(0x171)]=='French')var _0x4f9ab0=users[_0x112285(0x192)];else{if(_0x34c863[0x0][_0x112285(0x171)]==_0x112285(0x14c))var _0x4f9ab0=users[_0x112285(0x160)];else{if(_0x34c863[0x0][_0x112285(0x171)]=='Chinese')var _0x4f9ab0=users[_0x112285(0x1c8)];else{if(_0x34c863[0x0][_0x112285(0x171)]==_0x112285(0x179))var _0x4f9ab0=users[_0x112285(0x126)];}}}}}}}_0x4ad3e8['render'](_0x112285(0x180),{'success':_0x27b2eb[_0x112285(0x142)]('success'),'errors':_0x27b2eb[_0x112285(0x142)](_0x112285(0x190)),'role':_0x26ef9e,'profile':_0x440da1,'master_shop':_0x34c863,'warehouse':_0x115cc9,'transfer':_0x5d831c,'stock':_0xe5fd4,'unit':_0x10b5aa,'language':_0x4f9ab0});}catch(_0x3bba68){console[_0x112285(0x150)](_0x3bba68);}}),router[a0_0x36bb1e(0x1c3)](a0_0x36bb1e(0x128),auth,async(_0x3f500e,_0xb12e1d)=>{var _0x520add=a0_0x36bb1e;try{const _0x230b34=_0x3f500e[_0x520add(0x1b3)]['id'];console[_0x520add(0x150)](_0x3f500e[_0x520add(0x18b)]);const _0x1a88ab=await transfers[_0x520add(0x1a7)](_0x230b34);console[_0x520add(0x150)]('transfer_data',_0x1a88ab);const {date:_0x61ec7d,from_warehouse:_0x31a2a0,FromRoom_name:_0x2f67da,to_warehouse:_0x1ed73c,ToRoom_name:_0x55d59e,prod_name:_0x1fa0b0,from_prod_qty:_0x35cff8,from_prod_level:_0x349d22,from_prod_isle:_0x541614,from_prod_pallet:_0x1bbb3f,to_prod_qty:_0x53ce88,to_prod_level:_0x11a283,to_prod_isle:_0x1a3aad,to_prod_pallet:_0x4ff4ae,primary_code:_0x133668,secondary_code:_0x4bd709,product_code3:_0x6c0910,note:_0x3aa00f,invoice:_0xed1d2c,expiry_date:_0x40e8fc}=_0x3f500e['body'];if(typeof _0x1fa0b0==_0x520add(0x12f))var _0x448583=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1b4)]],_0x235306=[_0x3f500e[_0x520add(0x18b)]['from_prod_qty']],_0x1dd61a=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1df)]],_0x3f2e8d=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1c4)]],_0x466543=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x16e)]],_0x64dc07=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1a1)]],_0x515066=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1a3)]],_0x417c6b=[_0x3f500e['body'][_0x520add(0x1da)]],_0x8d41d7=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x15d)]],_0x1dfa15=[_0x3f500e[_0x520add(0x18b)]['to_prod_pallet']],_0x5082ba=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1c0)]],_0x294698=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x13b)]],_0x1a8135=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x16d)]],_0x477f14=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1cf)]],_0x3efb90=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1c2)]],_0x219eb7=[_0x3f500e['body'][_0x520add(0x166)]],_0x5be849=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1d3)]],_0x518663=[_0x3f500e[_0x520add(0x18b)]['unit']],_0x56ec65=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1be)]],_0x1183ba=[_0x3f500e[_0x520add(0x18b)]['batch_code']],_0x583836=[_0x3f500e[_0x520add(0x18b)][_0x520add(0x1d8)]],_0x45f0ee=[_0x3f500e['body'][_0x520add(0x189)]],_0x5bdd80=[_0x3f500e[_0x520add(0x18b)]['from_rak']];else var _0x448583=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x1b4)]],_0x294698=[..._0x3f500e[_0x520add(0x18b)]['storage']],_0x1a8135=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x16d)]],_0x64dc07=[..._0x3f500e['body'][_0x520add(0x1a1)]],_0x5082ba=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x1c0)]],_0x235306=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x1dd)]],_0x1dd61a=[..._0x3f500e['body']['from_prod_level']],_0x3f2e8d=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x1c4)]],_0x466543=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x16e)]],_0x515066=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x1a3)]],_0x417c6b=[..._0x3f500e[_0x520add(0x18b)]['to_prod_level']],_0x8d41d7=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x15d)]],_0x1dfa15=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x13c)]],_0x477f14=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x1cf)]],_0x3efb90=[..._0x3f500e[_0x520add(0x18b)]['secondary_code']],_0x219eb7=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x166)]],_0x5be849=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x1d3)]],_0x518663=[..._0x3f500e[_0x520add(0x18b)]['unit']],_0x56ec65=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x1be)]],_0x1183ba=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x153)]],_0x583836=[..._0x3f500e[_0x520add(0x18b)]['expiry_date']],_0x45f0ee=[..._0x3f500e['body'][_0x520add(0x189)]],_0x5bdd80=[..._0x3f500e[_0x520add(0x18b)][_0x520add(0x1b1)]];const _0x249782=_0x448583[_0x520add(0x173)](_0x5508d7=>{return _0x5508d7={'product_name':_0x5508d7};});_0x235306[_0x520add(0x1b8)]((_0x367280,_0x5e57a4)=>{var _0x2ef567=_0x520add;_0x249782[_0x5e57a4][_0x2ef567(0x18a)]=_0x367280;}),_0x1dd61a[_0x520add(0x1b8)]((_0x1f07e3,_0x1dacb1)=>{var _0x387987=_0x520add;_0x249782[_0x1dacb1][_0x387987(0x1bf)]=_0x1f07e3;}),_0x3f2e8d[_0x520add(0x1b8)]((_0x592db9,_0x148519)=>{var _0x42cf92=_0x520add;_0x249782[_0x148519][_0x42cf92(0x12c)]=_0x592db9;}),_0x466543[_0x520add(0x1b8)]((_0x1fb192,_0x185aba)=>{var _0x5ce007=_0x520add;_0x249782[_0x185aba][_0x5ce007(0x17f)]=_0x1fb192;}),_0x515066[_0x520add(0x1b8)]((_0x4cb77d,_0x123f85)=>{_0x249782[_0x123f85]['to_quantity']=_0x4cb77d;}),_0x417c6b[_0x520add(0x1b8)]((_0x1509d5,_0x119b5b)=>{var _0x351254=_0x520add;_0x249782[_0x119b5b][_0x351254(0x1c7)]=_0x1509d5;}),_0x8d41d7[_0x520add(0x1b8)]((_0x19f46e,_0x3458f0)=>{var _0x4a35f3=_0x520add;_0x249782[_0x3458f0][_0x4a35f3(0x1e1)]=_0x19f46e;}),_0x1dfa15[_0x520add(0x1b8)]((_0x10efa4,_0x23febd)=>{var _0x5ad814=_0x520add;_0x249782[_0x23febd][_0x5ad814(0x14a)]=_0x10efa4;}),_0x477f14[_0x520add(0x1b8)]((_0x2d30c8,_0x301f70)=>{var _0x1d2acb=_0x520add;_0x249782[_0x301f70][_0x1d2acb(0x1cf)]=_0x2d30c8;}),_0x3efb90[_0x520add(0x1b8)]((_0x29f127,_0x39a1dd)=>{var _0x16bb43=_0x520add;_0x249782[_0x39a1dd][_0x16bb43(0x1c2)]=_0x29f127;}),_0x219eb7[_0x520add(0x1b8)]((_0x14d0c4,_0x4204fd)=>{var _0x299c7d=_0x520add;_0x249782[_0x4204fd][_0x299c7d(0x1ac)]=_0x14d0c4;}),_0x5be849[_0x520add(0x1b8)]((_0x505fd2,_0x3c8dfa)=>{var _0x53f0ef=_0x520add;_0x249782[_0x3c8dfa][_0x53f0ef(0x1ad)]=_0x505fd2;}),_0x518663[_0x520add(0x1b8)]((_0x520c34,_0xbd6fb9)=>{var _0x4b0bd3=_0x520add;_0x249782[_0xbd6fb9][_0x4b0bd3(0x1a4)]=_0x520c34;}),_0x56ec65[_0x520add(0x1b8)]((_0x85b9c8,_0x31166b)=>{var _0x11c12a=_0x520add;_0x249782[_0x31166b][_0x11c12a(0x1be)]=_0x85b9c8;}),_0x1183ba[_0x520add(0x1b8)]((_0x4f9315,_0x1915e8)=>{var _0x97c942=_0x520add;_0x249782[_0x1915e8][_0x97c942(0x153)]=_0x4f9315;}),_0x583836[_0x520add(0x1b8)]((_0x336b0c,_0x591415)=>{_0x249782[_0x591415]['expiry_date']=_0x336b0c;}),_0x294698[_0x520add(0x1b8)]((_0x1cf096,_0x193ea4)=>{var _0x1ce157=_0x520add;_0x249782[_0x193ea4][_0x1ce157(0x13b)]=_0x1cf096;}),_0x1a8135[_0x520add(0x1b8)]((_0x4c88c2,_0x331da4)=>{_0x249782[_0x331da4]['rack']=_0x4c88c2;}),_0x64dc07[_0x520add(0x1b8)]((_0x34715b,_0x442dd9)=>{var _0x23da2c=_0x520add;_0x249782[_0x442dd9][_0x23da2c(0x1a1)]=_0x34715b;}),_0x5082ba['forEach']((_0x299530,_0x770d0d)=>{var _0x2d6338=_0x520add;_0x249782[_0x770d0d][_0x2d6338(0x1c0)]=_0x299530;}),_0x45f0ee[_0x520add(0x1b8)]((_0x389452,_0xe44357)=>{var _0x298ce2=_0x520add;_0x249782[_0xe44357][_0x298ce2(0x189)]=_0x389452;}),_0x5bdd80[_0x520add(0x1b8)]((_0x2ef932,_0x5b59de)=>{_0x249782[_0x5b59de]['from_rack']=_0x2ef932;});const _0x1889a9=_0x249782[_0x520add(0x1c5)](_0x397579=>_0x397579['to_quantity']!=='0'&&_0x397579['to_quantity']!==''||_0x397579[_0x520add(0x14a)]!=='0'&&_0x397579[_0x520add(0x14a)]!=='');var _0x19cd03=0x0;_0x1889a9[_0x520add(0x1b8)](_0x319b56=>{var _0x16aff9=_0x520add;parseInt(_0x319b56[_0x16aff9(0x18a)])<parseInt(_0x319b56[_0x16aff9(0x16a)])&&_0x19cd03++;});if(_0x19cd03!=0x0)return _0x3f500e[_0x520add(0x142)](_0x520add(0x190),'Must\x20not\x20be\x20greater\x20than\x20stock\x20Qty'),_0xb12e1d[_0x520add(0x169)](_0x520add(0x14f));const _0x3445f3=await warehouse[_0x520add(0x125)]({'name':_0x1a88ab[_0x520add(0x129)],'room':_0x1a88ab[_0x520add(0x185)]});_0x1a88ab[_0x520add(0x1a5)][_0x520add(0x1b8)](_0x39c4d4=>{var _0x1e811a=_0x520add;if(_0x39c4d4[_0x1e811a(0x16a)]>0x0){const _0x3f85b0=_0x3445f3[_0x1e811a(0x17e)][_0x1e811a(0x173)](_0x57ad61=>{var _0x3dc3ef=_0x1e811a;_0x57ad61[_0x3dc3ef(0x178)]==_0x39c4d4['product_name']&&_0x57ad61[_0x3dc3ef(0x1ba)]==_0x39c4d4['from_floorlevel']&&_0x57ad61[_0x3dc3ef(0x18c)]==_0x39c4d4['from_types']&&_0x57ad61[_0x3dc3ef(0x19f)]==_0x39c4d4[_0x3dc3ef(0x12c)]&&_0x57ad61['bay']==_0x39c4d4[_0x3dc3ef(0x1bf)]&&_0x57ad61[_0x3dc3ef(0x145)]==_0x39c4d4[_0x3dc3ef(0x167)]&&_0x57ad61[_0x3dc3ef(0x13b)]==_0x39c4d4['from_storage']&&(_0x57ad61[_0x3dc3ef(0x152)]=parseInt(_0x57ad61[_0x3dc3ef(0x152)])+parseInt(_0x39c4d4[_0x3dc3ef(0x16a)]));});}}),await _0x3445f3[_0x520add(0x19e)]();const _0x40b795=await warehouse[_0x520add(0x125)]({'name':_0x1a88ab[_0x520add(0x158)],'room':_0x1a88ab[_0x520add(0x17a)]});_0x1a88ab[_0x520add(0x1a5)][_0x520add(0x1b8)](_0x31aadc=>{var _0x3a07e7=_0x520add;if(_0x31aadc[_0x3a07e7(0x16a)]>0x0){const _0x3ed902=_0x40b795[_0x3a07e7(0x17e)][_0x3a07e7(0x173)](_0x43283f=>{var _0x8926fb=_0x3a07e7;_0x43283f[_0x8926fb(0x178)]==_0x31aadc[_0x8926fb(0x178)]&&_0x43283f[_0x8926fb(0x1ba)]==_0x31aadc['to_floorlevel']&&_0x43283f[_0x8926fb(0x18c)]==_0x31aadc['to_types']&&_0x43283f['bin']==_0x31aadc['to_bin']&&_0x43283f[_0x8926fb(0x12a)]==_0x31aadc[_0x8926fb(0x1c7)]&&_0x43283f[_0x8926fb(0x145)]==_0x31aadc['rack']&&_0x43283f[_0x8926fb(0x13b)]==_0x31aadc[_0x8926fb(0x13b)]&&(_0x43283f['product_stock']=parseInt(_0x43283f[_0x8926fb(0x152)])-parseInt(_0x31aadc['to_quantity']));});}}),await _0x40b795[_0x520add(0x19e)](),_0x1a88ab[_0x520add(0x1d1)]=_0x61ec7d,_0x1a88ab[_0x520add(0x129)]=_0x31a2a0,_0x1a88ab[_0x520add(0x158)]=_0x1ed73c,_0x1a88ab[_0x520add(0x1a5)]=_0x1889a9,_0x1a88ab[_0x520add(0x146)]=_0x3aa00f,_0x1a88ab[_0x520add(0x144)]=_0xed1d2c;const _0x14dbbf=await _0x1a88ab[_0x520add(0x19e)]();console[_0x520add(0x150)](_0x14dbbf);const _0x1191b2=await warehouse[_0x520add(0x125)]({'name':_0x31a2a0,'room':_0x2f67da});_0x14dbbf[_0x520add(0x1a5)][_0x520add(0x1b8)](_0x43581d=>{var _0x467d9a=_0x520add;if(_0x43581d['to_quantity']>0x0){const _0x4be3b4=_0x1191b2[_0x467d9a(0x17e)][_0x467d9a(0x173)](_0x206699=>{var _0x181367=_0x467d9a;_0x206699[_0x181367(0x178)]==_0x43581d[_0x181367(0x178)]&&_0x206699[_0x181367(0x1ba)]==_0x43581d[_0x181367(0x17f)]&&_0x206699['type']==_0x43581d[_0x181367(0x1a1)]&&_0x206699[_0x181367(0x19f)]==_0x43581d[_0x181367(0x12c)]&&_0x206699[_0x181367(0x12a)]==_0x43581d[_0x181367(0x1bf)]&&_0x206699[_0x181367(0x145)]==_0x43581d['from_rack']&&_0x206699['storage']==_0x43581d[_0x181367(0x189)]&&(_0x206699[_0x181367(0x152)]=parseInt(_0x206699[_0x181367(0x152)])-parseInt(_0x43581d[_0x181367(0x16a)]));});}}),await _0x1191b2['save']();const _0x4e0e84=await warehouse[_0x520add(0x125)]({'name':_0x1ed73c,'room':_0x55d59e});_0x14dbbf[_0x520add(0x1a5)]['forEach'](_0x5899c0=>{var _0x4d896c=_0x520add;if(_0x5899c0[_0x4d896c(0x16a)]>0x0){var _0x5c254b=0x0;const _0xa0c9af=_0x4e0e84[_0x4d896c(0x17e)][_0x4d896c(0x173)](_0x3755a3=>{var _0x270dca=_0x4d896c;_0x3755a3['product_name']==_0x5899c0[_0x270dca(0x178)]&&_0x3755a3[_0x270dca(0x1ba)]==_0x5899c0[_0x270dca(0x14a)]&&_0x3755a3['type']==_0x5899c0['to_types']&&_0x3755a3['bin']==_0x5899c0[_0x270dca(0x1e1)]&&_0x3755a3[_0x270dca(0x12a)]==_0x5899c0[_0x270dca(0x1c7)]&&_0x3755a3['rack']==_0x5899c0['rack']&&_0x3755a3[_0x270dca(0x13b)]==_0x5899c0[_0x270dca(0x13b)]&&(_0x3755a3[_0x270dca(0x152)]=parseInt(_0x3755a3[_0x270dca(0x152)])+parseInt(_0x5899c0['to_quantity']),_0x5c254b++);});_0x5c254b=='0'&&(_0x4e0e84[_0x4d896c(0x17e)]=_0x4e0e84[_0x4d896c(0x17e)]['concat']({'product_name':_0x5899c0['product_name'],'product_stock':_0x5899c0['to_quantity'],'bay':_0x5899c0[_0x4d896c(0x1c7)],'bin':_0x5899c0[_0x4d896c(0x1e1)],'type':_0x5899c0[_0x4d896c(0x1c0)],'floorlevel':_0x5899c0[_0x4d896c(0x14a)],'storage':_0x5899c0[_0x4d896c(0x13b)],'rack':_0x5899c0[_0x4d896c(0x145)],'product_code':_0x5899c0['product_code'],'primary_code':_0x5899c0[_0x4d896c(0x1cf)],'secondary_code':_0x5899c0[_0x4d896c(0x1c2)],'maxProducts':_0x5899c0['maxProducts'],'storage':_0x5899c0['storage'],'rack':_0x5899c0[_0x4d896c(0x145)]}));}}),await _0x4e0e84[_0x520add(0x19e)](),_0x3f500e[_0x520add(0x142)](_0x520add(0x12d),_0x520add(0x188)),_0xb12e1d['redirect'](_0x520add(0x155));}catch(_0x3601b8){console['log'](_0x3601b8);}}),router[a0_0x36bb1e(0x1c3)](a0_0x36bb1e(0x133),async(_0x2a93a7,_0x44bfbd)=>{var _0x38cc4e=a0_0x36bb1e;const {FromWareHouse:_0xd1e606,FromRoom:_0xd2d7e8,ToWarehouse:_0x42c98d,ToRoom:_0x2e7379,primary_code:_0x4090f3,Roomslist:_0x44a02e}=_0x2a93a7['body'],_0x5688c5=_0x44a02e[_0x38cc4e(0x151)](','),_0x1afd25=[];async function _0x136c9a(_0x43d916){var _0x3365c5=_0x38cc4e;const _0x4ff837=await warehouse[_0x3365c5(0x157)]([{'$match':{'name':_0xd1e606,'room':_0x43d916}},{'$unwind':_0x3365c5(0x1ca)},{'$match':{'product_details.primary_code':_0x4090f3}},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'instock':{'$first':_0x3365c5(0x1cc)},'primary_code':{'$first':_0x3365c5(0x1a8)},'secondary_code':{'$first':_0x3365c5(0x1d6)},'product_code':{'$first':_0x3365c5(0x131)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x3365c5(0x161)},'type':{'$first':_0x3365c5(0x12b)},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x3365c5(0x1bc)},'storage':{'$first':'$product_details.storage'},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x3365c5(0x14d)},'production_date':{'$first':_0x3365c5(0x15b)},'batch_code':{'$first':_0x3365c5(0x15e)},'maxPerUnit':{'$first':'$product_details.maxPerUnit'},'prod_cat':{'$first':'P'},'roomNamed':{'$first':_0x3365c5(0x162)},'maxProducts':{'$first':_0x3365c5(0x1e0)}}}]),_0xcabdd5=await warehouse[_0x3365c5(0x157)]([{'$match':{'name':_0xd1e606,'room':_0x43d916}},{'$unwind':_0x3365c5(0x1ca)},{'$match':{'product_details.secondary_code':_0x4090f3}},{'$group':{'_id':_0x3365c5(0x196),'name':{'$first':_0x3365c5(0x13d)},'instock':{'$first':_0x3365c5(0x1cc)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x3365c5(0x1d6)},'product_code':{'$first':_0x3365c5(0x131)},'level':{'$first':'$product_details.bay'},'isle':{'$first':_0x3365c5(0x161)},'type':{'$first':_0x3365c5(0x12b)},'pallet':{'$first':_0x3365c5(0x1de)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x3365c5(0x1bc)},'storage':{'$first':_0x3365c5(0x15a)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x3365c5(0x14d)},'production_date':{'$first':_0x3365c5(0x15b)},'batch_code':{'$first':_0x3365c5(0x15e)},'maxPerUnit':{'$first':_0x3365c5(0x194)},'prod_cat':{'$first':'S'},'roomNamed':{'$first':_0x3365c5(0x162)},'maxProducts':{'$first':_0x3365c5(0x1e0)}}}]);if(_0x4ff837[_0x3365c5(0x197)]>0x0)_0x1afd25['push'](_0x4ff837);else _0xcabdd5[_0x3365c5(0x197)]>0x0&&_0x1afd25[_0x3365c5(0x13a)](_0xcabdd5);}const _0x1f3d45=_0x5688c5['map'](_0x46108f=>_0x136c9a(_0x46108f));await Promise[_0x38cc4e(0x137)](_0x1f3d45),_0x44bfbd[_0x38cc4e(0x1ce)](_0x1afd25);}),router[a0_0x36bb1e(0x1c3)]('/barcode_scanner2',async(_0x13a359,_0x35f586)=>{var _0x1ce1ab=a0_0x36bb1e;try{const {FromWareHouse:_0x225ba0,FromRoom:_0x1d0d61,ToWarehouse:_0x4f9db8,ToRoom:_0x4dab60,secondary_code:_0x5d348b}=_0x13a359[_0x1ce1ab(0x18b)],_0x2f9630=await warehouse[_0x1ce1ab(0x157)]([{'$match':{'name':_0x225ba0}},{'$unwind':_0x1ce1ab(0x1ca)},{'$match':{'product_details.secondary_code':_0x5d348b}},{'$group':{'_id':_0x1ce1ab(0x196),'name':{'$first':_0x1ce1ab(0x13d)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x1ce1ab(0x1d6)},'product_code':{'$first':_0x1ce1ab(0x131)},'instock':{'$first':'$product_details.product_stock'},'warehouse':{'$first':'$name'},'level':{'$first':_0x1ce1ab(0x19a)},'isle':{'$first':_0x1ce1ab(0x174)},'pallet':{'$first':_0x1ce1ab(0x149)},'maxProducts':{'$first':_0x1ce1ab(0x1e0)},'unit':{'$first':_0x1ce1ab(0x18f)}}}]);_0x35f586[_0x1ce1ab(0x176)](0xc8)['json'](_0x2f9630);}catch(_0x3cdeb7){_0x35f586[_0x1ce1ab(0x176)](0x194)[_0x1ce1ab(0x1ce)]({'message':_0x3cdeb7['message']});}}),router[a0_0x36bb1e(0x1c3)](a0_0x36bb1e(0x127),async(_0x14c0c0,_0x5da963)=>{var _0x45d686=a0_0x36bb1e;try{const {FromWareHouse:_0x550dd1,FromRoom:_0x25b623,ToWarehouse:_0x301d15,ToRoom:_0x55603e,product_code:_0x1788d0}=_0x14c0c0['body'],_0x3801c4=await warehouse[_0x45d686(0x157)]([{'$match':{'name':_0x550dd1}},{'$unwind':_0x45d686(0x1ca)},{'$match':{'product_details.product_code':_0x1788d0}},{'$group':{'_id':_0x45d686(0x196),'name':{'$first':_0x45d686(0x13d)},'primary_code':{'$first':_0x45d686(0x1a8)},'secondary_code':{'$first':'$product_details.secondary_code'},'product_code':{'$first':_0x45d686(0x131)},'instock':{'$first':_0x45d686(0x1cc)},'warehouse':{'$first':'$name'},'level':{'$first':_0x45d686(0x19a)},'isle':{'$first':'$product_details.isle'},'pallet':{'$first':_0x45d686(0x149)},'maxProducts':{'$first':_0x45d686(0x1e0)},'unit':{'$first':_0x45d686(0x18f)}}}]);_0x5da963['status'](0xc8)['json'](_0x3801c4);}catch(_0x4dbec6){_0x5da963[_0x45d686(0x176)](0x194)[_0x45d686(0x1ce)]({'message':_0x4dbec6['message']});}}),router[a0_0x36bb1e(0x1c3)](a0_0x36bb1e(0x1c1),async(_0x514d59,_0x1a606c)=>{var _0x5679c4=a0_0x36bb1e;const {level:_0x33efbc,isle:_0x163f70,pallet:_0x44fe66,warehouses:_0x2736cc,room:_0x51daf6}=_0x514d59['body'];try{const _0x3b755a=await warehouse[_0x5679c4(0x157)]([{'$match':{'name':_0x2736cc,'room':_0x51daf6}},{'$unwind':'$product_details'},{'$match':{'product_details.level':parseInt(_0x33efbc),'product_details.isle':_0x163f70,'product_details.pallet':parseInt(_0x44fe66)}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x5679c4(0x13d)},'product_stock':{'$first':_0x5679c4(0x1cc)},'level':{'$first':_0x5679c4(0x19a)},'isle':{'$first':_0x5679c4(0x174)},'pallet':{'$first':_0x5679c4(0x149)},'maxProducts':{'$first':'$product_details.maxProducts'}}}]);_0x1a606c[_0x5679c4(0x176)](0xc8)[_0x5679c4(0x1ce)](_0x3b755a);}catch(_0x33eaec){_0x1a606c['status'](0x194)[_0x5679c4(0x1ce)]({'message':_0x33eaec[_0x5679c4(0x1bb)]});}}),module[a0_0x36bb1e(0x1cd)]=router;