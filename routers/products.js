const a0_0x30e8c0=a0_0x4da1;(function(_0x4db25e,_0x5b4d2b){const _0x1a31ec=a0_0x4da1,_0x23964b=_0x4db25e();while(!![]){try{const _0xce4d1f=-parseInt(_0x1a31ec(0x1f2))/0x1*(-parseInt(_0x1a31ec(0x21f))/0x2)+-parseInt(_0x1a31ec(0x277))/0x3+parseInt(_0x1a31ec(0x24a))/0x4*(-parseInt(_0x1a31ec(0x272))/0x5)+parseInt(_0x1a31ec(0x275))/0x6+parseInt(_0x1a31ec(0x208))/0x7*(parseInt(_0x1a31ec(0x24f))/0x8)+parseInt(_0x1a31ec(0x1f4))/0x9+-parseInt(_0x1a31ec(0x20e))/0xa;if(_0xce4d1f===_0x5b4d2b)break;else _0x23964b['push'](_0x23964b['shift']());}catch(_0xc42a6a){_0x23964b['push'](_0x23964b['shift']());}}}(a0_0xbbdc,0xd64ed));const express=require(a0_0x30e8c0(0x212)),res=require(a0_0x30e8c0(0x22c)),app=express(),router=express[a0_0x30e8c0(0x1d4)](),multer=require(a0_0x30e8c0(0x1fa)),{profile,master_shop,categories,brands,units,product,purchases,warehouse}=require('../models/all_models'),auth=require(a0_0x30e8c0(0x204)),users=require('../public/language/languages.json'),excelJS=require('exceljs'),xlsx=require(a0_0x30e8c0(0x1f8));function a0_0xbbdc(){const _0x2bae79=['MaxperUnits','PAlQty','/brands/delete/:id','English\x20(US)','Arabic\x20(ae)','setHeader','products','Product_Code','secondary_code','name','brand','image','aggregate','Portuguese','message','post','Chinese','Enabled','Primary_Code','Workbook','/brands/:id','3812ipdHLa','filename','alertquantity','hello','Portuguese\x20(BR)','8963096HGjdeh','length','now','\x20unit\x20is\x20alredy\x20added.\x20please\x20choose\x20another','send','Content-Type','categ','$secondary_unit','/products/units','secondary_unit','body','max_number_per_units','product\x20update\x20successfully','Spanish','flash','\x20categories\x20is\x20add\x20successfully','sku','file','_id','categories_edit','/units','/categories/delete/:id','unit','/select_data','errors','product_details.product_name','PName','utils','\x20brand\x20is\x20alredy\x20added.\x20please\x20choose\x20another','findById','product_barcode','Units','brand\x20data\x20delete\x20successfully','category','brands','2670gcamUt','findOne','Content-Disposition','458196bEZRjk','public/Migration/','1076250jtxLtJ','Products','/products_export_migrate_file','master','Router','language','Category','status','/view/:id','All','email','unit\x20data\x20update\x20successfully','PBrands','Alert_QTY','$_id','findByIdAndUpdate','Arabic','/units/:id','readFile','columns','prod_categ','warehouse','/categories','English','PSecondaryUnits','$category','/view','product_stock','French','Products\x20find_data','edit\x20Product\x20master','$product_details.product_name','$product_category','/products/categories','16591DrrFbC','Brands','9088938qSNViR','diskStorage','/categories/:id','exports','xlsx','get','multer','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','unit\x20data\x20delete\x20successfully','user','/view/add_products','product_code','CBM','German','stock','\x20added\x20successfully','../middleware/auth','/products_import_migrate_file','single','long','7BaOxFY','Hindi','$product_details.product_stock','params','originalname','Product_Name','6602700TzOaOK','defaultProduct.avif','brand\x20data\x20update\x20successfully','PCat','express','add_product','$product_name','primary_code','save','Maximum_Stocks','\x20unit\x20is\x20add\x20successfully','json','success','forEach','redirect','$product_details','log','24JwfDKp','map','migrate_product_fule','categories','/products/view','PUnits','product\x20add\x20successfully','/units/delete/:id','product\x20edit','ProductCode','edit_product','/products/brands','units','express/lib/response','numeric','Secondary_Units','public/Migration','product_docs','render','$brand','findByIdAndDelete','find'];a0_0xbbdc=function(){return _0x2bae79;};return a0_0xbbdc();}router[a0_0x30e8c0(0x1f9)](a0_0x30e8c0(0x1e6),auth,async(_0x18cc07,_0x51f484)=>{const _0x2c49fb=a0_0x30e8c0;try{const {username:_0xb2a489,email:_0x40dfbd,role:_0x4c7929}=_0x18cc07[_0x2c49fb(0x1fd)],_0x376996=_0x18cc07[_0x2c49fb(0x1fd)],_0x5241df=await profile['findOne']({'email':_0x376996['email']}),_0x112fb5=await master_shop[_0x2c49fb(0x234)]();console[_0x2c49fb(0x21e)](_0x2c49fb(0x1d3),_0x112fb5);const _0x1b9bc4=await categories['find']();if(_0x112fb5[0x0][_0x2c49fb(0x1d5)]==_0x2c49fb(0x238))var _0x42bae8=users[_0x2c49fb(0x1e7)];else{if(_0x112fb5[0x0][_0x2c49fb(0x1d5)]==_0x2c49fb(0x209))var _0x42bae8=users[_0x2c49fb(0x209)];else{if(_0x112fb5[0x0]['language']==_0x2c49fb(0x201))var _0x42bae8=users['German'];else{if(_0x112fb5[0x0][_0x2c49fb(0x1d5)]==_0x2c49fb(0x25c))var _0x42bae8=users[_0x2c49fb(0x25c)];else{if(_0x112fb5[0x0][_0x2c49fb(0x1d5)]==_0x2c49fb(0x1ec))var _0x42bae8=users['French'];else{if(_0x112fb5[0x0][_0x2c49fb(0x1d5)]=='Portuguese\x20(BR)')var _0x42bae8=users[_0x2c49fb(0x242)];else{if(_0x112fb5[0x0]['language']==_0x2c49fb(0x245))var _0x42bae8=users['Chinese'];else{if(_0x112fb5[0x0][_0x2c49fb(0x1d5)]==_0x2c49fb(0x239))var _0x42bae8=users[_0x2c49fb(0x1e0)];}}}}}}}_0x51f484['render'](_0x2c49fb(0x222),{'success':_0x18cc07[_0x2c49fb(0x25d)]('success'),'errors':_0x18cc07['flash'](_0x2c49fb(0x267)),'role':_0x376996,'profile':_0x5241df,'user':_0x1b9bc4,'master_shop':_0x112fb5,'language':_0x42bae8});}catch(_0x3a13e2){console[_0x2c49fb(0x21e)](_0x3a13e2);}}),router[a0_0x30e8c0(0x244)]('/categories',auth,async(_0x2621ce,_0x437d2e)=>{const _0x295c9f=a0_0x30e8c0;try{const {name:_0x1df210,products:_0x250c9b}=_0x2621ce[_0x295c9f(0x259)],_0x31b161=new categories({'name':_0x1df210,'products':_0x250c9b}),_0x3b3603=await categories[_0x295c9f(0x273)]({'name':_0x1df210});_0x3b3603?_0x2621ce[_0x295c9f(0x25d)](_0x295c9f(0x267),_0x1df210+'\x20categories\x20is\x20alredy\x20added.\x20please\x20choose\x20another'):_0x2621ce[_0x295c9f(0x25d)]('success',_0x1df210+_0x295c9f(0x25e));const _0x1851c8=await _0x31b161[_0x295c9f(0x216)]();_0x437d2e[_0x295c9f(0x21c)](_0x295c9f(0x1f1));}catch(_0x41bcf4){console[_0x295c9f(0x21e)](_0x41bcf4);}}),router['get'](a0_0x30e8c0(0x1f6),auth,async(_0x197a35,_0x40943b)=>{const _0x3724d5=a0_0x30e8c0;try{const {username:_0x398361,email:_0x559ff3,role:_0x16c1bb}=_0x197a35[_0x3724d5(0x1fd)],_0x53351b=_0x197a35[_0x3724d5(0x1fd)],_0x37938b=await profile[_0x3724d5(0x273)]({'email':_0x53351b[_0x3724d5(0x1da)]}),_0x38512a=await master_shop['find']();console[_0x3724d5(0x21e)](_0x3724d5(0x1d3),_0x38512a);const _0x1cbebc=_0x197a35[_0x3724d5(0x20b)]['id'];console[_0x3724d5(0x21e)](_0x1cbebc);const _0x1eba3f=await categories['findById'](_0x1cbebc);if(_0x38512a[0x0][_0x3724d5(0x1d5)]==_0x3724d5(0x238))var _0x306484=users[_0x3724d5(0x1e7)];else{if(_0x38512a[0x0][_0x3724d5(0x1d5)]==_0x3724d5(0x209))var _0x306484=users['Hindi'];else{if(_0x38512a[0x0]['language']==_0x3724d5(0x201))var _0x306484=users[_0x3724d5(0x201)];else{if(_0x38512a[0x0][_0x3724d5(0x1d5)]==_0x3724d5(0x25c))var _0x306484=users[_0x3724d5(0x25c)];else{if(_0x38512a[0x0][_0x3724d5(0x1d5)]==_0x3724d5(0x1ec))var _0x306484=users[_0x3724d5(0x1ec)];else{if(_0x38512a[0x0]['language']==_0x3724d5(0x24e))var _0x306484=users[_0x3724d5(0x242)];else{if(_0x38512a[0x0][_0x3724d5(0x1d5)]==_0x3724d5(0x245))var _0x306484=users[_0x3724d5(0x245)];else{if(_0x38512a[0x0][_0x3724d5(0x1d5)]==_0x3724d5(0x239))var _0x306484=users[_0x3724d5(0x1e0)];}}}}}}}_0x40943b[_0x3724d5(0x231)](_0x3724d5(0x222),{'success':_0x197a35[_0x3724d5(0x25d)](_0x3724d5(0x21a)),'errors':_0x197a35[_0x3724d5(0x25d)](_0x3724d5(0x267)),'role':_0x53351b,'profile':_0x37938b,'master_shop':_0x38512a,'user':_0x1eba3f,'language':_0x306484});}catch(_0x17c4a5){console[_0x3724d5(0x21e)](_0x17c4a5);}}),router['post'](a0_0x30e8c0(0x1f6),auth,async(_0xf0f4cb,_0x250197)=>{const _0x4f5e6d=a0_0x30e8c0;try{const _0x3a5018=_0xf0f4cb[_0x4f5e6d(0x20b)]['id'],_0x3f62bb=await categories[_0x4f5e6d(0x1df)](_0x3a5018,_0xf0f4cb['body']);_0xf0f4cb[_0x4f5e6d(0x25d)](_0x4f5e6d(0x21a),''+users[_0x4f5e6d(0x262)]),_0x250197['redirect']('/products/categories');}catch(_0x6f8ba7){console[_0x4f5e6d(0x21e)](_0x6f8ba7);}}),router[a0_0x30e8c0(0x1f9)](a0_0x30e8c0(0x264),auth,async(_0x5dad19,_0x32eb2b)=>{const _0x8effff=a0_0x30e8c0;try{const _0x513411=_0x5dad19['params']['id'],_0x4324aa=await categories[_0x8effff(0x233)](_0x513411);_0x5dad19[_0x8effff(0x25d)](_0x8effff(0x21a),'categories\x20data\x20delete\x20successfully'),_0x32eb2b[_0x8effff(0x21c)](_0x8effff(0x1f1));}catch(_0x138df3){console['log'](_0x138df3);}}),router[a0_0x30e8c0(0x1f9)]('/brands',auth,async(_0x4b0a08,_0x2448ee)=>{const _0x1553d5=a0_0x30e8c0;try{const {username:_0xa47429,email:_0x56c3d9,role:_0x3e78f1}=_0x4b0a08[_0x1553d5(0x1fd)],_0x441c7c=_0x4b0a08[_0x1553d5(0x1fd)],_0x2b734b=await profile['findOne']({'email':_0x441c7c[_0x1553d5(0x1da)]}),_0x124c33=await master_shop['find']();console[_0x1553d5(0x21e)](_0x1553d5(0x1d3),_0x124c33);const _0x3badfd=await brands[_0x1553d5(0x234)]();if(_0x124c33[0x0][_0x1553d5(0x1d5)]==_0x1553d5(0x238))var _0x486938=users['English'];else{if(_0x124c33[0x0][_0x1553d5(0x1d5)]==_0x1553d5(0x209))var _0x486938=users['Hindi'];else{if(_0x124c33[0x0][_0x1553d5(0x1d5)]==_0x1553d5(0x201))var _0x486938=users['German'];else{if(_0x124c33[0x0][_0x1553d5(0x1d5)]=='Spanish')var _0x486938=users[_0x1553d5(0x25c)];else{if(_0x124c33[0x0][_0x1553d5(0x1d5)]==_0x1553d5(0x1ec))var _0x486938=users['French'];else{if(_0x124c33[0x0][_0x1553d5(0x1d5)]==_0x1553d5(0x24e))var _0x486938=users[_0x1553d5(0x242)];else{if(_0x124c33[0x0][_0x1553d5(0x1d5)]==_0x1553d5(0x245))var _0x486938=users[_0x1553d5(0x245)];else{if(_0x124c33[0x0][_0x1553d5(0x1d5)]=='Arabic\x20(ae)')var _0x486938=users[_0x1553d5(0x1e0)];}}}}}}}_0x2448ee[_0x1553d5(0x231)](_0x1553d5(0x271),{'success':_0x4b0a08[_0x1553d5(0x25d)](_0x1553d5(0x21a)),'errors':_0x4b0a08[_0x1553d5(0x25d)](_0x1553d5(0x267)),'role':_0x441c7c,'profile':_0x2b734b,'master_shop':_0x124c33,'user':_0x3badfd,'language':_0x486938});}catch(_0x3015f2){console[_0x1553d5(0x21e)](_0x3015f2);}}),router['post']('/brands',auth,async(_0x47bf9b,_0x5b2a8a)=>{const _0x48bf23=a0_0x30e8c0;try{const {name:_0x4a98ce,products:_0x32890c}=_0x47bf9b[_0x48bf23(0x259)],_0xc3f5c4=new brands({'name':_0x4a98ce,'products':_0x32890c}),_0x3f729a=await brands[_0x48bf23(0x273)]({'name':_0x4a98ce});_0x3f729a?_0x47bf9b[_0x48bf23(0x25d)](_0x48bf23(0x267),_0x4a98ce+_0x48bf23(0x26b)):_0x47bf9b[_0x48bf23(0x25d)](_0x48bf23(0x21a),_0x4a98ce+'\x20brand\x20is\x20add\x20successfully');const _0x55b4da=await _0xc3f5c4[_0x48bf23(0x216)]();_0x5b2a8a[_0x48bf23(0x21c)](_0x48bf23(0x22a));}catch(_0x3784e6){console[_0x48bf23(0x21e)](_0x3784e6);}}),router[a0_0x30e8c0(0x1f9)](a0_0x30e8c0(0x249),auth,async(_0x51ef4b,_0x30fc01)=>{const _0xcd21ae=a0_0x30e8c0;try{const {username:_0x5d64e9,email:_0xefa99b,role:_0x72aa15}=_0x51ef4b['user'],_0x84ad95=_0x51ef4b[_0xcd21ae(0x1fd)],_0x1370d8=await profile[_0xcd21ae(0x273)]({'email':_0x84ad95['email']}),_0x5b0919=await master_shop['find']();console['log'](_0xcd21ae(0x1d3),_0x5b0919);const _0x5be73f=_0x51ef4b[_0xcd21ae(0x20b)]['id'];console['log'](_0x5be73f);const _0xd5c278=await brands['findById'](_0x5be73f);if(_0x5b0919[0x0]['language']==_0xcd21ae(0x238))var _0x2109d9=users[_0xcd21ae(0x1e7)];else{if(_0x5b0919[0x0]['language']=='Hindi')var _0x2109d9=users[_0xcd21ae(0x209)];else{if(_0x5b0919[0x0]['language']=='German')var _0x2109d9=users[_0xcd21ae(0x201)];else{if(_0x5b0919[0x0][_0xcd21ae(0x1d5)]==_0xcd21ae(0x25c))var _0x2109d9=users['Spanish'];else{if(_0x5b0919[0x0][_0xcd21ae(0x1d5)]==_0xcd21ae(0x1ec))var _0x2109d9=users[_0xcd21ae(0x1ec)];else{if(_0x5b0919[0x0]['language']==_0xcd21ae(0x24e))var _0x2109d9=users['Portuguese'];else{if(_0x5b0919[0x0][_0xcd21ae(0x1d5)]==_0xcd21ae(0x245))var _0x2109d9=users['Chinese'];else{if(_0x5b0919[0x0][_0xcd21ae(0x1d5)]=='Arabic\x20(ae)')var _0x2109d9=users[_0xcd21ae(0x1e0)];}}}}}}}_0x30fc01['render'](_0xcd21ae(0x271),{'success':_0x51ef4b[_0xcd21ae(0x25d)]('success'),'errors':_0x51ef4b[_0xcd21ae(0x25d)](_0xcd21ae(0x267)),'role':_0x84ad95,'profile':_0x1370d8,'master_shop':_0x5b0919,'user':_0xd5c278,'language':_0x2109d9});}catch(_0x48836b){console[_0xcd21ae(0x21e)](_0x48836b);}}),router[a0_0x30e8c0(0x244)](a0_0x30e8c0(0x249),auth,async(_0x5dec5f,_0xbf9ebf)=>{const _0x3b2b14=a0_0x30e8c0;try{const _0xdd622e=_0x5dec5f['params']['id'],_0x24c381=await brands[_0x3b2b14(0x1df)](_0xdd622e,_0x5dec5f[_0x3b2b14(0x259)]);_0x5dec5f[_0x3b2b14(0x25d)](_0x3b2b14(0x21a),_0x3b2b14(0x210)),_0xbf9ebf[_0x3b2b14(0x21c)](_0x3b2b14(0x22a));}catch(_0x270d98){console['log'](_0x270d98);}}),router[a0_0x30e8c0(0x1f9)](a0_0x30e8c0(0x237),auth,async(_0x1bdc8e,_0x1cfeb9)=>{const _0x152d41=a0_0x30e8c0;try{const _0x207d05=_0x1bdc8e[_0x152d41(0x20b)]['id'],_0x27dcfc=await brands[_0x152d41(0x233)](_0x207d05);_0x1bdc8e['flash']('success',_0x152d41(0x26f)),_0x1cfeb9[_0x152d41(0x21c)]('/products/brands');}catch(_0x1c8bcf){console[_0x152d41(0x21e)](_0x1c8bcf);}}),router['get'](a0_0x30e8c0(0x263),auth,async(_0x1ce960,_0x1acd36)=>{const _0x18f866=a0_0x30e8c0;try{const {username:_0x52c5cd,email:_0x3fadcc,role:_0x4168a6}=_0x1ce960[_0x18f866(0x1fd)],_0x367f2c=_0x1ce960[_0x18f866(0x1fd)],_0x2d5b01=await profile[_0x18f866(0x273)]({'email':_0x367f2c['email']}),_0x3874ed=await master_shop['find']();console['log']('master',_0x3874ed);const _0x3ec288=await units[_0x18f866(0x234)]();if(_0x3874ed[0x0][_0x18f866(0x1d5)]==_0x18f866(0x238))var _0x74aeb1=users['English'];else{if(_0x3874ed[0x0][_0x18f866(0x1d5)]=='Hindi')var _0x74aeb1=users[_0x18f866(0x209)];else{if(_0x3874ed[0x0][_0x18f866(0x1d5)]=='German')var _0x74aeb1=users[_0x18f866(0x201)];else{if(_0x3874ed[0x0]['language']==_0x18f866(0x25c))var _0x74aeb1=users['Spanish'];else{if(_0x3874ed[0x0]['language']==_0x18f866(0x1ec))var _0x74aeb1=users['French'];else{if(_0x3874ed[0x0][_0x18f866(0x1d5)]==_0x18f866(0x24e))var _0x74aeb1=users[_0x18f866(0x242)];else{if(_0x3874ed[0x0][_0x18f866(0x1d5)]==_0x18f866(0x245))var _0x74aeb1=users[_0x18f866(0x245)];else{if(_0x3874ed[0x0][_0x18f866(0x1d5)]==_0x18f866(0x239))var _0x74aeb1=users[_0x18f866(0x1e0)];}}}}}}}_0x1acd36[_0x18f866(0x231)](_0x18f866(0x22b),{'success':_0x1ce960[_0x18f866(0x25d)]('success'),'errors':_0x1ce960['flash'](_0x18f866(0x267)),'role':_0x367f2c,'profile':_0x2d5b01,'master_shop':_0x3874ed,'user':_0x3ec288,'language':_0x74aeb1});}catch(_0x4967d3){console[_0x18f866(0x21e)](_0x4967d3);}}),router[a0_0x30e8c0(0x244)](a0_0x30e8c0(0x263),auth,async(_0xd0439b,_0x231d46)=>{const _0x48a4ee=a0_0x30e8c0;try{const {name:_0xf28741,secondary_unit:_0xcdbbbe,products:_0x8c4527}=_0xd0439b[_0x48a4ee(0x259)],_0x1ddced=new units({'name':_0xf28741,'secondary_unit':_0xcdbbbe,'products':_0x8c4527}),_0x1b4ba8=await units[_0x48a4ee(0x273)]({'name':_0xf28741});_0x1b4ba8?_0xd0439b[_0x48a4ee(0x25d)](_0x48a4ee(0x267),_0xf28741+_0x48a4ee(0x252)):_0xd0439b[_0x48a4ee(0x25d)]('success',_0xf28741+_0x48a4ee(0x218));const _0x2ef81d=await _0x1ddced['save']();_0x231d46[_0x48a4ee(0x21c)](_0x48a4ee(0x257));}catch(_0x35caeb){console[_0x48a4ee(0x21e)](_0x35caeb);}}),router[a0_0x30e8c0(0x1f9)](a0_0x30e8c0(0x1e1),auth,async(_0x4dfade,_0x17ad88)=>{const _0x316ef8=a0_0x30e8c0;try{const {username:_0x40bade,email:_0x2f56da,role:_0x5c5fba}=_0x4dfade[_0x316ef8(0x1fd)],_0x2f806e=_0x4dfade[_0x316ef8(0x1fd)],_0x391138=await profile[_0x316ef8(0x273)]({'email':_0x2f806e[_0x316ef8(0x1da)]}),_0x56fe4f=await master_shop[_0x316ef8(0x234)]();console[_0x316ef8(0x21e)](_0x316ef8(0x1d3),_0x56fe4f);const _0x384aef=_0x4dfade[_0x316ef8(0x20b)]['id'],_0x3e6e72=await units[_0x316ef8(0x26c)](_0x384aef);if(_0x56fe4f[0x0]['language']==_0x316ef8(0x238))var _0x241ce1=users[_0x316ef8(0x1e7)];else{if(_0x56fe4f[0x0][_0x316ef8(0x1d5)]=='Hindi')var _0x241ce1=users[_0x316ef8(0x209)];else{if(_0x56fe4f[0x0][_0x316ef8(0x1d5)]==_0x316ef8(0x201))var _0x241ce1=users[_0x316ef8(0x201)];else{if(_0x56fe4f[0x0][_0x316ef8(0x1d5)]==_0x316ef8(0x25c))var _0x241ce1=users[_0x316ef8(0x25c)];else{if(_0x56fe4f[0x0][_0x316ef8(0x1d5)]==_0x316ef8(0x1ec))var _0x241ce1=users[_0x316ef8(0x1ec)];else{if(_0x56fe4f[0x0][_0x316ef8(0x1d5)]==_0x316ef8(0x24e))var _0x241ce1=users[_0x316ef8(0x242)];else{if(_0x56fe4f[0x0][_0x316ef8(0x1d5)]==_0x316ef8(0x245))var _0x241ce1=users[_0x316ef8(0x245)];else{if(_0x56fe4f[0x0][_0x316ef8(0x1d5)]==_0x316ef8(0x239))var _0x241ce1=users[_0x316ef8(0x1e0)];}}}}}}}_0x17ad88[_0x316ef8(0x231)](_0x316ef8(0x22b),{'success':_0x4dfade['flash'](_0x316ef8(0x21a)),'errors':_0x4dfade[_0x316ef8(0x25d)](_0x316ef8(0x267)),'role':_0x2f806e,'profile':_0x391138,'master_shop':_0x56fe4f,'user':_0x3e6e72,'language':_0x241ce1});}catch(_0x55b411){console['log'](_0x55b411);}}),router[a0_0x30e8c0(0x244)]('/units/:id',auth,async(_0xbebdda,_0x4a1e34)=>{const _0x17a23d=a0_0x30e8c0;try{const _0x1dd086=_0xbebdda[_0x17a23d(0x20b)]['id'],_0x53c460=await units[_0x17a23d(0x1df)](_0x1dd086,_0xbebdda[_0x17a23d(0x259)]);_0xbebdda[_0x17a23d(0x25d)](_0x17a23d(0x21a),_0x17a23d(0x1db)),_0x4a1e34[_0x17a23d(0x21c)](_0x17a23d(0x257));}catch(_0x52cec0){console['log'](_0x52cec0);}}),router[a0_0x30e8c0(0x1f9)](a0_0x30e8c0(0x226),auth,async(_0x58a8e6,_0x3546cc)=>{const _0x119846=a0_0x30e8c0;try{const _0x2ce58b=_0x58a8e6['params']['id'],_0x523ea1=await units['findByIdAndDelete'](_0x2ce58b);_0x58a8e6[_0x119846(0x25d)](_0x119846(0x21a),_0x119846(0x1fc)),_0x3546cc['redirect']('/products/units');}catch(_0x37fd65){console[_0x119846(0x21e)](_0x37fd65);}});const storage=multer['diskStorage']({'destination':(_0x2fe5cd,_0x578dee,_0x4ccef7)=>{_0x4ccef7(null,'public/upload');},'filename':(_0x3b764d,_0x519c58,_0x4cb7f4)=>{const _0x452b59=a0_0x30e8c0;_0x4cb7f4(null,Date[_0x452b59(0x251)]()+_0x519c58['originalname']);}}),upload=multer({'storage':storage});function a0_0x4da1(_0x15dd3f,_0x5c9b44){const _0xbbdc3a=a0_0xbbdc();return a0_0x4da1=function(_0x4da178,_0x1e6074){_0x4da178=_0x4da178-0x1d1;let _0x501ca7=_0xbbdc3a[_0x4da178];return _0x501ca7;},a0_0x4da1(_0x15dd3f,_0x5c9b44);}router[a0_0x30e8c0(0x1f9)](a0_0x30e8c0(0x1ea),auth,async(_0x5f0c12,_0x22c14a)=>{const _0x2359ec=a0_0x30e8c0;try{const {username:_0x3b0752,email:_0x411c9e,role:_0x56b278}=_0x5f0c12[_0x2359ec(0x1fd)],_0x450892=_0x5f0c12[_0x2359ec(0x1fd)],_0xfb44db=await profile[_0x2359ec(0x273)]({'email':_0x450892[_0x2359ec(0x1da)]}),_0xcf1784={'year':_0x2359ec(0x22d),'month':_0x2359ec(0x207),'day':_0x2359ec(0x22d)},_0x1154ba=await master_shop[_0x2359ec(0x234)]();console[_0x2359ec(0x21e)]('Products\x20master',_0x1154ba);const _0xe023e=await product[_0x2359ec(0x234)]();console['log'](_0x2359ec(0x1ed),_0xe023e);const _0xc3305b=await warehouse['aggregate']([{'$unwind':_0x2359ec(0x21d)},{'$lookup':{'from':'products','localField':_0x2359ec(0x268),'foreignField':_0x2359ec(0x23e),'as':_0x2359ec(0x230)}},{'$unwind':'$product_docs'},{'$project':{'product_name':_0x2359ec(0x1ef),'product_stock':_0x2359ec(0x20a)}},{'$group':{'_id':_0x2359ec(0x214),'product_stock':{'$sum':'$product_stock'}}}]);console['log']('Products\x20warehouse_data',_0xc3305b),_0xc3305b[_0x2359ec(0x21b)](_0xc9d990=>{const _0x366106=_0x2359ec,_0x5a02aa=_0xe023e[_0x366106(0x220)](_0x193317=>{const _0x5a977a=_0x366106;_0x193317['name']==_0xc9d990[_0x5a977a(0x261)]&&(_0x193317[_0x5a977a(0x202)]=parseInt(_0x193317[_0x5a977a(0x202)])+parseInt(_0xc9d990[_0x5a977a(0x1eb)]));});}),console['log']('Products\x20find_data',_0xe023e);if(_0x1154ba[0x0][_0x2359ec(0x1d5)]==_0x2359ec(0x238))var _0x334aa2=users[_0x2359ec(0x1e7)];else{if(_0x1154ba[0x0][_0x2359ec(0x1d5)]=='Hindi')var _0x334aa2=users['Hindi'];else{if(_0x1154ba[0x0]['language']==_0x2359ec(0x201))var _0x334aa2=users[_0x2359ec(0x201)];else{if(_0x1154ba[0x0]['language']==_0x2359ec(0x25c))var _0x334aa2=users[_0x2359ec(0x25c)];else{if(_0x1154ba[0x0][_0x2359ec(0x1d5)]=='French')var _0x334aa2=users[_0x2359ec(0x1ec)];else{if(_0x1154ba[0x0][_0x2359ec(0x1d5)]==_0x2359ec(0x24e))var _0x334aa2=users[_0x2359ec(0x242)];else{if(_0x1154ba[0x0][_0x2359ec(0x1d5)]==_0x2359ec(0x245))var _0x334aa2=users[_0x2359ec(0x245)];else{if(_0x1154ba[0x0][_0x2359ec(0x1d5)]==_0x2359ec(0x239))var _0x334aa2=users[_0x2359ec(0x1e0)];}}}}}}}_0x22c14a[_0x2359ec(0x231)](_0x2359ec(0x23b),{'success':_0x5f0c12[_0x2359ec(0x25d)](_0x2359ec(0x21a)),'errors':_0x5f0c12['flash'](_0x2359ec(0x267)),'alldata':_0xe023e,'profile':_0xfb44db,'master_shop':_0x1154ba,'role':_0x450892,'product_stock':_0xc3305b,'language':_0x334aa2});}catch(_0x49aac4){console[_0x2359ec(0x21e)](_0x49aac4);}}),router[a0_0x30e8c0(0x1f9)]('/view/add_products',auth,async(_0xe2fcae,_0x587102)=>{const _0x5688db=a0_0x30e8c0;try{const {username:_0x1c14b0,email:_0x3fcb01,role:_0x3053ff}=_0xe2fcae[_0x5688db(0x1fd)],_0x47fd3d=_0xe2fcae[_0x5688db(0x1fd)],_0x365127=await profile[_0x5688db(0x273)]({'email':_0x47fd3d[_0x5688db(0x1da)]}),_0x28b415=await master_shop['find']();console[_0x5688db(0x21e)](_0x5688db(0x1d3),_0x28b415);const _0x10bfe4=await categories[_0x5688db(0x234)]({}),_0x1a3a59=await brands['find']({}),_0x54c15a=await units['find']({}),_0x2b74f6=await warehouse[_0x5688db(0x234)]({'status':'Enabled'});if(_0x28b415[0x0]['language']==_0x5688db(0x238))var _0x332202=users[_0x5688db(0x1e7)];else{if(_0x28b415[0x0][_0x5688db(0x1d5)]==_0x5688db(0x209))var _0x332202=users[_0x5688db(0x209)];else{if(_0x28b415[0x0][_0x5688db(0x1d5)]==_0x5688db(0x201))var _0x332202=users[_0x5688db(0x201)];else{if(_0x28b415[0x0][_0x5688db(0x1d5)]=='Spanish')var _0x332202=users[_0x5688db(0x25c)];else{if(_0x28b415[0x0][_0x5688db(0x1d5)]==_0x5688db(0x1ec))var _0x332202=users[_0x5688db(0x1ec)];else{if(_0x28b415[0x0][_0x5688db(0x1d5)]=='Portuguese\x20(BR)')var _0x332202=users[_0x5688db(0x242)];else{if(_0x28b415[0x0][_0x5688db(0x1d5)]==_0x5688db(0x245))var _0x332202=users['Chinese'];else{if(_0x28b415[0x0][_0x5688db(0x1d5)]==_0x5688db(0x239))var _0x332202=users[_0x5688db(0x1e0)];}}}}}}}_0x587102[_0x5688db(0x231)](_0x5688db(0x213),{'success':_0xe2fcae[_0x5688db(0x25d)](_0x5688db(0x21a)),'errors':_0xe2fcae['flash'](_0x5688db(0x267)),'role':_0x47fd3d,'profile':_0x365127,'categories':_0x10bfe4,'brands':_0x1a3a59,'master_shop':_0x28b415,'units':_0x54c15a,'language':_0x332202,'find_data':_0x2b74f6});}catch(_0x4b83a6){console[_0x5688db(0x21e)](_0x4b83a6);}}),router[a0_0x30e8c0(0x244)](a0_0x30e8c0(0x1fe),auth,upload[a0_0x30e8c0(0x206)](a0_0x30e8c0(0x240)),async(_0x312d38,_0x4a8a77)=>{const _0x99fc22=a0_0x30e8c0;try{const {name:_0x4809a3,category:_0x578131,brand:_0x5b266d,unit:_0x5f02ac,alertquantity:_0x355856,stock:_0x3ff6fb,product_code:_0x317a35,warehouse:_0x49457b,primary_ItemCode:_0x235cc0,second_ItemCode:_0x1d5956,second_unit:_0x209898,CBM:_0x3a5e99}=_0x312d38[_0x99fc22(0x259)],_0x46c249=_0x312d38[_0x99fc22(0x260)][_0x99fc22(0x24b)],_0x5e06af=new product({'image':_0x46c249,'name':_0x4809a3,'category':_0x578131,'brand':_0x5b266d,'unit':_0x5f02ac,'alertquantity':_0x355856,'stock':_0x3ff6fb,'product_code':_0x317a35,'warehouse':_0x49457b,'primary_code':_0x235cc0,'secondary_code':_0x1d5956,'second_unit':_0x209898,'maxStocks':MaxPerProduct,'maxProdPerUnit':maxPerUnit,'CBM':_0x3a5e99}),_0x9dc22f=await _0x5e06af[_0x99fc22(0x216)](),_0x178ec8=await categories[_0x99fc22(0x273)]({'name':_0x578131});_0x178ec8[_0x99fc22(0x23b)]=parseInt(_0x178ec8[_0x99fc22(0x23b)])+0x1,await _0x178ec8['save']();const _0x10f0eb=await brands['findOne']({'name':_0x5b266d});_0x10f0eb[_0x99fc22(0x23b)]=parseInt(_0x10f0eb[_0x99fc22(0x23b)])+0x1,await _0x10f0eb[_0x99fc22(0x216)]();const _0x241b7d=await units[_0x99fc22(0x273)]({'name':_0x5f02ac});_0x241b7d[_0x99fc22(0x23b)]=parseInt(_0x241b7d[_0x99fc22(0x23b)])+0x1,await _0x241b7d['save'](),_0x312d38['flash'](_0x99fc22(0x21a),_0x99fc22(0x225)),_0x4a8a77['redirect'](_0x99fc22(0x223));}catch(_0x1615b1){console['log'](_0x1615b1);}}),router[a0_0x30e8c0(0x1f9)]('/view/:id',auth,async(_0x5e9469,_0x2975ce)=>{const _0x589140=a0_0x30e8c0;try{const {username:_0x399fe6,email:_0x1df362,role:_0x124c4e}=_0x5e9469[_0x589140(0x1fd)],_0x59dc09=_0x5e9469[_0x589140(0x1fd)],_0x43b2a2=await profile[_0x589140(0x273)]({'email':_0x59dc09[_0x589140(0x1da)]}),_0x46fb04=await master_shop[_0x589140(0x234)]();console['log'](_0x589140(0x1ee),_0x46fb04);const _0x32a612=_0x5e9469[_0x589140(0x20b)]['id'],_0x30e7fd=await product[_0x589140(0x26c)](_0x32a612),_0x318b33=await categories[_0x589140(0x234)]({}),_0x54a9c7=await brands[_0x589140(0x234)]({}),_0x3914f2=await units[_0x589140(0x234)]({}),_0x3e9cec=await warehouse[_0x589140(0x234)]({'status':_0x589140(0x246)}),_0x25c956=await units[_0x589140(0x241)]([{'$group':{'_id':_0x589140(0x1de),'secondaryunit':{'$first':_0x589140(0x256)}}}]);if(_0x46fb04[0x0]['language']==_0x589140(0x238))var _0x5dbd91=users[_0x589140(0x1e7)];else{if(_0x46fb04[0x0][_0x589140(0x1d5)]=='Hindi')var _0x5dbd91=users[_0x589140(0x209)];else{if(_0x46fb04[0x0]['language']=='German')var _0x5dbd91=users[_0x589140(0x201)];else{if(_0x46fb04[0x0][_0x589140(0x1d5)]=='Spanish')var _0x5dbd91=users['Spanish'];else{if(_0x46fb04[0x0][_0x589140(0x1d5)]==_0x589140(0x1ec))var _0x5dbd91=users[_0x589140(0x1ec)];else{if(_0x46fb04[0x0][_0x589140(0x1d5)]==_0x589140(0x24e))var _0x5dbd91=users[_0x589140(0x242)];else{if(_0x46fb04[0x0][_0x589140(0x1d5)]==_0x589140(0x245))var _0x5dbd91=users['Chinese'];else{if(_0x46fb04[0x0][_0x589140(0x1d5)]==_0x589140(0x239))var _0x5dbd91=users[_0x589140(0x1e0)];}}}}}}}_0x2975ce['render'](_0x589140(0x229),{'success':_0x5e9469[_0x589140(0x25d)](_0x589140(0x21a)),'errors':_0x5e9469[_0x589140(0x25d)](_0x589140(0x267)),'role':_0x59dc09,'profile':_0x43b2a2,'alldata':_0x30e7fd,'categories':_0x318b33,'brands':_0x54a9c7,'master_shop':_0x46fb04,'units':_0x3914f2,'secondunit':_0x25c956,'find_data':_0x3e9cec,'language':_0x5dbd91});}catch(_0x132553){console[_0x589140(0x21e)](_0x132553);}}),router[a0_0x30e8c0(0x244)](a0_0x30e8c0(0x1d8),auth,upload[a0_0x30e8c0(0x206)](a0_0x30e8c0(0x240)),async(_0x2ec0b0,_0x1dd3e9)=>{const _0x258431=a0_0x30e8c0;try{console[_0x258431(0x21e)](_0x258431(0x24d));const _0x39a7b4=_0x2ec0b0['params']['id'],_0x115bac=await product['findById'](_0x39a7b4),{image:_0x42dd76,name:_0x4f256d,category:_0x5bb4ea,brand:_0x50a528,sku:_0x5a4298,unit:_0x49e80e,alertquantity:_0x385803,product_code:_0x585550,warehouse:_0x2a5a5b,primary_ItemCode:_0x2695a6,second_ItemCode:_0x2cda71,second_unit:_0x405b36,maxPerUnit:_0x425848,MaxPerProduct:_0x27ce21,CBM:_0x4d8c76}=_0x2ec0b0[_0x258431(0x259)];_0x2ec0b0['file']&&(_0x115bac[_0x258431(0x240)]=_0x2ec0b0[_0x258431(0x260)]['filename']);_0x115bac[_0x258431(0x23e)]=_0x4f256d,_0x115bac[_0x258431(0x270)]=_0x5bb4ea,_0x115bac[_0x258431(0x23f)]=_0x50a528,_0x115bac[_0x258431(0x25f)]=_0x5a4298,_0x115bac[_0x258431(0x265)]=_0x49e80e,_0x115bac[_0x258431(0x24c)]=_0x385803,_0x115bac[_0x258431(0x1ff)]=_0x585550,_0x115bac[_0x258431(0x1e5)]=_0x2a5a5b,_0x115bac[_0x258431(0x215)]=_0x2695a6,_0x115bac[_0x258431(0x23d)]=_0x2cda71,_0x115bac[_0x258431(0x258)]=_0x405b36,_0x115bac['maxStocks']=_0x27ce21,_0x115bac['maxProdPerUnit']=_0x425848,_0x115bac[_0x258431(0x200)]=_0x4d8c76;const _0x2de6df=await _0x115bac['save']();console[_0x258431(0x21e)](_0x258431(0x227),_0x115bac),_0x2ec0b0[_0x258431(0x25d)](_0x258431(0x21a),_0x258431(0x25b)),_0x1dd3e9[_0x258431(0x21c)](_0x258431(0x223));}catch(_0x475358){console['log'](_0x475358);}}),router[a0_0x30e8c0(0x1f9)]('/barcode/:id',auth,async(_0x412e06,_0x430517)=>{const _0x49177b=a0_0x30e8c0;try{const {username:_0x267c3e,email:_0x2b52f9,role:_0x16405d}=_0x412e06[_0x49177b(0x1fd)],_0x21fcee=_0x412e06[_0x49177b(0x1fd)],_0x169958=await profile['findOne']({'email':_0x21fcee[_0x49177b(0x1da)]}),_0x3b152e=await master_shop[_0x49177b(0x234)](),_0x38af49=_0x412e06['params']['id'],_0x22f96c=await product[_0x49177b(0x26c)](_0x38af49);if(_0x3b152e[0x0][_0x49177b(0x1d5)]==_0x49177b(0x238))var _0x5352f2=users['English'];else{if(_0x3b152e[0x0][_0x49177b(0x1d5)]==_0x49177b(0x209))var _0x5352f2=users['Hindi'];else{if(_0x3b152e[0x0][_0x49177b(0x1d5)]=='German')var _0x5352f2=users[_0x49177b(0x201)];else{if(_0x3b152e[0x0][_0x49177b(0x1d5)]==_0x49177b(0x25c))var _0x5352f2=users[_0x49177b(0x25c)];else{if(_0x3b152e[0x0][_0x49177b(0x1d5)]==_0x49177b(0x1ec))var _0x5352f2=users[_0x49177b(0x1ec)];else{if(_0x3b152e[0x0][_0x49177b(0x1d5)]==_0x49177b(0x24e))var _0x5352f2=users[_0x49177b(0x242)];else{if(_0x3b152e[0x0][_0x49177b(0x1d5)]=='Chinese')var _0x5352f2=users[_0x49177b(0x245)];else{if(_0x3b152e[0x0][_0x49177b(0x1d5)]==_0x49177b(0x239))var _0x5352f2=users[_0x49177b(0x1e0)];}}}}}}}_0x430517[_0x49177b(0x231)](_0x49177b(0x26d),{'success':_0x412e06[_0x49177b(0x25d)](_0x49177b(0x21a)),'errors':_0x412e06[_0x49177b(0x25d)]('errors'),'role':_0x21fcee,'profile':_0x169958,'alldata':_0x22f96c,'master_shop':_0x3b152e,'language':_0x5352f2});}catch(_0x3a6666){console['log'](_0x3a6666);}}),router[a0_0x30e8c0(0x1f9)](a0_0x30e8c0(0x1d2),auth,async(_0x1ff288,_0x405331)=>{const _0x2db307=a0_0x30e8c0;try{const _0x38798a=new excelJS[(_0x2db307(0x248))](),_0x18e65c=_0x38798a['addWorksheet'](_0x2db307(0x1d1));return _0x18e65c[_0x2db307(0x1e3)]=[{'header':_0x2db307(0x20d),'key':_0x2db307(0x269),'width':0xa},{'header':_0x2db307(0x1f3),'key':_0x2db307(0x1dc),'width':0xa},{'header':_0x2db307(0x26e),'key':_0x2db307(0x224),'width':0xa},{'header':_0x2db307(0x22e),'key':_0x2db307(0x1e8),'width':0xa},{'header':'max_number_per_units','key':_0x2db307(0x235),'width':0xa},{'header':_0x2db307(0x247),'key':_0x2db307(0x228),'width':0xa},{'header':'Secondary_Code','key':_0x2db307(0x228),'width':0xa},{'header':'Product_Code','key':_0x2db307(0x228),'width':0xa},{'header':_0x2db307(0x1d6),'key':_0x2db307(0x211),'width':0xa},{'header':'Alert_QTY','key':_0x2db307(0x236),'width':0xa},{'header':_0x2db307(0x217),'key':_0x2db307(0x236),'width':0xa},{'header':_0x2db307(0x200),'key':_0x2db307(0x200),'width':0xa}],_0x405331['setHeader'](_0x2db307(0x254),_0x2db307(0x1fb)),_0x405331[_0x2db307(0x23a)](_0x2db307(0x274),'attachment;\x20filename=Product_Migration_File.xlsx'),_0x38798a[_0x2db307(0x1f8)]['write'](_0x405331)['then'](()=>{const _0x40c48d=_0x2db307;_0x405331[_0x40c48d(0x1d7)](0xc8);});}catch(_0x58e695){_0x405331[_0x2db307(0x1d7)](0x190)[_0x2db307(0x253)](_0x58e695);}});const storage1=multer[a0_0x30e8c0(0x1f5)]({'destination':(_0x13d2ae,_0x484eca,_0x442c7f)=>{const _0x2f4ba4=a0_0x30e8c0;_0x442c7f(null,_0x2f4ba4(0x22f));},'filename':(_0x4604cf,_0x2215a3,_0x29d11f)=>{const _0x2741fb=a0_0x30e8c0;_0x29d11f(null,Date[_0x2741fb(0x251)]()+_0x2215a3[_0x2741fb(0x20c)]);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x30e8c0(0x205),auth,uploadMigrate[a0_0x30e8c0(0x206)](a0_0x30e8c0(0x221)),async(_0x2603f3,_0x3ca172)=>{const _0x2ba41a=a0_0x30e8c0,_0xb35818=_0x2603f3[_0x2ba41a(0x260)][_0x2ba41a(0x24b)],_0x1a1398=await xlsx[_0x2ba41a(0x1e2)](_0x2ba41a(0x276)+_0xb35818);let _0x5015cc=_0x1a1398['SheetNames'],_0x5291d9=xlsx[_0x2ba41a(0x26a)]['sheet_to_json'](_0x1a1398['Sheets'][_0x5015cc[0x0]]);for(const _0x2288f6 of _0x5291d9){const _0x313a2c=_0x2288f6[_0x2ba41a(0x20d)],_0x5eeab0=_0x2288f6[_0x2ba41a(0x1f3)],_0x21e5ca=_0x2288f6[_0x2ba41a(0x26e)],_0x26963c=_0x2288f6[_0x2ba41a(0x22e)],_0x3ba1b6=_0x2288f6[_0x2ba41a(0x23c)],_0x5ba2e8=_0x2288f6[_0x2ba41a(0x1d6)],_0x52dd9a=_0x2288f6[_0x2ba41a(0x1dd)],_0xd74b60=_0x2288f6[_0x2ba41a(0x247)],_0x1fe0d4=_0x2288f6['Secondary_Code'],_0x3eb66f=_0x2288f6['Maximum_Stocks'],_0x5b222a=_0x2288f6[_0x2ba41a(0x25a)],_0x204b24=_0x2288f6['CBM'];try{let _0x4e9229=await categories[_0x2ba41a(0x273)]({'name':_0x5ba2e8});if(!_0x4e9229){const _0x20e68f=new categories({'name':_0x5ba2e8,'products':'0'});_0x4e9229=await _0x20e68f[_0x2ba41a(0x216)]();}let _0x1ecb34=await brands[_0x2ba41a(0x273)]({'name':_0x5eeab0});if(!_0x1ecb34){const _0x147816=new brands({'name':_0x5eeab0,'products':'0'});_0x1ecb34=await _0x147816[_0x2ba41a(0x216)]();}let _0x306210=await units[_0x2ba41a(0x273)]({'name':_0x21e5ca,'secondary_unit':_0x26963c});if(!_0x306210){const _0x5301b4=new units({'name':_0x21e5ca,'secondary_unit':_0x26963c,'products':'0'});_0x306210=await _0x5301b4[_0x2ba41a(0x216)]();}const _0x5838ef=await product[_0x2ba41a(0x234)]({'name':_0x313a2c,'category':_0x4e9229[_0x2ba41a(0x23e)],'brand':_0x1ecb34[_0x2ba41a(0x23e)],'secondary_unit':_0x306210[_0x2ba41a(0x258)],'product_code':_0x3ba1b6});if(_0x5838ef[_0x2ba41a(0x250)]===0x0){const _0x5a8f72=new product({'image':_0x2ba41a(0x20f),'name':_0x313a2c,'category':_0x4e9229[_0x2ba41a(0x23e)],'brand':_0x1ecb34[_0x2ba41a(0x23e)],'unit':_0x306210['name'],'alertquantity':_0x52dd9a,'product_code':_0x3ba1b6,'secondary_unit':_0x306210[_0x2ba41a(0x258)],'primary_code':_0xd74b60,'secondary_code':_0x1fe0d4,'maxStocks':_0x3eb66f,'maxProdPerUnit':_0x5b222a,'CBM':_0x204b24}),_0x2e3fc5=await _0x5a8f72['save']();_0x4e9229[_0x2ba41a(0x23b)]=parseInt(_0x4e9229['products'])+0x1,await _0x4e9229['save'](),_0x1ecb34[_0x2ba41a(0x23b)]=parseInt(_0x1ecb34[_0x2ba41a(0x23b)])+0x1,await _0x1ecb34[_0x2ba41a(0x216)](),_0x306210[_0x2ba41a(0x23b)]=parseInt(_0x306210[_0x2ba41a(0x23b)])+0x1,await _0x306210[_0x2ba41a(0x216)](),_0x2603f3[_0x2ba41a(0x25d)](_0x2ba41a(0x21a),_0x313a2c+_0x2ba41a(0x203));}else _0x2603f3[_0x2ba41a(0x25d)]('error',_0x313a2c+'\x20Failed');}catch(_0x329a9c){_0x3ca172[_0x2ba41a(0x1d7)](0x1f4)[_0x2ba41a(0x219)]({'proderror':_0x329a9c[_0x2ba41a(0x243)],'aproduct':_0x313a2c});}}_0x3ca172[_0x2ba41a(0x21c)](_0x2ba41a(0x223));}),router[a0_0x30e8c0(0x244)](a0_0x30e8c0(0x266),auth,async(_0x440b81,_0x246db4)=>{const _0x535d90=a0_0x30e8c0;try{const {datachoose:_0x23b9fb}=_0x440b81[_0x535d90(0x259)];console[_0x535d90(0x21e)](_0x23b9fb);var _0x25f04b;if(_0x23b9fb==_0x535d90(0x1e4))_0x25f04b=await product[_0x535d90(0x241)]([{'$group':{'_id':_0x535d90(0x1f0)}}]);else{if(_0x23b9fb=='brands')_0x25f04b=await product[_0x535d90(0x241)]([{'$group':{'_id':_0x535d90(0x232)}}]);else{if(_0x23b9fb==_0x535d90(0x255))_0x25f04b=await product[_0x535d90(0x241)]([{'$group':{'_id':_0x535d90(0x1e9)}}]);else _0x23b9fb==_0x535d90(0x1d9)&&(_0x25f04b=[{'_id':'All'}]);}}_0x246db4[_0x535d90(0x219)](_0x25f04b);}catch(_0x2dc05b){_0x246db4[_0x535d90(0x219)]({'message':_0x2dc05b[_0x535d90(0x243)]});}}),router[a0_0x30e8c0(0x244)]('/filter_product',auth,async(_0x15393b,_0x26e97e)=>{const _0xdb5fdb=a0_0x30e8c0;try{const {data_choosing:_0x5edf32,data_selected:_0x2b829a}=_0x15393b['body'];var _0x56d2ba;if(_0x5edf32==_0xdb5fdb(0x1e4))_0x56d2ba=await product[_0xdb5fdb(0x241)]([{'$match':{'product_category':_0x2b829a}}]);else{if(_0x5edf32==_0xdb5fdb(0x271))_0x56d2ba=await product[_0xdb5fdb(0x241)]([{'$match':{'brand':_0x2b829a}}]);else{if(_0x5edf32==_0xdb5fdb(0x255))_0x56d2ba=await product['aggregate']([{'$match':{'category':_0x2b829a}}]);else _0x5edf32==_0xdb5fdb(0x1d9)&&(_0x56d2ba=await product[_0xdb5fdb(0x234)]());}}_0x26e97e[_0xdb5fdb(0x219)](_0x56d2ba);}catch(_0x3e7130){_0x26e97e['json']({'message':_0x3e7130[_0xdb5fdb(0x243)]});}}),module[a0_0x30e8c0(0x1f7)]=router;