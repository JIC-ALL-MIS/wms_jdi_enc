function a0_0x19e1(_0x3f0bb5,_0x15f8e7){var _0x3502a1=a0_0x3502();return a0_0x19e1=function(_0x19e1a0,_0x631480){_0x19e1a0=_0x19e1a0-0x1a5;var _0x498756=_0x3502a1[_0x19e1a0];return _0x498756;},a0_0x19e1(_0x3f0bb5,_0x15f8e7);}var a0_0x4f8ac0=a0_0x19e1;(function(_0x456829,_0x23103e){var _0x570139=a0_0x19e1,_0x1bf0b5=_0x456829();while(!![]){try{var _0x391d34=-parseInt(_0x570139(0x22b))/0x1*(parseInt(_0x570139(0x1de))/0x2)+-parseInt(_0x570139(0x1ee))/0x3+parseInt(_0x570139(0x1f7))/0x4+-parseInt(_0x570139(0x220))/0x5+-parseInt(_0x570139(0x21e))/0x6+-parseInt(_0x570139(0x23f))/0x7*(-parseInt(_0x570139(0x228))/0x8)+parseInt(_0x570139(0x1aa))/0x9*(parseInt(_0x570139(0x23d))/0xa);if(_0x391d34===_0x23103e)break;else _0x1bf0b5['push'](_0x1bf0b5['shift']());}catch(_0x35f64b){_0x1bf0b5['push'](_0x1bf0b5['shift']());}}}(a0_0x3502,0x33b43));function a0_0x3502(){var _0x12b203=['/view/:id','English\x20(US)','render','bin','$product_details.expiry_date','storage','forEach','invoice','Router','push','Arabic','You\x20can\x27t\x20subtract,\x20the\x20current\x20stock\x20is\x200','warehouse','$product_details.maxProducts','adjustment\x20data\x20update\x20successfully','adjust_qty','product_name','edit_adjustment_view','role','string','rack','$product_details.product_code','/preview/:id','Secondary_units','40528RYRbrl','filter','level','log','$product_details.type','True','$product_details.product_cat','error','all','get','types','success','$product.product_name','$name','/adjustment/preview/','aggregate','468021beNxcu','$product_details.product_name','message','isle','JO_number','$product_details.secondary_unit','catch','staff','exports','725588OBfGUX','$product_details.rack','date','$product_details.bin','product','$finalize','map','prod_name','prod_code','toString','warehouse_name','$product_details.maxPerUnit','$product_details.primary_code','findById','Ambient','redirect','prod_cat','edit_adjustment','expiry_date','back','/view','English','$_id','$product_details.batch_code','/view/add_adjustment','bay','Return\x20Rooms','length','language','maxPerUnit','master','../public/language/languages.json','email','$product_details.secondary_code','stock','post','purchases_data','batch_code','save','2464638ypoumP','adjustment','487590BPqRzj','finalize','room','max_per_unit','New_Qty_Converted_adj','$product_details.bay','product_details','status','64928URPTWi','ADJ-','Return\x20Goods','10zvqTcU','Enabled','Shelves','Portuguese\x20(BR)','$invoice','Enclosed','Primary_Units','$product_details.isle','$warehouse_name','find','floorlevel','$product_details.storage','flash','secondary_unit','Spanish','$product_details.level','maxperunit','$product_details','2693480SMciYD','$date','77WCfCZu','Arabic\x20(ae)','express','New_Qty_Converted','An\x20error\x20occurred\x20while\x20saving\x20data.','$product_details.floorlevel','$product','slice','errors','findOne','json','$room','body','../models/all_models','split','padStart','product_code','unit','getMonth','27PubZms','$product_details.product_stock','production_date','Chinese','user','Portuguese','getDate','getFullYear','$product_details.unit','minus','$product_details.production_date','French','German','type','pallet','Hindi','adjustment\x20Finalized\x20successfully','Raw\x20Materials','new_adjust_qty','product_stock','/barcode_scanner','$product_details._id','room_names','_id','rak','Rooms','params','note'];a0_0x3502=function(){return _0x12b203;};return a0_0x3502();}const express=require(a0_0x4f8ac0(0x241)),app=express(),router=express[a0_0x4f8ac0(0x1ce)](),auth=require('../middleware/auth'),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,expenses_type,all_expenses,adjustment}=require(a0_0x4f8ac0(0x24c)),users=require(a0_0x4f8ac0(0x216));router[a0_0x4f8ac0(0x1e7)](a0_0x4f8ac0(0x20b),auth,async(_0x53ffdd,_0x1cfea5)=>{var _0x4c6cdb=a0_0x4f8ac0;try{const {username:_0xd6f44e,email:_0x410dcf,role:_0x411dc8}=_0x53ffdd[_0x4c6cdb(0x1ae)],_0x3416bc=_0x53ffdd[_0x4c6cdb(0x1ae)],_0x976afd=await profile[_0x4c6cdb(0x248)]({'email':_0x3416bc[_0x4c6cdb(0x217)]}),_0x229cb6=await master_shop['find']();console[_0x4c6cdb(0x1e1)](_0x4c6cdb(0x215),_0x229cb6);let _0x575c88;if(_0x3416bc[_0x4c6cdb(0x1d8)]=='staff'){const _0x5c1326=await staff[_0x4c6cdb(0x248)]({'email':_0x3416bc['email']});_0x575c88=await warehouse[_0x4c6cdb(0x234)]({'status':_0x4c6cdb(0x22c),'name':_0x5c1326[_0x4c6cdb(0x1d2)]});}else _0x575c88=await warehouse[_0x4c6cdb(0x234)]({'status':_0x4c6cdb(0x22c)});const _0x5e8427=await product['find']();let _0x459f69;if(_0x3416bc[_0x4c6cdb(0x1d8)]==_0x4c6cdb(0x1f5)){const _0x163cb2=await staff[_0x4c6cdb(0x248)]({'email':_0x3416bc['email']});_0x459f69=await adjustment[_0x4c6cdb(0x234)]({'warehouse_name':_0x163cb2['warehouse']});}else _0x459f69=await adjustment['aggregate']([{'$unwind':_0x4c6cdb(0x245)},{'$group':{'_id':_0x4c6cdb(0x20d),'invoice':{'$first':_0x4c6cdb(0x22f)},'date':{'$first':_0x4c6cdb(0x23e)},'warehouse_name':{'$first':_0x4c6cdb(0x233)},'room':{'$addToSet':'$product.room_names'},'finalize':{'$first':_0x4c6cdb(0x1fc)}}},{'$project':{'_id':0x1,'invoice':0x1,'suppliers':0x1,'date':0x1,'warehouse_name':0x1,'room':0x1,'finalize':0x1}}]);if(_0x229cb6[0x0][_0x4c6cdb(0x213)]==_0x4c6cdb(0x1c7)){var _0x25c580=users['English'];console[_0x4c6cdb(0x1e1)](_0x25c580);}else{if(_0x229cb6[0x0]['language']=='Hindi')var _0x25c580=users[_0x4c6cdb(0x1b9)];else{if(_0x229cb6[0x0][_0x4c6cdb(0x213)]=='German')var _0x25c580=users[_0x4c6cdb(0x1b6)];else{if(_0x229cb6[0x0][_0x4c6cdb(0x213)]==_0x4c6cdb(0x239))var _0x25c580=users[_0x4c6cdb(0x239)];else{if(_0x229cb6[0x0]['language']=='French')var _0x25c580=users[_0x4c6cdb(0x1b5)];else{if(_0x229cb6[0x0][_0x4c6cdb(0x213)]=='Portuguese\x20(BR)')var _0x25c580=users[_0x4c6cdb(0x1af)];else{if(_0x229cb6[0x0][_0x4c6cdb(0x213)]=='Chinese')var _0x25c580=users[_0x4c6cdb(0x1ad)];else{if(_0x229cb6[0x0]['language']=='Arabic\x20(ae)')var _0x25c580=users['Arabic'];}}}}}}}_0x1cfea5['render'](_0x4c6cdb(0x21f),{'success':_0x53ffdd[_0x4c6cdb(0x237)](_0x4c6cdb(0x1e9)),'errors':_0x53ffdd[_0x4c6cdb(0x237)](_0x4c6cdb(0x247)),'role':_0x3416bc,'profile':_0x976afd,'warehouse':_0x575c88,'product':_0x5e8427,'adjustment':_0x459f69,'master_shop':_0x229cb6,'language':_0x25c580});}catch(_0xab7f58){console[_0x4c6cdb(0x1e1)](_0xab7f58);}}),router['get'](a0_0x4f8ac0(0x20f),auth,async(_0x29a9b4,_0x5f07e2)=>{var _0x3e8942=a0_0x4f8ac0;try{const {username:_0x2257ad,email:_0xd02c55,role:_0x34c253}=_0x29a9b4[_0x3e8942(0x1ae)],_0x2061d5=_0x29a9b4[_0x3e8942(0x1ae)],_0x3b10c0=await profile[_0x3e8942(0x248)]({'email':_0x2061d5[_0x3e8942(0x217)]}),_0x3c403e=await master_shop[_0x3e8942(0x234)]();let _0x596da6;if(_0x2061d5['role']=='staff'){const _0x27d10=await staff['findOne']({'email':_0x2061d5[_0x3e8942(0x217)]});_0x596da6=await warehouse[_0x3e8942(0x1ed)]([{'$match':{'status':_0x3e8942(0x22c),'name':_0x27d10[_0x3e8942(0x1d2)],'warehouse_category':_0x3e8942(0x1bb),'name':{'$ne':_0x3e8942(0x22a)}}},{'$group':{'_id':_0x3e8942(0x1eb),'name':{'$first':_0x3e8942(0x1eb)}}}]);}else _0x596da6=await warehouse[_0x3e8942(0x1ed)]([{'$match':{'status':_0x3e8942(0x22c),'warehouse_category':'Raw\x20Materials','name':{'$ne':_0x3e8942(0x22a)}}},{'$group':{'_id':'$name','name':{'$first':'$name'}}}]);const _0x3205a8=await product[_0x3e8942(0x234)]({}),_0x2b3f1e=await adjustment['find']({}),_0x2a6b0d=_0x2b3f1e[_0x3e8942(0x212)]+0x1,_0x2ded87=_0x3e8942(0x229)+_0x2a6b0d[_0x3e8942(0x200)]()[_0x3e8942(0x1a6)](0x5,'0');var _0x19fbed=[_0x3e8942(0x205),_0x3e8942(0x230),_0x3e8942(0x211)];if(_0x3c403e[0x0][_0x3e8942(0x213)]==_0x3e8942(0x1c7))var _0x5296b1=users[_0x3e8942(0x20c)];else{if(_0x3c403e[0x0][_0x3e8942(0x213)]==_0x3e8942(0x1b9))var _0x5296b1=users[_0x3e8942(0x1b9)];else{if(_0x3c403e[0x0][_0x3e8942(0x213)]==_0x3e8942(0x1b6))var _0x5296b1=users[_0x3e8942(0x1b6)];else{if(_0x3c403e[0x0][_0x3e8942(0x213)]=='Spanish')var _0x5296b1=users['Spanish'];else{if(_0x3c403e[0x0]['language']==_0x3e8942(0x1b5))var _0x5296b1=users[_0x3e8942(0x1b5)];else{if(_0x3c403e[0x0]['language']==_0x3e8942(0x22e))var _0x5296b1=users[_0x3e8942(0x1af)];else{if(_0x3c403e[0x0][_0x3e8942(0x213)]==_0x3e8942(0x1ad))var _0x5296b1=users[_0x3e8942(0x1ad)];else{if(_0x3c403e[0x0][_0x3e8942(0x213)]==_0x3e8942(0x240))var _0x5296b1=users[_0x3e8942(0x1d0)];}}}}}}}_0x5f07e2['render']('add_adjustment',{'success':_0x29a9b4[_0x3e8942(0x237)]('success'),'errors':_0x29a9b4[_0x3e8942(0x237)](_0x3e8942(0x247)),'role':_0x2061d5,'profile':_0x3b10c0,'warehouse':_0x596da6,'product':_0x3205a8,'master_shop':_0x3c403e,'language':_0x5296b1,'rooms_data':_0x19fbed,'invoice_no':_0x2ded87});}catch(_0x1fa11d){console[_0x3e8942(0x1e1)](_0x1fa11d);}}),router['post']('/view/add_adjustment',auth,async(_0x190ade,_0x333f07)=>{var _0x494162=a0_0x4f8ac0;try{const {warehouse_name:_0x27e3ad,date:_0x10cb1a,prod_name:_0x4123b1,level:_0x49213f,isle:_0x533889,pallet:_0xcf3dfd,stock:_0x287ab6,types:_0x3082df,adjust_qty:_0x352f5d,new_adjust_qty:_0x2a1d69,note:_0xa4e380,Room_name:_0x58cb5f,invoice:_0x253c42,JO_number:_0x50208c,expiry_date:_0x3edb76}=_0x190ade['body'];if(typeof _0x4123b1=='string')var _0x37c135=[_0x190ade['body'][_0x494162(0x1fe)]],_0x18e5b4=[_0x190ade['body'][_0x494162(0x1e0)]],_0x524050=[_0x190ade[_0x494162(0x24b)][_0x494162(0x219)]],_0xf2e2ca=[_0x190ade['body']['types']],_0x98b492=[_0x190ade['body'][_0x494162(0x224)]],_0x580a0e=[_0x190ade[_0x494162(0x24b)][_0x494162(0x242)]],_0x39d2d5=[_0x190ade[_0x494162(0x24b)][_0x494162(0x231)]],_0x2ee564=[_0x190ade[_0x494162(0x24b)]['Secondary_units']],_0x4172e4=[_0x190ade[_0x494162(0x24b)][_0x494162(0x1ff)]],_0x1474f4=[_0x190ade[_0x494162(0x24b)][_0x494162(0x21c)]],_0x5170bf=[_0x190ade[_0x494162(0x24b)][_0x494162(0x209)]],_0x5d5d91=[_0x190ade[_0x494162(0x24b)][_0x494162(0x223)]],_0x17b707=[_0x190ade['body']['production_date']],_0x5eea09=[_0x190ade[_0x494162(0x24b)]['prod_cat']],_0x403396=[_0x190ade[_0x494162(0x24b)]['Rooms']];else var _0x37c135=[..._0x190ade[_0x494162(0x24b)]['prod_name']],_0x18e5b4=[..._0x190ade[_0x494162(0x24b)]['level']],_0x524050=[..._0x190ade[_0x494162(0x24b)][_0x494162(0x219)]],_0xf2e2ca=[..._0x190ade[_0x494162(0x24b)][_0x494162(0x1e8)]],_0x98b492=[..._0x190ade[_0x494162(0x24b)][_0x494162(0x1d5)]],_0x580a0e=[..._0x190ade[_0x494162(0x24b)]['new_adjust_qty']],_0x39d2d5=[..._0x190ade['body'][_0x494162(0x1a8)]],_0x2ee564=[..._0x190ade['body'][_0x494162(0x1dd)]],_0x4172e4=[..._0x190ade[_0x494162(0x24b)][_0x494162(0x1ff)]],_0x1474f4=[..._0x190ade['body'][_0x494162(0x21c)]],_0x5170bf=[..._0x190ade[_0x494162(0x24b)]['expiry_date']],_0x5d5d91=[..._0x190ade[_0x494162(0x24b)][_0x494162(0x223)]],_0x17b707=[..._0x190ade[_0x494162(0x24b)]['production_date']],_0x5eea09=[..._0x190ade[_0x494162(0x24b)][_0x494162(0x207)]],_0x403396=[..._0x190ade[_0x494162(0x24b)][_0x494162(0x1c3)]];const _0x646e56=_0x37c135['map'](_0x5604d0=>{return _0x5604d0={'product_name':_0x5604d0};});_0x18e5b4[_0x494162(0x1cc)]((_0x55739d,_0x34ba22)=>{var _0x93547a=_0x494162;_0x403396[_0x93547a(0x1cc)]((_0x5db8f9,_0x511f42)=>{var _0x37e058=_0x93547a;if(_0x5db8f9=='Receiving\x20Area'&&_0x34ba22==_0x511f42){var _0x12b759=_0x55739d[_0x37e058(0x246)](0x3);_0x646e56[_0x34ba22][_0x37e058(0x1cb)]=_0x55739d[0x0],_0x646e56[_0x34ba22][_0x37e058(0x1da)]=_0x55739d[0x1],_0x646e56[_0x34ba22]['bay']=0x0,_0x646e56[_0x34ba22][_0x37e058(0x1c9)]=0x0,_0x646e56[_0x34ba22]['type']='Floor',_0x646e56[_0x34ba22]['floorlevel']=_0x12b759;}else{if(_0x5db8f9==_0x37e058(0x22d)&&_0x34ba22==_0x511f42){var _0x12b759=_0x55739d['slice'](0x3);_0x646e56[_0x34ba22][_0x37e058(0x1cb)]=_0x55739d[0x0],_0x646e56[_0x34ba22]['rack']=_0x55739d[0x1],_0x646e56[_0x34ba22][_0x37e058(0x210)]=0x0,_0x646e56[_0x34ba22][_0x37e058(0x1c9)]=0x0,_0x646e56[_0x34ba22]['type']='Floor',_0x646e56[_0x34ba22][_0x37e058(0x235)]=_0x55739d[0x5];}else{if(_0x34ba22==_0x511f42){var _0x3b01aa;if(_0x55739d[0x4]=='L')_0x3b01aa='Level';else _0x55739d[0x4]=='F'&&(_0x3b01aa='Floor');_0x646e56[_0x34ba22]['storage']=_0x55739d[0x0],_0x646e56[_0x34ba22]['rack']=_0x55739d[0x1],_0x646e56[_0x34ba22][_0x37e058(0x210)]=_0x55739d[0x2],_0x646e56[_0x34ba22][_0x37e058(0x1c9)]=_0x55739d[0x3],_0x646e56[_0x34ba22][_0x37e058(0x1b7)]=_0x3b01aa,_0x646e56[_0x34ba22][_0x37e058(0x235)]=_0x55739d[0x5];}}}});}),_0x524050[_0x494162(0x1cc)]((_0x443301,_0x2853a9)=>{_0x646e56[_0x2853a9]['stockBefore']=_0x443301;}),_0xf2e2ca[_0x494162(0x1cc)]((_0x977782,_0x405c73)=>{var _0x2ba550=_0x494162;_0x646e56[_0x405c73][_0x2ba550(0x1e8)]=_0x977782;}),_0x98b492['forEach']((_0x2766ae,_0x54b0df)=>{var _0x277d71=_0x494162;_0x646e56[_0x54b0df][_0x277d71(0x1d5)]=_0x2766ae;}),_0x580a0e['forEach']((_0x14da43,_0x155861)=>{var _0x21609e=_0x494162;_0x646e56[_0x155861][_0x21609e(0x1bc)]=_0x14da43;}),_0x39d2d5['forEach']((_0x2cd528,_0xfede7e)=>{var _0x1e7d40=_0x494162;_0x646e56[_0xfede7e][_0x1e7d40(0x1a8)]=_0x2cd528;}),_0x2ee564[_0x494162(0x1cc)]((_0x6a059b,_0x498507)=>{_0x646e56[_0x498507]['secondary_unit']=_0x6a059b;}),_0x4172e4[_0x494162(0x1cc)]((_0x21a71c,_0x433442)=>{var _0x5904fd=_0x494162;_0x646e56[_0x433442][_0x5904fd(0x1a7)]=_0x21a71c;}),_0x1474f4[_0x494162(0x1cc)]((_0x1560c7,_0x2e41f3)=>{var _0x5a507f=_0x494162;_0x646e56[_0x2e41f3][_0x5a507f(0x21c)]=_0x1560c7;}),_0x5170bf[_0x494162(0x1cc)]((_0x41eda1,_0x5dcdf2)=>{var _0x1af982=_0x494162;_0x646e56[_0x5dcdf2][_0x1af982(0x209)]=_0x41eda1;}),_0x5d5d91['forEach']((_0x187489,_0x252672)=>{var _0x5282b4=_0x494162;_0x646e56[_0x252672][_0x5282b4(0x23b)]=_0x187489;}),_0x17b707['forEach']((_0x3604de,_0x39aef4)=>{var _0x2ec549=_0x494162;_0x646e56[_0x39aef4][_0x2ec549(0x1ac)]=_0x3604de;}),_0x5eea09['forEach']((_0x16634f,_0x1deb21)=>{var _0x527d22=_0x494162;_0x646e56[_0x1deb21][_0x527d22(0x207)]=_0x16634f;}),_0x403396[_0x494162(0x1cc)]((_0xe27ec9,_0x534dc5)=>{var _0x5f448f=_0x494162;_0x646e56[_0x534dc5][_0x5f448f(0x1c0)]=_0xe27ec9;});const _0x40e0b9=_0x646e56[_0x494162(0x1df)](_0x328418=>_0x328418[_0x494162(0x1d5)]!=='0'&&_0x328418[_0x494162(0x1d5)]!=='');var _0x247664=0x0;_0x40e0b9[_0x494162(0x1cc)](_0x3a4c3c=>{var _0xbf5a21=_0x494162;console[_0xbf5a21(0x1e1)]('foreach\x20newproduct',_0x3a4c3c),parseInt(_0x3a4c3c[_0xbf5a21(0x1d5)])<=0x0&&_0x247664++;});if(_0x247664!=0x0)return _0x190ade[_0x494162(0x237)](_0x494162(0x247),_0x494162(0x1d1)),_0x333f07[_0x494162(0x206)]('back');const _0x33579e=new adjustment({'warehouse_name':_0x27e3ad,'date':_0x10cb1a,'product':_0x40e0b9,'note':_0xa4e380,'room':_0x58cb5f,'invoice':_0x253c42,'JO_number':_0x50208c,'expiry_date':_0x3edb76}),_0x52d991=await _0x33579e[_0x494162(0x21d)]();_0x190ade[_0x494162(0x237)]('success','adjustment\x20add\x20successfull'),_0x333f07[_0x494162(0x206)](_0x494162(0x1ec)+_0x52d991['_id']);}catch(_0x2804f9){console['log'](_0x2804f9),_0x333f07[_0x494162(0x227)](0xc8)[_0x494162(0x249)]({'message':_0x2804f9[_0x494162(0x1f0)]});}}),router['get']('/preview/:id',auth,async(_0x5617e9,_0x538d1d)=>{var _0x364ebd=a0_0x4f8ac0;try{const {username:_0x1bdc0e,email:_0x4bbda4,role:_0x4f9a8e}=_0x5617e9['user'],_0x50bba1=_0x5617e9['user'],_0x2ae142=await profile[_0x364ebd(0x248)]({'email':_0x50bba1[_0x364ebd(0x217)]}),_0x29a6c1=await master_shop[_0x364ebd(0x234)](),_0x5a6995=_0x5617e9[_0x364ebd(0x1c4)]['id'],_0x22321a=await adjustment['findById']({'_id':_0x5a6995}),_0x46fdbf=await purchases[_0x364ebd(0x1ed)]([{'$match':{'warehouse_name':_0x22321a[_0x364ebd(0x201)]}},{'$unwind':_0x364ebd(0x245)},{'$group':{'_id':'$product.product_name'}}]),_0x1e70cc=await product[_0x364ebd(0x234)]({}),_0x1d60aa=await warehouse[_0x364ebd(0x1ed)]([{'$match':{'name':_0x22321a[_0x364ebd(0x201)]}},{'$unwind':_0x364ebd(0x23c)},{'$group':{'_id':_0x364ebd(0x1bf),'name':{'$first':_0x364ebd(0x1ef)},'product_stock':{'$first':_0x364ebd(0x1ab)},'bay':{'$first':_0x364ebd(0x225)},'bin':{'$first':_0x364ebd(0x1fa)},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':_0x364ebd(0x244)},'primary_code':{'$first':_0x364ebd(0x203)},'secondary_code':{'$first':_0x364ebd(0x218)},'product_code':{'$first':'$product_details.product_code'},'storage':{'$first':_0x364ebd(0x236)},'rack':{'$first':_0x364ebd(0x1f8)},'maxPerUnit':{'$first':_0x364ebd(0x202)},'expiry_date':{'$first':_0x364ebd(0x1ca)},'production_date':{'$first':_0x364ebd(0x1b4)},'batch_code':{'$first':_0x364ebd(0x20e)},'room':{'$first':_0x364ebd(0x24a)}}}]);if(_0x29a6c1[0x0][_0x364ebd(0x213)]==_0x364ebd(0x1c7)){var _0xfdc51d=users[_0x364ebd(0x20c)];console[_0x364ebd(0x1e1)](_0xfdc51d);}else{if(_0x29a6c1[0x0][_0x364ebd(0x213)]==_0x364ebd(0x1b9))var _0xfdc51d=users[_0x364ebd(0x1b9)];else{if(_0x29a6c1[0x0][_0x364ebd(0x213)]=='German')var _0xfdc51d=users['German'];else{if(_0x29a6c1[0x0][_0x364ebd(0x213)]==_0x364ebd(0x239))var _0xfdc51d=users[_0x364ebd(0x239)];else{if(_0x29a6c1[0x0]['language']==_0x364ebd(0x1b5))var _0xfdc51d=users[_0x364ebd(0x1b5)];else{if(_0x29a6c1[0x0]['language']==_0x364ebd(0x22e))var _0xfdc51d=users[_0x364ebd(0x1af)];else{if(_0x29a6c1[0x0]['language']==_0x364ebd(0x1ad))var _0xfdc51d=users[_0x364ebd(0x1ad)];else{if(_0x29a6c1[0x0]['language']==_0x364ebd(0x240))var _0xfdc51d=users[_0x364ebd(0x1d0)];}}}}}}}_0x538d1d[_0x364ebd(0x1c8)](_0x364ebd(0x1d7),{'success':_0x5617e9[_0x364ebd(0x237)]('success'),'errors':_0x5617e9[_0x364ebd(0x237)](_0x364ebd(0x247)),'role':_0x50bba1,'profile':_0x2ae142,'adjustment':_0x22321a,'stock':_0x1d60aa,'master_shop':_0x29a6c1,'warehouse_name':_0x46fdbf,'unit':_0x1e70cc,'language':_0xfdc51d});}catch(_0x5ba7f5){console[_0x364ebd(0x1e1)](_0x5ba7f5),_0x538d1d[_0x364ebd(0x227)](0xc8)[_0x364ebd(0x249)]({'message':_0x5ba7f5[_0x364ebd(0x1f0)]});}}),router[a0_0x4f8ac0(0x21a)](a0_0x4f8ac0(0x1dc),auth,async(_0x2d4de4,_0x404021)=>{var _0x3f92b8=a0_0x4f8ac0;try{const _0x27f1a4=_0x2d4de4[_0x3f92b8(0x1c4)]['id'],{warehouse_name:_0x17ee1f,Room_name:_0x224137}=_0x2d4de4[_0x3f92b8(0x24b)],_0x32a139=await adjustment[_0x3f92b8(0x204)]({'_id':_0x27f1a4}),_0x3716cb=_0x32a139[_0x3f92b8(0x1fb)][_0x3f92b8(0x1fd)](async _0x1319db=>{var _0x430caa=_0x3f92b8;if(_0x1319db[_0x430caa(0x1d5)]>0x0){var _0x529eb1=await warehouse[_0x430caa(0x248)]({'name':_0x17ee1f,'room':_0x1319db[_0x430caa(0x1c0)],'warehouse_category':_0x430caa(0x1bb)});const _0x377dcf=_0x529eb1[_0x430caa(0x226)]['map'](_0x5389bb=>{var _0x30f8e8=_0x430caa;if(_0x1319db[_0x30f8e8(0x1b7)]=='minus'){if(_0x5389bb[_0x30f8e8(0x1d6)]==_0x1319db[_0x30f8e8(0x1d6)]&&_0x5389bb[_0x30f8e8(0x235)]==_0x1319db[_0x30f8e8(0x235)]&&_0x5389bb[_0x30f8e8(0x1b7)]==_0x1319db[_0x30f8e8(0x1b7)]&&_0x5389bb[_0x30f8e8(0x1c9)]==_0x1319db['bin']&&_0x5389bb[_0x30f8e8(0x210)]==_0x1319db[_0x30f8e8(0x210)]&&_0x5389bb[_0x30f8e8(0x1da)]==_0x1319db[_0x30f8e8(0x1da)]&&_0x5389bb[_0x30f8e8(0x1cb)]==_0x1319db[_0x30f8e8(0x1cb)]&&_0x5389bb[_0x30f8e8(0x209)]==_0x1319db[_0x30f8e8(0x209)]&&_0x5389bb[_0x30f8e8(0x21c)]==_0x1319db[_0x30f8e8(0x21c)]&&_0x5389bb[_0x30f8e8(0x1ac)]==_0x1319db[_0x30f8e8(0x1ac)]){var _0x206cd6;_0x206cd6=_0x1319db[_0x30f8e8(0x1d5)],_0x1319db[_0x30f8e8(0x207)]=='S'&&(_0x206cd6=_0x1319db[_0x30f8e8(0x1d5)]/_0x5389bb[_0x30f8e8(0x214)]),_0x5389bb[_0x30f8e8(0x1bd)]=_0x5389bb[_0x30f8e8(0x1bd)]-_0x206cd6;}}else{if(_0x5389bb[_0x30f8e8(0x1d6)]==_0x1319db[_0x30f8e8(0x1d6)]&&_0x5389bb[_0x30f8e8(0x235)]==_0x1319db[_0x30f8e8(0x235)]&&_0x5389bb[_0x30f8e8(0x1b7)]==_0x1319db[_0x30f8e8(0x1b7)]&&_0x5389bb[_0x30f8e8(0x1c9)]==_0x1319db[_0x30f8e8(0x1c9)]&&_0x5389bb[_0x30f8e8(0x210)]==_0x1319db[_0x30f8e8(0x210)]&&_0x5389bb[_0x30f8e8(0x1da)]==_0x1319db[_0x30f8e8(0x1da)]&&_0x5389bb['storage']==_0x1319db['storage']&&_0x5389bb[_0x30f8e8(0x209)]==_0x1319db[_0x30f8e8(0x209)]&&_0x5389bb[_0x30f8e8(0x21c)]==_0x1319db['batch_code']&&_0x5389bb[_0x30f8e8(0x1ac)]==_0x1319db[_0x30f8e8(0x1ac)]){console[_0x30f8e8(0x1e1)](_0x1319db);var _0x206cd6;_0x206cd6=_0x1319db[_0x30f8e8(0x1d5)],_0x1319db[_0x30f8e8(0x207)]=='S'&&(_0x206cd6=_0x1319db[_0x30f8e8(0x1d5)]/_0x5389bb[_0x30f8e8(0x214)]),_0x5389bb[_0x30f8e8(0x1bd)]=_0x5389bb[_0x30f8e8(0x1bd)]+_0x206cd6;}}});}return _0x529eb1;});Promise[_0x3f92b8(0x1e6)](_0x3716cb)['then'](async _0x515be4=>{var _0x49e4ad=_0x3f92b8;try{for(const _0xeb4ac3 of _0x515be4){await _0xeb4ac3[_0x49e4ad(0x21d)]();}_0x32a139[_0x49e4ad(0x221)]=_0x49e4ad(0x1e3);const _0x306018=await _0x32a139[_0x49e4ad(0x21d)]();_0x2d4de4[_0x49e4ad(0x237)]('success',_0x49e4ad(0x1ba)),_0x404021[_0x49e4ad(0x206)]('/picking_list/PDF_adjustment_rm/'+_0x306018[_0x49e4ad(0x1c1)]);}catch(_0x405ec5){console[_0x49e4ad(0x1e5)](_0x405ec5),_0x404021[_0x49e4ad(0x227)](0x1f4)['json']({'error':_0x49e4ad(0x243)});}})[_0x3f92b8(0x1f4)](_0x5eddce=>{var _0x440219=_0x3f92b8;console[_0x440219(0x1e5)](_0x5eddce),_0x404021[_0x440219(0x227)](0x1f4)['json']({'error':'An\x20error\x20occurred.'});});}catch(_0x3dfc81){console[_0x3f92b8(0x1e1)](_0x3dfc81),_0x404021[_0x3f92b8(0x227)](0xc8)[_0x3f92b8(0x249)]({'message':_0x3dfc81[_0x3f92b8(0x1f0)]});}}),router[a0_0x4f8ac0(0x1e7)](a0_0x4f8ac0(0x1c6),auth,async(_0x447386,_0x121919)=>{var _0x2293d3=a0_0x4f8ac0;try{const {username:_0x42693f,email:_0x5ad148,role:_0x368096}=_0x447386['user'],_0x1ce739=_0x447386['user'],_0x4e824a=await profile[_0x2293d3(0x248)]({'email':_0x1ce739[_0x2293d3(0x217)]}),_0x3c62eb=await master_shop[_0x2293d3(0x234)]();console[_0x2293d3(0x1e1)](_0x2293d3(0x215),_0x3c62eb);const _0x43c367=_0x447386[_0x2293d3(0x1c4)]['id'],_0x491a8f=await adjustment[_0x2293d3(0x204)]({'_id':_0x43c367});let _0x1f80c6=new Date(_0x491a8f['expiry_date']),_0x1d7e2c=('0'+_0x1f80c6[_0x2293d3(0x1b0)]())['slice'](-0x2),_0x47d223=('0'+(_0x1f80c6[_0x2293d3(0x1a9)]()+0x1))[_0x2293d3(0x246)](-0x2),_0xfa732b=_0x1f80c6[_0x2293d3(0x1b1)](),_0x5d80fd=_0xfa732b+'-'+_0x47d223+'-'+_0x1d7e2c;var _0x1a9e34=[_0x2293d3(0x205),_0x2293d3(0x230),_0x2293d3(0x211)];const _0x3338fd=await purchases[_0x2293d3(0x1ed)]([{'$match':{'warehouse_name':_0x491a8f[_0x2293d3(0x201)]}},{'$unwind':_0x2293d3(0x245)},{'$group':{'_id':_0x2293d3(0x1ea)}}]);console[_0x2293d3(0x1e1)](_0x2293d3(0x21b),_0x3338fd);const _0x371698=await product[_0x2293d3(0x234)]({}),_0x3c1714=await warehouse[_0x2293d3(0x1ed)]([{'$match':{'name':_0x491a8f[_0x2293d3(0x201)],'room':_0x491a8f['room']}},{'$unwind':'$product_details'},{'$group':{'_id':'$product_details._id','name':{'$first':'$product_details.product_name'},'product_stock':{'$first':_0x2293d3(0x1ab)},'bay':{'$first':_0x2293d3(0x225)},'bin':{'$first':'$product_details.bin'},'type':{'$first':'$product_details.type'},'floorlevel':{'$first':'$product_details.floorlevel'},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x2293d3(0x218)},'product_code':{'$first':_0x2293d3(0x1db)},'storage':{'$first':_0x2293d3(0x236)},'rack':{'$first':'$product_details.rack'}}}]);if(_0x3c62eb[0x0]['language']==_0x2293d3(0x1c7)){var _0x108450=users[_0x2293d3(0x20c)];console[_0x2293d3(0x1e1)](_0x108450);}else{if(_0x3c62eb[0x0]['language']==_0x2293d3(0x1b9))var _0x108450=users[_0x2293d3(0x1b9)];else{if(_0x3c62eb[0x0]['language']==_0x2293d3(0x1b6))var _0x108450=users[_0x2293d3(0x1b6)];else{if(_0x3c62eb[0x0][_0x2293d3(0x213)]==_0x2293d3(0x239))var _0x108450=users[_0x2293d3(0x239)];else{if(_0x3c62eb[0x0][_0x2293d3(0x213)]==_0x2293d3(0x1b5))var _0x108450=users[_0x2293d3(0x1b5)];else{if(_0x3c62eb[0x0]['language']==_0x2293d3(0x22e))var _0x108450=users['Portuguese'];else{if(_0x3c62eb[0x0]['language']==_0x2293d3(0x1ad))var _0x108450=users[_0x2293d3(0x1ad)];else{if(_0x3c62eb[0x0][_0x2293d3(0x213)]=='Arabic\x20(ae)')var _0x108450=users[_0x2293d3(0x1d0)];}}}}}}}_0x121919[_0x2293d3(0x1c8)](_0x2293d3(0x208),{'success':_0x447386[_0x2293d3(0x237)](_0x2293d3(0x1e9)),'errors':_0x447386[_0x2293d3(0x237)](_0x2293d3(0x247)),'role':_0x1ce739,'profile':_0x4e824a,'adjustment':_0x491a8f,'stock':_0x3c1714,'master_shop':_0x3c62eb,'warehouse_name':_0x3338fd,'unit':_0x371698,'language':_0x108450,'rooms_data':_0x1a9e34,'ed_fullDate':_0x5d80fd});}catch(_0x37ec29){console[_0x2293d3(0x1e1)](_0x37ec29),_0x121919[_0x2293d3(0x227)](0xc8)[_0x2293d3(0x249)]({'message':_0x37ec29[_0x2293d3(0x1f0)]});}}),router[a0_0x4f8ac0(0x21a)](a0_0x4f8ac0(0x1c6),auth,async(_0x2947cb,_0x3b8ec2)=>{var _0x2ea0ad=a0_0x4f8ac0;try{const _0x14c751=_0x2947cb[_0x2ea0ad(0x1c4)]['id'],_0x20413f=await adjustment[_0x2ea0ad(0x204)]({'_id':_0x14c751}),_0x5bf3ec=await warehouse['findOne']({'name':_0x20413f[_0x2ea0ad(0x201)],'room':_0x20413f[_0x2ea0ad(0x222)]}),{warehouse_name:_0x2edc21,date:_0x136e25,prod_name:_0x1e9aba,level:_0x1983bc,isle:_0x326548,pallet:_0x1a56b2,stock:_0x157fc6,types:_0xfbc428,adjust_qty:_0x2b1b98,new_adjust_qty:_0x25cabc,note:_0x321645,Room_name:_0xb571f2,invoice:_0x1e92b5,JO_number:_0x1db81a}=_0x2947cb[_0x2ea0ad(0x24b)];if(typeof _0x1e9aba==_0x2ea0ad(0x1d9))var _0x1009c6=[_0x2947cb['body'][_0x2ea0ad(0x1fe)]],_0x3e6a4a=[_0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1e0)]],_0x3d6c6b=[_0x2947cb[_0x2ea0ad(0x24b)]['isle']],_0x20bf8e=[_0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1b8)]],_0x2ade28=[_0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x219)]],_0xb7d853=[_0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1e8)]],_0x39ca79=[_0x2947cb['body'][_0x2ea0ad(0x1d5)]],_0x23deca=[_0x2947cb[_0x2ea0ad(0x24b)]['new_adjust_qty']],_0x171c2a=[_0x2947cb['body'][_0x2ea0ad(0x1ff)]],_0x215f61=[_0x2947cb['body'][_0x2ea0ad(0x1a8)]],_0x2bf36f=[_0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1dd)]],_0x319335=[_0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x21c)]],_0x14efa3=[_0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x209)]],_0x18e605=[_0x2947cb[_0x2ea0ad(0x24b)]['storage']],_0x5cc6aa=[_0x2947cb['body'][_0x2ea0ad(0x1c2)]],_0x2c702a=[_0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1b7)]];else var _0x1009c6=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1fe)]],_0x3e6a4a=[..._0x2947cb['body'][_0x2ea0ad(0x1e0)]],_0x3d6c6b=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1f1)]],_0x20bf8e=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1b8)]],_0x2ade28=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x219)]],_0xb7d853=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1e8)]],_0x39ca79=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1d5)]],_0x23deca=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1bc)]],_0x171c2a=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1ff)]],_0x215f61=[..._0x2947cb[_0x2ea0ad(0x24b)]['unit']],_0x2bf36f=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1dd)]],_0x319335=[..._0x2947cb['body'][_0x2ea0ad(0x21c)]],_0x14efa3=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x209)]],_0x18e605=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1cb)]],_0x5cc6aa=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1c2)]],_0x2c702a=[..._0x2947cb[_0x2ea0ad(0x24b)][_0x2ea0ad(0x1b7)]];const _0x19b329=_0x1009c6[_0x2ea0ad(0x1fd)](_0x287ee4=>{return _0x287ee4={'product_name':_0x287ee4};});_0x3e6a4a['forEach']((_0x5ecd3d,_0xd8eb98)=>{var _0x11e72f=_0x2ea0ad;_0x19b329[_0xd8eb98][_0x11e72f(0x210)]=_0x5ecd3d;}),_0x3d6c6b[_0x2ea0ad(0x1cc)]((_0x33b933,_0x55a45d)=>{var _0x2ac72d=_0x2ea0ad;_0x19b329[_0x55a45d][_0x2ac72d(0x1c9)]=_0x33b933;}),_0x20bf8e[_0x2ea0ad(0x1cc)]((_0x139819,_0xda74eb)=>{_0x19b329[_0xda74eb]['floorlevel']=_0x139819;}),_0x2ade28[_0x2ea0ad(0x1cc)]((_0x32bdc5,_0x29ca57)=>{_0x19b329[_0x29ca57]['stockBefore']=_0x32bdc5;}),_0xb7d853[_0x2ea0ad(0x1cc)]((_0x4334c1,_0x1ef35f)=>{_0x19b329[_0x1ef35f]['types']=_0x4334c1;}),_0x39ca79[_0x2ea0ad(0x1cc)]((_0x526600,_0x521610)=>{var _0x5ac12b=_0x2ea0ad;_0x19b329[_0x521610][_0x5ac12b(0x1d5)]=_0x526600;}),_0x23deca[_0x2ea0ad(0x1cc)]((_0x4b87de,_0xee1db0)=>{var _0x16c8b0=_0x2ea0ad;_0x19b329[_0xee1db0][_0x16c8b0(0x1bc)]=_0x4b87de;}),_0x215f61[_0x2ea0ad(0x1cc)]((_0x5a3d7e,_0x3fb736)=>{var _0x6666b4=_0x2ea0ad;_0x19b329[_0x3fb736][_0x6666b4(0x1a8)]=_0x5a3d7e;}),_0x2bf36f[_0x2ea0ad(0x1cc)]((_0x35b297,_0x1a69b3)=>{var _0x55545d=_0x2ea0ad;_0x19b329[_0x1a69b3][_0x55545d(0x238)]=_0x35b297;}),_0x171c2a[_0x2ea0ad(0x1cc)]((_0x44abe5,_0x4ff64c)=>{_0x19b329[_0x4ff64c]['product_code']=_0x44abe5;}),_0x319335['forEach']((_0x2f64f0,_0x3e4035)=>{var _0x2b5c34=_0x2ea0ad;_0x19b329[_0x3e4035][_0x2b5c34(0x21c)]=_0x2f64f0;}),_0x14efa3[_0x2ea0ad(0x1cc)]((_0x519ff5,_0x2d2c74)=>{var _0x4be8b3=_0x2ea0ad;_0x19b329[_0x2d2c74][_0x4be8b3(0x209)]=_0x519ff5;}),_0x2c702a[_0x2ea0ad(0x1cc)]((_0xed6f88,_0xea4be2)=>{var _0x349d49=_0x2ea0ad;_0x19b329[_0xea4be2][_0x349d49(0x1b7)]=_0xed6f88;}),_0x18e605[_0x2ea0ad(0x1cc)]((_0x452c5d,_0x5d23a9)=>{var _0x568880=_0x2ea0ad;_0x19b329[_0x5d23a9][_0x568880(0x1cb)]=_0x452c5d;}),_0x5cc6aa['forEach']((_0x5cf8a6,_0x4c296f)=>{var _0x6077ea=_0x2ea0ad;_0x19b329[_0x4c296f][_0x6077ea(0x1da)]=_0x5cf8a6;});const _0x60e800=_0x19b329['filter'](_0x134547=>_0x134547['adjust_qty']!=='0'&&_0x134547[_0x2ea0ad(0x1d5)]!=='');var _0x1c7ea2=0x0;_0x60e800[_0x2ea0ad(0x1cc)](_0x16dffe=>{var _0x35c74f=_0x2ea0ad;console[_0x35c74f(0x1e1)]('foreach\x20newproduct',_0x16dffe),parseInt(_0x16dffe[_0x35c74f(0x1d5)])<=0x0&&_0x1c7ea2++;});if(_0x1c7ea2!=0x0)return _0x2947cb[_0x2ea0ad(0x237)](_0x2ea0ad(0x247),_0x2ea0ad(0x1d1)),_0x3b8ec2[_0x2ea0ad(0x206)](_0x2ea0ad(0x20a));_0x20413f[_0x2ea0ad(0x201)]=_0x2edc21,_0x20413f[_0x2ea0ad(0x1f9)]=_0x136e25,_0x20413f['product']=_0x60e800,_0x20413f[_0x2ea0ad(0x1c5)]=_0x321645,_0x20413f[_0x2ea0ad(0x222)]=_0xb571f2,_0x20413f[_0x2ea0ad(0x1cd)]=_0x1e92b5,_0x20413f[_0x2ea0ad(0x1f2)]=_0x1db81a;const _0x321ca9=await _0x20413f[_0x2ea0ad(0x21d)](),_0xc27f5f=await warehouse['findOne']({'name':_0x2edc21,'room':_0xb571f2});_0x321ca9[_0x2ea0ad(0x1fb)]['forEach'](_0x48a95c=>{var _0x4f3833=_0x2ea0ad;const _0x53ae44=_0xc27f5f[_0x4f3833(0x226)][_0x4f3833(0x1fd)](_0xb1b412=>{var _0x4a5c9f=_0x4f3833;_0x48a95c['types']==_0x4a5c9f(0x1b3)?_0xb1b412['product_name']==_0x48a95c[_0x4a5c9f(0x1d6)]&&_0xb1b412['floorlevel']==_0x48a95c[_0x4a5c9f(0x235)]&&_0xb1b412[_0x4a5c9f(0x1b7)]==_0x48a95c[_0x4a5c9f(0x1b7)]&&_0xb1b412[_0x4a5c9f(0x1c9)]==_0x48a95c[_0x4a5c9f(0x1c9)]&&_0xb1b412[_0x4a5c9f(0x210)]==_0x48a95c[_0x4a5c9f(0x210)]&&_0xb1b412[_0x4a5c9f(0x1da)]==_0x48a95c[_0x4a5c9f(0x1da)]&&_0xb1b412[_0x4a5c9f(0x1cb)]==_0x48a95c[_0x4a5c9f(0x1cb)]&&(_0xb1b412[_0x4a5c9f(0x1bd)]=parseInt(_0xb1b412[_0x4a5c9f(0x1bd)])-parseInt(_0x48a95c[_0x4a5c9f(0x1d5)])):_0xb1b412[_0x4a5c9f(0x1d6)]==_0x48a95c[_0x4a5c9f(0x1d6)]&&_0xb1b412['floorlevel']==_0x48a95c['floorlevel']&&_0xb1b412[_0x4a5c9f(0x1b7)]==_0x48a95c['type']&&_0xb1b412['bin']==_0x48a95c['bin']&&_0xb1b412[_0x4a5c9f(0x210)]==_0x48a95c[_0x4a5c9f(0x210)]&&_0xb1b412[_0x4a5c9f(0x1da)]==_0x48a95c['rack']&&_0xb1b412['storage']==_0x48a95c[_0x4a5c9f(0x1cb)]&&(_0xb1b412[_0x4a5c9f(0x1bd)]=parseInt(_0xb1b412[_0x4a5c9f(0x1bd)])+parseInt(_0x48a95c[_0x4a5c9f(0x1d5)]));});}),await _0xc27f5f[_0x2ea0ad(0x21d)](),_0x2947cb[_0x2ea0ad(0x237)](_0x2ea0ad(0x1e9),_0x2ea0ad(0x1d4)),_0x3b8ec2[_0x2ea0ad(0x206)]('/adjustment/view');}catch(_0x53a5a4){console[_0x2ea0ad(0x1e1)](_0x53a5a4);}}),router[a0_0x4f8ac0(0x21a)](a0_0x4f8ac0(0x1be),async(_0x20412c,_0x5ba139)=>{var _0x41d5d7=a0_0x4f8ac0;const {primary_code:_0x435e7c,warehouse_data:_0x657908,rooms_data:_0x191ce8,Roomslist:_0x2f7a3b}=_0x20412c['body'],_0x554f32=_0x2f7a3b[_0x41d5d7(0x1a5)](','),_0xb8847f=[];async function _0x5209df(_0xc32470){var _0x23e05f=_0x41d5d7;const _0x3b5a5c=await warehouse[_0x23e05f(0x1ed)]([{'$match':{'name':_0x657908,'room':_0xc32470}},{'$unwind':_0x23e05f(0x23c)},{'$match':{'product_details.primary_code':_0x435e7c}},{'$group':{'_id':_0x23e05f(0x1bf),'name':{'$first':_0x23e05f(0x1ef)},'product_stock':{'$first':_0x23e05f(0x1ab)},'primary_code':{'$first':_0x23e05f(0x203)},'secondary_code':{'$first':_0x23e05f(0x218)},'product_code':{'$first':_0x23e05f(0x1db)},'level':{'$first':_0x23e05f(0x225)},'isle':{'$first':_0x23e05f(0x1fa)},'type':{'$first':'$product_details.type'},'pallet':{'$first':'$product_details.floorlevel'},'unit':{'$first':_0x23e05f(0x1b2)},'secondary_unit':{'$first':'$product_details.secondary_unit'},'storage':{'$first':_0x23e05f(0x236)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x23e05f(0x1ca)},'production_date':{'$first':_0x23e05f(0x1b4)},'maxPerUnit':{'$first':_0x23e05f(0x202)},'batch_code':{'$first':_0x23e05f(0x20e)},'product_cat':{'$first':_0x23e05f(0x1e4)},'computeUsed':{'$first':'P'},'roomNamed':{'$first':_0x23e05f(0x24a)}}}]),_0x5eddb5=await warehouse[_0x23e05f(0x1ed)]([{'$match':{'name':_0x657908,'room':_0xc32470}},{'$unwind':_0x23e05f(0x23c)},{'$match':{'product_details.secondary_code':_0x435e7c}},{'$group':{'_id':'$product_details._id','name':{'$first':_0x23e05f(0x1ef)},'product_stock':{'$first':_0x23e05f(0x1ab)},'primary_code':{'$first':'$product_details.primary_code'},'secondary_code':{'$first':_0x23e05f(0x218)},'product_code':{'$first':_0x23e05f(0x1db)},'level':{'$first':_0x23e05f(0x225)},'isle':{'$first':_0x23e05f(0x1fa)},'type':{'$first':_0x23e05f(0x1e2)},'pallet':{'$first':_0x23e05f(0x244)},'unit':{'$first':'$product_details.unit'},'secondary_unit':{'$first':_0x23e05f(0x1f3)},'storage':{'$first':_0x23e05f(0x236)},'rack':{'$first':'$product_details.rack'},'expiry_date':{'$first':_0x23e05f(0x1ca)},'production_date':{'$first':_0x23e05f(0x1b4)},'maxPerUnit':{'$first':_0x23e05f(0x202)},'batch_code':{'$first':_0x23e05f(0x20e)},'product_cat':{'$first':'$product_details.product_cat'},'computeUsed':{'$first':'S'},'roomNamed':{'$first':_0x23e05f(0x24a)}}}]);if(_0x3b5a5c[_0x23e05f(0x212)]>0x0)_0xb8847f[_0x23e05f(0x1cf)](_0x3b5a5c);else _0x5eddb5[_0x23e05f(0x212)]>0x0&&_0xb8847f[_0x23e05f(0x1cf)](_0x5eddb5);}const _0x4e5429=_0x554f32[_0x41d5d7(0x1fd)](_0x45c293=>_0x5209df(_0x45c293));await Promise[_0x41d5d7(0x1e6)](_0x4e5429),_0x5ba139[_0x41d5d7(0x249)](_0xb8847f);}),router[a0_0x4f8ac0(0x21a)]('/CheckingWarehouse',async(_0x2aef80,_0x5d260d)=>{var _0x2ff865=a0_0x4f8ac0;const {primaryCode:_0x4f9aca,secondaryCode:_0x4850a0,productCode:_0x1f93ad,level:_0x282a32,isle:_0x159f68,pallet:_0x610429,warehouses:_0x2dfc58,room:_0x476d92}=_0x2aef80[_0x2ff865(0x24b)];try{const _0x10c54d=await warehouse['aggregate']([{'$match':{'name':_0x2dfc58,'room':_0x476d92}},{'$unwind':'$product_details'},{'$match':{'product_details.level':parseInt(_0x282a32),'product_details.isle':_0x159f68,'product_details.pallet':parseInt(_0x610429)}},{'$group':{'_id':_0x2ff865(0x1bf),'name':{'$first':_0x2ff865(0x1ef)},'product_stock':{'$first':_0x2ff865(0x1ab)},'level':{'$first':_0x2ff865(0x23a)},'isle':{'$first':_0x2ff865(0x232)},'pallet':{'$first':'$product_details.pallet'},'maxProducts':{'$first':_0x2ff865(0x1d3)}}}]);_0x5d260d[_0x2ff865(0x227)](0xc8)['json'](_0x10c54d);}catch(_0x4a4b3a){_0x5d260d[_0x2ff865(0x227)](0x194)[_0x2ff865(0x249)]({'message':_0x4a4b3a[_0x2ff865(0x1f0)]});}}),module[a0_0x4f8ac0(0x1f6)]=router;