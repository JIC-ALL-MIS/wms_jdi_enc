const a0_0x16768b=a0_0x50d0;function a0_0x57ca(){const _0x487ce5=['post','message','payable_sum','get','receivable_sum','Portuguese\x20(BR)','Arabic\x20(ae)','email','supplier_payment','PBrands','SheetNames','flash','findOne','344PzhkfG','11431299CvztVH','reason','Mobile_number','2502980ELSDtL','\x20added\x20successfully','user','/view','send','amount','\x20Failed','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','Spanish','multer','Email','exports','3643mWMsNR','supplier\x20data\x20update\x20successfully','/supplier/view','name','find','Workbook','Chinese','/view/:id','$amount','attachment;\x20filename=supplier_Migration_File.xlsx','receivable','address','English\x20(US)','139292BVrwae','Portuguese','supplier.js\x20payment_data','params','Arabic','aggregate','success','supplier_product_file','write','Hindi','../middleware/auth','findById','doc','suppliers','language','exceljs','English','German','express','5427279sLFxqG','master','status','purchase','readFile','/supplier_import_migrate_file','supplier','purchase_return','Name','$reason','body','45udMiyb','1146173zogyoL','Purchase','sheet_to_json','SalesmanName','Sheets','xlsx','suppliers_docs','30UOfQew','addWorksheet','redirect','render','setHeader','save','PUnits','French','forEach','1635184smBISg','filename','Content-Disposition','/products_export_migrate_file','/view/payment/:id','json','../models/all_models','log','12CqEocz','supplier\x20data\x20add\x20successfully','Customers','Company_Name','then'];a0_0x57ca=function(){return _0x487ce5;};return a0_0x57ca();}(function(_0x26d2ab,_0x3bfa75){const _0x29706e=a0_0x50d0,_0x2819e3=_0x26d2ab();while(!![]){try{const _0x26305a=parseInt(_0x29706e(0x12c))/0x1*(-parseInt(_0x29706e(0x11c))/0x2)+-parseInt(_0x29706e(0xf1))/0x3*(parseInt(_0x29706e(0x139))/0x4)+-parseInt(_0x29706e(0x120))/0x5+-parseInt(_0x29706e(0x10a))/0x6*(parseInt(_0x29706e(0xf2))/0x7)+-parseInt(_0x29706e(0x102))/0x8+-parseInt(_0x29706e(0xe6))/0x9+parseInt(_0x29706e(0xf9))/0xa*(parseInt(_0x29706e(0x11d))/0xb);if(_0x26305a===_0x3bfa75)break;else _0x2819e3['push'](_0x2819e3['shift']());}catch(_0xe02490){_0x2819e3['push'](_0x2819e3['shift']());}}}(a0_0x57ca,0x5157f));const express=require(a0_0x16768b(0xe5)),app=express(),router=express['Router'](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x16768b(0x108)),auth=require(a0_0x16768b(0xdd)),users=require('../public/language/languages.json'),excelJS=require(a0_0x16768b(0xe2)),xlsx=require(a0_0x16768b(0xf7)),multer=require(a0_0x16768b(0x129));function a0_0x50d0(_0x301d59,_0x5bf18f){const _0x57cacc=a0_0x57ca();return a0_0x50d0=function(_0x50d0b3,_0x5c2b45){_0x50d0b3=_0x50d0b3-0xdb;let _0xbd10de=_0x57cacc[_0x50d0b3];return _0xbd10de;},a0_0x50d0(_0x301d59,_0x5bf18f);}router['get'](a0_0x16768b(0x123),auth,async(_0x13aeac,_0x34a10f)=>{const _0x2c6f82=a0_0x16768b;try{const {username:_0x10f60c,email:_0x2d9ec4,role:_0x52243b}=_0x13aeac[_0x2c6f82(0x122)],_0x1822ae=_0x13aeac[_0x2c6f82(0x122)],_0x159342=await profile[_0x2c6f82(0x11b)]({'email':_0x1822ae['email']}),_0x346e4e=await master_shop[_0x2c6f82(0x130)]();console['log'](_0x2c6f82(0xe7),_0x346e4e);const _0x49f99f=await suppliers['find']();console[_0x2c6f82(0x109)](_0x49f99f);const _0xc229b1=await suppliers['aggregate']([{'$lookup':{'from':'s_payments','localField':_0x2c6f82(0x12f),'foreignField':_0x2c6f82(0xe0),'as':_0x2c6f82(0xf8)}}]),_0x17fa09=_0xc229b1['map'](_0x2b2e2=>{const _0x497d99=_0x2c6f82;console[_0x497d99(0x109)]('data',_0x2b2e2);var _0x51d23b=0x0,_0x3ec353=0x0;return _0x2b2e2[_0x497d99(0xf8)][_0x497d99(0x101)](_0x21f4df=>{const _0x3d87a0=_0x497d99;console[_0x3d87a0(0x109)](_0x3d87a0(0xdf),_0x21f4df),_0x21f4df[_0x3d87a0(0x11e)]==_0x3d87a0(0xf3)?_0x51d23b+=_0x21f4df[_0x3d87a0(0x125)]:_0x3ec353+=_0x21f4df[_0x3d87a0(0x125)];}),_0x2b2e2[_0x497d99(0xe9)]=_0x51d23b,_0x2b2e2[_0x497d99(0xed)]=_0x3ec353,_0x2b2e2;});console[_0x2c6f82(0x109)](_0x2c6f82(0x13b),_0x17fa09);if(_0x346e4e[0x0][_0x2c6f82(0xe1)]==_0x2c6f82(0x138)){var _0x9df423=users['English'];console[_0x2c6f82(0x109)](_0x9df423);}else{if(_0x346e4e[0x0][_0x2c6f82(0xe1)]=='Hindi')var _0x9df423=users[_0x2c6f82(0xdc)];else{if(_0x346e4e[0x0][_0x2c6f82(0xe1)]==_0x2c6f82(0xe4))var _0x9df423=users[_0x2c6f82(0xe4)];else{if(_0x346e4e[0x0][_0x2c6f82(0xe1)]=='Spanish')var _0x9df423=users[_0x2c6f82(0x128)];else{if(_0x346e4e[0x0]['language']==_0x2c6f82(0x100))var _0x9df423=users[_0x2c6f82(0x100)];else{if(_0x346e4e[0x0][_0x2c6f82(0xe1)]==_0x2c6f82(0x114))var _0x9df423=users[_0x2c6f82(0x13a)];else{if(_0x346e4e[0x0][_0x2c6f82(0xe1)]=='Chinese')var _0x9df423=users[_0x2c6f82(0x132)];else{if(_0x346e4e[0x0][_0x2c6f82(0xe1)]=='Arabic\x20(ae)')var _0x9df423=users['Arabic'];}}}}}}}_0x34a10f[_0x2c6f82(0xfc)](_0x2c6f82(0xec),{'success':_0x13aeac[_0x2c6f82(0x11a)](_0x2c6f82(0x13f)),'errors':_0x13aeac['flash']('errors'),'user':_0x49f99f,'profile':_0x159342,'master_shop':_0x346e4e,'role':_0x1822ae,'payment':_0x17fa09,'language':_0x9df423});}catch(_0x54aecb){console[_0x2c6f82(0x109)](_0x54aecb);}}),router['post'](a0_0x16768b(0x123),auth,async(_0x57c25e,_0x605aee)=>{const _0x34e37c=a0_0x16768b;try{const {name:_0x3dc0bc,email:_0x3b8a3b,mobile:_0x40806f,company:_0x514b3b,address:_0x5be1b9,receivable:_0x21f883,payable:_0x1c3a98}=_0x57c25e['body'],_0x5ebe03=new suppliers({'name':_0x3dc0bc,'email':_0x3b8a3b,'mobile':_0x40806f,'company':_0x514b3b,'address':_0x5be1b9,'receivable':_0x21f883,'payable':_0x1c3a98}),_0x29ca98=await _0x5ebe03[_0x34e37c(0xfe)]();_0x57c25e[_0x34e37c(0x11a)](_0x34e37c(0x13f),_0x34e37c(0x10b)),_0x605aee['redirect'](_0x34e37c(0x12e));}catch(_0x4836f3){console[_0x34e37c(0x109)](_0x4836f3);}}),router['get'](a0_0x16768b(0x133),auth,async(_0x254ad8,_0x32d5d9)=>{const _0x5af1ef=a0_0x16768b;try{const {username:_0x4da212,email:_0x2ee563,role:_0x1ddd23}=_0x254ad8[_0x5af1ef(0x122)],_0x37da53=_0x254ad8[_0x5af1ef(0x122)],_0x4387b3=await profile[_0x5af1ef(0x11b)]({'email':_0x37da53[_0x5af1ef(0x116)]}),_0x1bd97f=await master_shop[_0x5af1ef(0x130)]();console[_0x5af1ef(0x109)]('master',_0x1bd97f);const _0x11a561=_0x254ad8[_0x5af1ef(0x13c)]['id'],_0x127c33=await suppliers[_0x5af1ef(0xde)](_0x11a561);console['log'](_0x127c33);if(_0x1bd97f[0x0][_0x5af1ef(0xe1)]==_0x5af1ef(0x138)){var _0x252b26=users[_0x5af1ef(0xe3)];console[_0x5af1ef(0x109)](_0x252b26);}else{if(_0x1bd97f[0x0]['language']==_0x5af1ef(0xdc))var _0x252b26=users['Hindi'];else{if(_0x1bd97f[0x0]['language']==_0x5af1ef(0xe4))var _0x252b26=users[_0x5af1ef(0xe4)];else{if(_0x1bd97f[0x0][_0x5af1ef(0xe1)]==_0x5af1ef(0x128))var _0x252b26=users[_0x5af1ef(0x128)];else{if(_0x1bd97f[0x0][_0x5af1ef(0xe1)]==_0x5af1ef(0x100))var _0x252b26=users[_0x5af1ef(0x100)];else{if(_0x1bd97f[0x0][_0x5af1ef(0xe1)]==_0x5af1ef(0x114))var _0x252b26=users[_0x5af1ef(0x13a)];else{if(_0x1bd97f[0x0][_0x5af1ef(0xe1)]=='Chinese')var _0x252b26=users[_0x5af1ef(0x132)];else{if(_0x1bd97f[0x0][_0x5af1ef(0xe1)]==_0x5af1ef(0x115))var _0x252b26=users[_0x5af1ef(0x13d)];}}}}}}}_0x32d5d9[_0x5af1ef(0xfc)](_0x5af1ef(0xec),{'success':_0x254ad8[_0x5af1ef(0x11a)](_0x5af1ef(0x13f)),'errors':_0x254ad8[_0x5af1ef(0x11a)]('errors'),'role':_0x37da53,'profile':_0x4387b3,'master_shop':_0x1bd97f,'user':_0x127c33,'language':_0x252b26});}catch(_0x57f8ef){console[_0x5af1ef(0x109)](_0x57f8ef);}}),router[a0_0x16768b(0x10f)](a0_0x16768b(0x133),auth,async(_0x85c82c,_0x4b9d2a)=>{const _0x4a0965=a0_0x16768b;try{const _0x5e4e96=_0x85c82c[_0x4a0965(0x13c)]['id'],_0x3e997a=await suppliers[_0x4a0965(0xde)](_0x5e4e96),{name:_0xa8eede,email:_0x1eeca5,mobile:_0x349c28,company:_0x502e1d,address:_0x25a257,receivable:_0x501298,payable:_0x25dd2a}=_0x85c82c[_0x4a0965(0xf0)];_0x3e997a['name']=_0xa8eede,_0x3e997a[_0x4a0965(0x116)]=_0x1eeca5,_0x3e997a['mobile']=_0x349c28,_0x3e997a['company']=_0x502e1d,_0x3e997a[_0x4a0965(0x137)]=_0x25a257,_0x3e997a[_0x4a0965(0x136)]=_0x501298,_0x3e997a['payable']=_0x25dd2a;const _0x1f755e=await _0x3e997a[_0x4a0965(0xfe)]();_0x85c82c[_0x4a0965(0x11a)](_0x4a0965(0x13f),_0x4a0965(0x12d)),_0x4b9d2a['redirect'](_0x4a0965(0x12e));}catch(_0x1a3959){console['log'](_0x1a3959);}}),router[a0_0x16768b(0x112)](a0_0x16768b(0x106),auth,async(_0x265cc6,_0xd60ab2)=>{const _0xb3a8e7=a0_0x16768b;try{const {username:_0x317baa,email:_0x466cdb,role:_0x31533e}=_0x265cc6[_0xb3a8e7(0x122)],_0x460992=_0x265cc6[_0xb3a8e7(0x122)],_0x3e87c5=await profile[_0xb3a8e7(0x11b)]({'email':_0x460992['email']}),_0x4e3fb9=await master_shop[_0xb3a8e7(0x130)]();console[_0xb3a8e7(0x109)](_0xb3a8e7(0xe7),_0x4e3fb9),console[_0xb3a8e7(0x109)](_0x265cc6[_0xb3a8e7(0x13c)]['id']);const _0x5d4616=await suppliers[_0xb3a8e7(0x11b)]({'_id':_0x265cc6[_0xb3a8e7(0x13c)]['id']});console[_0xb3a8e7(0x109)](_0x5d4616);const _0x542a19=await s_payment_data['find']({'suppliers':_0x5d4616[_0xb3a8e7(0x12f)]});console[_0xb3a8e7(0x109)](_0x542a19);const _0x21e468=await s_payment_data[_0xb3a8e7(0x13e)]([{'$match':{'suppliers':_0x5d4616[_0xb3a8e7(0x12f)]}},{'$match':{'reason':_0xb3a8e7(0xf3)}},{'$group':{'_id':'$reason','sum':{'$sum':_0xb3a8e7(0x134)}}}]);console['log'](_0xb3a8e7(0x111),_0x21e468);const _0x113ba6=await s_payment_data[_0xb3a8e7(0x13e)]([{'$match':{'suppliers':_0x5d4616['name']}},{'$match':{'reason':'Purchase\x20Return'}},{'$group':{'_id':_0xb3a8e7(0xef),'sum':{'$sum':'$amount'}}}]);console[_0xb3a8e7(0x109)](_0xb3a8e7(0x113),_0x113ba6);if(_0x4e3fb9[0x0][_0xb3a8e7(0xe1)]==_0xb3a8e7(0x138)){var _0x156627=users[_0xb3a8e7(0xe3)];console[_0xb3a8e7(0x109)](_0x156627);}else{if(_0x4e3fb9[0x0][_0xb3a8e7(0xe1)]=='Hindi')var _0x156627=users[_0xb3a8e7(0xdc)];else{if(_0x4e3fb9[0x0][_0xb3a8e7(0xe1)]==_0xb3a8e7(0xe4))var _0x156627=users[_0xb3a8e7(0xe4)];else{if(_0x4e3fb9[0x0][_0xb3a8e7(0xe1)]=='Spanish')var _0x156627=users['Spanish'];else{if(_0x4e3fb9[0x0][_0xb3a8e7(0xe1)]==_0xb3a8e7(0x100))var _0x156627=users['French'];else{if(_0x4e3fb9[0x0]['language']==_0xb3a8e7(0x114))var _0x156627=users[_0xb3a8e7(0x13a)];else{if(_0x4e3fb9[0x0]['language']=='Chinese')var _0x156627=users[_0xb3a8e7(0x132)];else{if(_0x4e3fb9[0x0][_0xb3a8e7(0xe1)]==_0xb3a8e7(0x115))var _0x156627=users[_0xb3a8e7(0x13d)];}}}}}}}_0xd60ab2[_0xb3a8e7(0xfc)](_0xb3a8e7(0x117),{'success':_0x265cc6[_0xb3a8e7(0x11a)](_0xb3a8e7(0x13f)),'errors':_0x265cc6[_0xb3a8e7(0x11a)]('errors'),'role':_0x460992,'profile':_0x3e87c5,'master_shop':_0x4e3fb9,'payment':_0x542a19,'payable':_0x21e468,'receivable':_0x113ba6,'language':_0x156627});}catch(_0x5d0de0){console[_0xb3a8e7(0x109)](_0x5d0de0);}}),router[a0_0x16768b(0x112)](a0_0x16768b(0x105),auth,async(_0x2ec576,_0x30ffe5)=>{const _0xdf8787=a0_0x16768b;try{const _0x258287=new excelJS[(_0xdf8787(0x131))](),_0x3a06a2=_0x258287[_0xdf8787(0xfa)](_0xdf8787(0x10c));return _0x3a06a2['columns']=[{'header':_0xdf8787(0xee),'key':_0xdf8787(0x118),'width':0xa},{'header':'Supplier_Code','key':_0xdf8787(0xff),'width':0xa},{'header':_0xdf8787(0x12a),'key':_0xdf8787(0xf5),'width':0xa},{'header':_0xdf8787(0x11f),'key':_0xdf8787(0x137),'width':0xa},{'header':_0xdf8787(0x10d),'key':'mobile','width':0xa},{'header':'address','key':_0xdf8787(0x116),'width':0xa}],_0x30ffe5[_0xdf8787(0xfd)]('Content-Type',_0xdf8787(0x127)),_0x30ffe5[_0xdf8787(0xfd)](_0xdf8787(0x104),_0xdf8787(0x135)),_0x258287['xlsx'][_0xdf8787(0xdb)](_0x30ffe5)[_0xdf8787(0x10e)](()=>{const _0x58bf62=_0xdf8787;_0x30ffe5[_0x58bf62(0xe8)](0xc8);});}catch(_0x5a6a0c){_0x30ffe5['status'](0x190)[_0xdf8787(0x124)]({'errors':_0x5a6a0c[_0xdf8787(0x110)]});}});const storage1=multer['diskStorage']({'destination':(_0x2520c5,_0x551c11,_0x56f5c6)=>{_0x56f5c6(null,'public/Migration');},'filename':(_0xdfedca,_0x46decc,_0xd54124)=>{_0xd54124(null,Date['now']()+_0x46decc['originalname']);}}),uploadMigrate=multer({'storage':storage1});router['post'](a0_0x16768b(0xeb),auth,uploadMigrate['single'](a0_0x16768b(0x140)),async(_0x515e81,_0x239f3f)=>{const _0x2ee88e=a0_0x16768b,_0x40c6ce=_0x515e81['file'][_0x2ee88e(0x103)],_0xbcb7c4=await xlsx[_0x2ee88e(0xea)]('public/Migration/'+_0x40c6ce);let _0x1c1874=_0xbcb7c4[_0x2ee88e(0x119)],_0x2c9d1d=xlsx['utils'][_0x2ee88e(0xf4)](_0xbcb7c4[_0x2ee88e(0xf6)][_0x1c1874[0x0]]);for(const _0xce104d of _0x2c9d1d){const _0x578fcd=_0xce104d['Name'],_0x5ac4ce=_0xce104d['Supplier_Code'],_0x1e4cd3=_0xce104d[_0x2ee88e(0x137)],_0x3a4b22=_0xce104d['Mobile_number'],_0x31ccf5=_0xce104d[_0x2ee88e(0x12a)],_0x5b0a1d=_0xce104d['Company_Name'];try{let _0x58485b=await suppliers[_0x2ee88e(0x11b)]({'name':_0x578fcd});if(!_0x58485b){const _0x15a40b=new suppliers({'name':_0x578fcd,'suppliers_code':_0x5ac4ce,'address':_0x1e4cd3,'mobile':_0x3a4b22,'email':_0x31ccf5,'company':_0x5b0a1d});_0x58485b=await _0x15a40b[_0x2ee88e(0xfe)](),_0x515e81[_0x2ee88e(0x11a)]('success',_0x578fcd+_0x2ee88e(0x121));}else _0x515e81['flash']('error',_0x578fcd+_0x2ee88e(0x126));}catch(_0x5dabb7){_0x239f3f[_0x2ee88e(0xe8)](0x1f4)[_0x2ee88e(0x107)]({'proderror':_0x5dabb7[_0x2ee88e(0x110)],'aproduct':ProductName});}}_0x239f3f[_0x2ee88e(0xfb)](_0x2ee88e(0x12e));}),module[a0_0x16768b(0x12b)]=router;