const a0_0x66666f=a0_0x40fd;(function(_0x47364d,_0x139782){const _0x350ba7=a0_0x40fd,_0x13058e=_0x47364d();while(!![]){try{const _0x2e054a=parseInt(_0x350ba7(0x1aa))/0x1*(parseInt(_0x350ba7(0x19d))/0x2)+-parseInt(_0x350ba7(0x1b6))/0x3+parseInt(_0x350ba7(0x1dd))/0x4*(parseInt(_0x350ba7(0x1ec))/0x5)+parseInt(_0x350ba7(0x1a8))/0x6*(-parseInt(_0x350ba7(0x1e1))/0x7)+-parseInt(_0x350ba7(0x1e3))/0x8+parseInt(_0x350ba7(0x1fc))/0x9*(-parseInt(_0x350ba7(0x1bd))/0xa)+-parseInt(_0x350ba7(0x1a3))/0xb*(-parseInt(_0x350ba7(0x1b7))/0xc);if(_0x2e054a===_0x139782)break;else _0x13058e['push'](_0x13058e['shift']());}catch(_0x2c1a50){_0x13058e['push'](_0x13058e['shift']());}}}(a0_0x4150,0xa4148));const express=require(a0_0x66666f(0x1eb)),app=express(),router=express[a0_0x66666f(0x195)](),{profile,master_shop,categories,brands,units,product,warehouse,staff,customer,suppliers,purchases,suppliers_payment,s_payment_data}=require(a0_0x66666f(0x1d1)),auth=require(a0_0x66666f(0x1bc)),users=require(a0_0x66666f(0x1e0)),excelJS=require('exceljs'),xlsx=require(a0_0x66666f(0x1da)),multer=require(a0_0x66666f(0x1f3));router[a0_0x66666f(0x1b1)](a0_0x66666f(0x1a1),auth,async(_0x5b5a3a,_0x32f9b0)=>{const _0x3f9cc5=a0_0x66666f;try{const {username:_0x1277fc,email:_0x92dfd9,role:_0x317845}=_0x5b5a3a[_0x3f9cc5(0x1af)],_0x41df31=_0x5b5a3a[_0x3f9cc5(0x1af)],_0x18572=await profile['findOne']({'email':_0x41df31[_0x3f9cc5(0x196)]}),_0x566b1a=await master_shop[_0x3f9cc5(0x1ac)]();console['log']('master',_0x566b1a);const _0x240c01=await suppliers['find']();console[_0x3f9cc5(0x1b4)](_0x240c01);const _0x125620=await suppliers[_0x3f9cc5(0x1db)]([{'$lookup':{'from':_0x3f9cc5(0x1e7),'localField':_0x3f9cc5(0x1de),'foreignField':_0x3f9cc5(0x1ce),'as':_0x3f9cc5(0x1e6)}}]),_0x2cf2b5=_0x125620[_0x3f9cc5(0x1b9)](_0x17a997=>{const _0x49f4aa=_0x3f9cc5;console[_0x49f4aa(0x1b4)]('data',_0x17a997);var _0x44a658=0x0,_0x6cbf87=0x0;return _0x17a997[_0x49f4aa(0x1e6)][_0x49f4aa(0x1c5)](_0x491aa2=>{const _0x38f80d=_0x49f4aa;console[_0x38f80d(0x1b4)](_0x38f80d(0x1dc),_0x491aa2),_0x491aa2[_0x38f80d(0x1f5)]==_0x38f80d(0x1f4)?_0x44a658+=_0x491aa2[_0x38f80d(0x1b3)]:_0x6cbf87+=_0x491aa2[_0x38f80d(0x1b3)];}),_0x17a997['purchase']=_0x44a658,_0x17a997[_0x49f4aa(0x1ed)]=_0x6cbf87,_0x17a997;});console[_0x3f9cc5(0x1b4)](_0x3f9cc5(0x1f2),_0x2cf2b5);if(_0x566b1a[0x0][_0x3f9cc5(0x197)]==_0x3f9cc5(0x1f0)){var _0xade6d1=users['English'];console['log'](_0xade6d1);}else{if(_0x566b1a[0x0]['language']=='Hindi')var _0xade6d1=users[_0x3f9cc5(0x1be)];else{if(_0x566b1a[0x0][_0x3f9cc5(0x197)]==_0x3f9cc5(0x1b2))var _0xade6d1=users[_0x3f9cc5(0x1b2)];else{if(_0x566b1a[0x0]['language']==_0x3f9cc5(0x19a))var _0xade6d1=users[_0x3f9cc5(0x19a)];else{if(_0x566b1a[0x0][_0x3f9cc5(0x197)]==_0x3f9cc5(0x1ab))var _0xade6d1=users['French'];else{if(_0x566b1a[0x0]['language']=='Portuguese\x20(BR)')var _0xade6d1=users[_0x3f9cc5(0x194)];else{if(_0x566b1a[0x0][_0x3f9cc5(0x197)]==_0x3f9cc5(0x1f6))var _0xade6d1=users['Chinese'];else{if(_0x566b1a[0x0][_0x3f9cc5(0x197)]=='Arabic\x20(ae)')var _0xade6d1=users[_0x3f9cc5(0x1e4)];}}}}}}}_0x32f9b0['render']('supplier',{'success':_0x5b5a3a['flash']('success'),'errors':_0x5b5a3a['flash'](_0x3f9cc5(0x1fb)),'user':_0x240c01,'profile':_0x18572,'master_shop':_0x566b1a,'role':_0x41df31,'payment':_0x2cf2b5,'language':_0xade6d1});}catch(_0x571264){console[_0x3f9cc5(0x1b4)](_0x571264);}}),router[a0_0x66666f(0x1a9)](a0_0x66666f(0x1a1),auth,async(_0x1c6165,_0x15303c)=>{const _0x4d640a=a0_0x66666f;try{const {name:_0x105717,email:_0x585871,mobile:_0x4fe7ac,company:_0x13038e,address:_0x2c1942,receivable:_0x9456fb,payable:_0x3b5c9c}=_0x1c6165[_0x4d640a(0x1f8)],_0xdccc51=new suppliers({'name':_0x105717,'email':_0x585871,'mobile':_0x4fe7ac,'company':_0x13038e,'address':_0x2c1942,'receivable':_0x9456fb,'payable':_0x3b5c9c}),_0x2624f6=await _0xdccc51[_0x4d640a(0x1a4)]();_0x1c6165[_0x4d640a(0x1ef)]('success','supplier\x20data\x20add\x20successfully'),_0x15303c[_0x4d640a(0x1e8)]('/supplier/view');}catch(_0x290f83){console[_0x4d640a(0x1b4)](_0x290f83);}}),router[a0_0x66666f(0x1b1)]('/view/:id',auth,async(_0x5dfbaf,_0x167fc8)=>{const _0x37bf86=a0_0x66666f;try{const {username:_0x44da55,email:_0xb8cc61,role:_0x5115b3}=_0x5dfbaf[_0x37bf86(0x1af)],_0x204f57=_0x5dfbaf[_0x37bf86(0x1af)],_0x3dfeb4=await profile[_0x37bf86(0x1ad)]({'email':_0x204f57['email']}),_0x5b4219=await master_shop[_0x37bf86(0x1ac)]();console['log'](_0x37bf86(0x1e5),_0x5b4219);const _0x59295f=_0x5dfbaf[_0x37bf86(0x1d2)]['id'],_0xbc0766=await suppliers[_0x37bf86(0x1d8)](_0x59295f);console['log'](_0xbc0766);if(_0x5b4219[0x0][_0x37bf86(0x197)]=='English\x20(US)'){var _0x4c4747=users[_0x37bf86(0x1ba)];console[_0x37bf86(0x1b4)](_0x4c4747);}else{if(_0x5b4219[0x0][_0x37bf86(0x197)]=='Hindi')var _0x4c4747=users[_0x37bf86(0x1be)];else{if(_0x5b4219[0x0][_0x37bf86(0x197)]==_0x37bf86(0x1b2))var _0x4c4747=users[_0x37bf86(0x1b2)];else{if(_0x5b4219[0x0][_0x37bf86(0x197)]==_0x37bf86(0x19a))var _0x4c4747=users[_0x37bf86(0x19a)];else{if(_0x5b4219[0x0][_0x37bf86(0x197)]==_0x37bf86(0x1ab))var _0x4c4747=users[_0x37bf86(0x1ab)];else{if(_0x5b4219[0x0][_0x37bf86(0x197)]=='Portuguese\x20(BR)')var _0x4c4747=users[_0x37bf86(0x194)];else{if(_0x5b4219[0x0]['language']==_0x37bf86(0x1f6))var _0x4c4747=users['Chinese'];else{if(_0x5b4219[0x0][_0x37bf86(0x197)]==_0x37bf86(0x1cc))var _0x4c4747=users['Arabic'];}}}}}}}_0x167fc8[_0x37bf86(0x199)](_0x37bf86(0x1ae),{'success':_0x5dfbaf[_0x37bf86(0x1ef)](_0x37bf86(0x1c1)),'errors':_0x5dfbaf['flash'](_0x37bf86(0x1fb)),'role':_0x204f57,'profile':_0x3dfeb4,'master_shop':_0x5b4219,'user':_0xbc0766,'language':_0x4c4747});}catch(_0x40ef2a){console[_0x37bf86(0x1b4)](_0x40ef2a);}}),router[a0_0x66666f(0x1a9)](a0_0x66666f(0x1a7),auth,async(_0x126264,_0x405c56)=>{const _0x310c6d=a0_0x66666f;try{const _0x49aee9=_0x126264[_0x310c6d(0x1d2)]['id'],_0x8f79e0=await suppliers[_0x310c6d(0x1d8)](_0x49aee9),{name:_0x159bf1,email:_0x1981e5,mobile:_0x187bd9,company:_0xf1f614,address:_0x25c536,receivable:_0x37e528,payable:_0x53c4b2}=_0x126264[_0x310c6d(0x1f8)];_0x8f79e0[_0x310c6d(0x1de)]=_0x159bf1,_0x8f79e0[_0x310c6d(0x196)]=_0x1981e5,_0x8f79e0['mobile']=_0x187bd9,_0x8f79e0[_0x310c6d(0x1df)]=_0xf1f614,_0x8f79e0[_0x310c6d(0x1b8)]=_0x25c536,_0x8f79e0[_0x310c6d(0x19f)]=_0x37e528,_0x8f79e0[_0x310c6d(0x1f7)]=_0x53c4b2;const _0x10914d=await _0x8f79e0[_0x310c6d(0x1a4)]();_0x126264[_0x310c6d(0x1ef)](_0x310c6d(0x1c1),_0x310c6d(0x1cb)),_0x405c56[_0x310c6d(0x1e8)]('/supplier/view');}catch(_0x4f5378){console[_0x310c6d(0x1b4)](_0x4f5378);}}),router[a0_0x66666f(0x1b1)](a0_0x66666f(0x19b),auth,async(_0x24a8b2,_0x1d5f61)=>{const _0x29ea9d=a0_0x66666f;try{const {username:_0x367fef,email:_0x285ba5,role:_0x52ba82}=_0x24a8b2[_0x29ea9d(0x1af)],_0x41e552=_0x24a8b2[_0x29ea9d(0x1af)],_0x2f47f6=await profile['findOne']({'email':_0x41e552['email']}),_0x5b5434=await master_shop[_0x29ea9d(0x1ac)]();console['log']('master',_0x5b5434),console[_0x29ea9d(0x1b4)](_0x24a8b2['params']['id']);const _0x154fc6=await suppliers[_0x29ea9d(0x1ad)]({'_id':_0x24a8b2[_0x29ea9d(0x1d2)]['id']});console[_0x29ea9d(0x1b4)](_0x154fc6);const _0x3d026c=await s_payment_data['find']({'suppliers':_0x154fc6['name']});console[_0x29ea9d(0x1b4)](_0x3d026c);const _0x3bd627=await s_payment_data[_0x29ea9d(0x1db)]([{'$match':{'suppliers':_0x154fc6[_0x29ea9d(0x1de)]}},{'$match':{'reason':_0x29ea9d(0x1f4)}},{'$group':{'_id':_0x29ea9d(0x19c),'sum':{'$sum':'$amount'}}}]);console[_0x29ea9d(0x1b4)]('payable_sum',_0x3bd627);const _0x537c4c=await s_payment_data[_0x29ea9d(0x1db)]([{'$match':{'suppliers':_0x154fc6[_0x29ea9d(0x1de)]}},{'$match':{'reason':_0x29ea9d(0x1a0)}},{'$group':{'_id':_0x29ea9d(0x19c),'sum':{'$sum':_0x29ea9d(0x1cf)}}}]);console['log'](_0x29ea9d(0x1bf),_0x537c4c);if(_0x5b5434[0x0]['language']==_0x29ea9d(0x1f0)){var _0x41142c=users[_0x29ea9d(0x1ba)];console[_0x29ea9d(0x1b4)](_0x41142c);}else{if(_0x5b5434[0x0]['language']==_0x29ea9d(0x1be))var _0x41142c=users[_0x29ea9d(0x1be)];else{if(_0x5b5434[0x0][_0x29ea9d(0x197)]=='German')var _0x41142c=users[_0x29ea9d(0x1b2)];else{if(_0x5b5434[0x0][_0x29ea9d(0x197)]==_0x29ea9d(0x19a))var _0x41142c=users[_0x29ea9d(0x19a)];else{if(_0x5b5434[0x0][_0x29ea9d(0x197)]==_0x29ea9d(0x1ab))var _0x41142c=users[_0x29ea9d(0x1ab)];else{if(_0x5b5434[0x0][_0x29ea9d(0x197)]=='Portuguese\x20(BR)')var _0x41142c=users['Portuguese'];else{if(_0x5b5434[0x0][_0x29ea9d(0x197)]==_0x29ea9d(0x1f6))var _0x41142c=users['Chinese'];else{if(_0x5b5434[0x0][_0x29ea9d(0x197)]==_0x29ea9d(0x1cc))var _0x41142c=users['Arabic'];}}}}}}}_0x1d5f61[_0x29ea9d(0x199)](_0x29ea9d(0x1c7),{'success':_0x24a8b2[_0x29ea9d(0x1ef)](_0x29ea9d(0x1c1)),'errors':_0x24a8b2[_0x29ea9d(0x1ef)]('errors'),'role':_0x41e552,'profile':_0x2f47f6,'master_shop':_0x5b5434,'payment':_0x3d026c,'payable':_0x3bd627,'receivable':_0x537c4c,'language':_0x41142c});}catch(_0x393af9){console[_0x29ea9d(0x1b4)](_0x393af9);}}),router[a0_0x66666f(0x1b1)](a0_0x66666f(0x1c6),auth,async(_0x6bc990,_0x24f1b7)=>{const _0x3b42f7=a0_0x66666f;try{const _0x5f187b=new excelJS['Workbook'](),_0x17e9ff=_0x5f187b['addWorksheet']('Customers');return _0x17e9ff[_0x3b42f7(0x1c0)]=[{'header':_0x3b42f7(0x1d0),'key':_0x3b42f7(0x1c9),'width':0xa},{'header':_0x3b42f7(0x1b5),'key':_0x3b42f7(0x1e9),'width':0xa},{'header':'Email','key':_0x3b42f7(0x1f1),'width':0xa},{'header':'Mobile_number','key':_0x3b42f7(0x1b8),'width':0xa},{'header':_0x3b42f7(0x1c4),'key':'mobile','width':0xa},{'header':_0x3b42f7(0x1b8),'key':_0x3b42f7(0x196),'width':0xa}],_0x24f1b7[_0x3b42f7(0x1a6)](_0x3b42f7(0x1d7),_0x3b42f7(0x1a5)),_0x24f1b7['setHeader'](_0x3b42f7(0x1c8),_0x3b42f7(0x1bb)),_0x5f187b[_0x3b42f7(0x1da)]['write'](_0x24f1b7)[_0x3b42f7(0x19e)](()=>{const _0x453f38=_0x3b42f7;_0x24f1b7[_0x453f38(0x1c2)](0xc8);});}catch(_0x57f429){_0x24f1b7[_0x3b42f7(0x1c2)](0x190)['send']({'errors':_0x57f429['message']});}});const storage1=multer[a0_0x66666f(0x1d9)]({'destination':(_0x2615c7,_0x3974a9,_0x34dfac)=>{_0x34dfac(null,'public/Migration');},'filename':(_0x15b5b4,_0x1435cb,_0x105ef1)=>{const _0x4d6e5b=a0_0x66666f;_0x105ef1(null,Date[_0x4d6e5b(0x1d6)]()+_0x1435cb[_0x4d6e5b(0x1cd)]);}}),uploadMigrate=multer({'storage':storage1});router[a0_0x66666f(0x1a9)](a0_0x66666f(0x1ee),auth,uploadMigrate[a0_0x66666f(0x1c3)](a0_0x66666f(0x1d4)),async(_0x29f109,_0x290d14)=>{const _0x13b7d3=a0_0x66666f,_0x305c5f=_0x29f109[_0x13b7d3(0x1f9)][_0x13b7d3(0x1ea)],_0x4b955f=await xlsx['readFile'](_0x13b7d3(0x198)+_0x305c5f);let _0x38ff45=_0x4b955f[_0x13b7d3(0x1fa)],_0x402779=xlsx['utils']['sheet_to_json'](_0x4b955f[_0x13b7d3(0x1ca)][_0x38ff45[0x0]]);for(const _0x37b31a of _0x402779){const _0x1a5fcf=_0x37b31a['Name'],_0x127865=_0x37b31a['Supplier_Code'],_0x5b6289=_0x37b31a[_0x13b7d3(0x1b8)],_0x122b2e=_0x37b31a[_0x13b7d3(0x1d5)],_0x7827f=_0x37b31a[_0x13b7d3(0x1d3)],_0xe2c390=_0x37b31a[_0x13b7d3(0x1c4)];try{let _0x5dc0f6=await suppliers[_0x13b7d3(0x1ad)]({'name':_0x1a5fcf});if(!_0x5dc0f6){const _0x202a98=new suppliers({'name':_0x1a5fcf,'suppliers_code':_0x127865,'address':_0x5b6289,'mobile':_0x122b2e,'email':_0x7827f,'company':_0xe2c390});_0x5dc0f6=await _0x202a98[_0x13b7d3(0x1a4)](),_0x29f109[_0x13b7d3(0x1ef)](_0x13b7d3(0x1c1),_0x1a5fcf+'\x20added\x20successfully');}else _0x29f109[_0x13b7d3(0x1ef)](_0x13b7d3(0x1e2),_0x1a5fcf+'\x20Failed');}catch(_0x1f7db5){_0x290d14['status'](0x1f4)['json']({'proderror':_0x1f7db5[_0x13b7d3(0x1b0)],'aproduct':ProductName});}}_0x290d14[_0x13b7d3(0x1e8)]('/supplier/view');}),module[a0_0x66666f(0x1a2)]=router;function a0_0x40fd(_0x3da8b1,_0x24ac0a){const _0x415013=a0_0x4150();return a0_0x40fd=function(_0x40fd26,_0x4c210c){_0x40fd26=_0x40fd26-0x194;let _0x430aed=_0x415013[_0x40fd26];return _0x430aed;},a0_0x40fd(_0x3da8b1,_0x24ac0a);}function a0_0x4150(){const _0x173255=['payable','body','file','SheetNames','errors','21177jlRcRQ','Portuguese','Router','email','language','public/Migration/','render','Spanish','/view/payment/:id','$reason','874uMXNZY','then','receivable','Purchase\x20Return','/view','exports','13882BqjCdz','save','application/vnd.openxmlformats-officedocument.spreadsheatml.sheet','setHeader','/view/:id','392226DTXXBf','post','1735yzTGsK','French','find','findOne','supplier','user','message','get','German','amount','log','Supplier_Code','4007535dOiOoR','22584blXmvt','address','map','English','attachment;\x20filename=supplier_Migration_File.xlsx','../middleware/auth','3710OydmAi','Hindi','receivable_sum','columns','success','status','single','Company_Name','forEach','/products_export_migrate_file','supplier_payment','Content-Disposition','PBrands','Sheets','supplier\x20data\x20update\x20successfully','Arabic\x20(ae)','originalname','suppliers','$amount','Name','../models/all_models','params','Email','supplier_product_file','Mobile_number','now','Content-Type','findById','diskStorage','xlsx','aggregate','doc','4btRKGc','name','company','../public/language/languages.json','98ywfoHc','error','663568hqNowV','Arabic','master','suppliers_docs','s_payments','redirect','PUnits','filename','express','3728705RrvJyA','purchase_return','/supplier_import_migrate_file','flash','English\x20(US)','SalesmanName','supplier.js\x20payment_data','multer','Purchase','reason','Chinese'];a0_0x4150=function(){return _0x173255;};return a0_0x4150();}